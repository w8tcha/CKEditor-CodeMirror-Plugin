(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{this.CodeMirror=a()}}})(function(){var cn=/gecko\/\d/i.test(navigator.userAgent);var eI=/MSIE \d/.test(navigator.userAgent);var bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var dI=eI||bI;var k=dI&&(eI?document.documentMode||6:bI[1]);var cY=/WebKit\//.test(navigator.userAgent);var dL=cY&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var da=/Chrome\//.test(navigator.userAgent);var d0=/Opera\//.test(navigator.userAgent);var aB=/Apple Computer/.test(navigator.vendor);var c5=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var fs=/PhantomJS/.test(navigator.userAgent);var eZ=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var ee=eZ||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var b6=eZ||/Mac/.test(navigator.platform);var aO=/win/i.test(navigator.platform);var aY=d0&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(aY){aY=Number(aY[1])}if(aY&&aY>=15){d0=false;cY=true}var bP=b6&&(dL||d0&&(aY==null||aY<12.11));var f6=cn||(dI&&k>=9);var f9=false,a7=false;function H(gf,gh){if(!(this instanceof H)){return new H(gf,gh)}this.options=gh=gh?aM(gh):{};aM(e1,gh,false);cd(gh);var gl=gh.value;if(typeof gl=="string"){gl=new ar(gl,gh.mode)}this.doc=gl;var gg=new H.inputStyles[gh.inputStyle](this);var gk=this.display=new eG(gf,gl,gg);gk.wrapper.CodeMirror=this;ea(this);cM(this);if(gh.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gh.autofocus&&!ee){gk.input.focus()}aC(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new gd(),keySeq:null};var ge=this;if(dI&&k<11){setTimeout(function(){ge.display.input.reset(true)},20)}fP(this);bi();cG(this);this.curOp.forceUpdate=true;d9(this,gl);if((gh.autofocus&&!ee)||ge.hasFocus()){setTimeout(cu(cA,this),20)}else{aU(this)}for(var gj in be){if(be.hasOwnProperty(gj)){be[gj](this,gh[gj],cb)}}d3(this);if(gh.finishInit){gh.finishInit(this)}for(var gi=0;gi<a8.length;++gi){a8[gi](this)}al(this);if(cY&&gh.lineWrapping&&getComputedStyle(gk.lineDiv).textRendering=="optimizelegibility"){gk.lineDiv.style.textRendering="auto"}}function eG(ge,gg,gf){var gh=this;this.input=gf;gh.scrollbarFiller=fZ("div",null,"CodeMirror-scrollbar-filler");gh.scrollbarFiller.setAttribute("cm-not-content","true");gh.gutterFiller=fZ("div",null,"CodeMirror-gutter-filler");gh.gutterFiller.setAttribute("cm-not-content","true");gh.lineDiv=fZ("div",null,"CodeMirror-code");gh.selectionDiv=fZ("div",null,null,"position: relative; z-index: 1");gh.cursorDiv=fZ("div",null,"CodeMirror-cursors");gh.measure=fZ("div",null,"CodeMirror-measure");gh.lineMeasure=fZ("div",null,"CodeMirror-measure");gh.lineSpace=fZ("div",[gh.measure,gh.lineMeasure,gh.selectionDiv,gh.cursorDiv,gh.lineDiv],null,"position: relative; outline: none");gh.mover=fZ("div",[fZ("div",[gh.lineSpace],"CodeMirror-lines")],null,"position: relative");gh.sizer=fZ("div",[gh.mover],"CodeMirror-sizer");gh.sizerWidth=null;gh.heightForcer=fZ("div",null,null,"position: absolute; height: "+dH+"px; width: 1px;");gh.gutters=fZ("div",null,"CodeMirror-gutters");gh.lineGutter=null;gh.scroller=fZ("div",[gh.sizer,gh.heightForcer,gh.gutters],"CodeMirror-scroll");gh.scroller.setAttribute("tabIndex","-1");gh.wrapper=fZ("div",[gh.scrollbarFiller,gh.gutterFiller,gh.scroller],"CodeMirror");if(dI&&k<8){gh.gutters.style.zIndex=-1;gh.scroller.style.paddingRight=0}if(!cY&&!(cn&&ee)){gh.scroller.draggable=true}if(ge){if(ge.appendChild){ge.appendChild(gh.wrapper)}else{ge(gh.wrapper)}}gh.viewFrom=gh.viewTo=gg.first;gh.reportedViewFrom=gh.reportedViewTo=gg.first;gh.view=[];gh.renderedView=null;gh.externalMeasured=null;gh.viewOffset=0;gh.lastWrapHeight=gh.lastWrapWidth=0;gh.updateLineNumbers=null;gh.nativeBarWidth=gh.barHeight=gh.barWidth=0;gh.scrollbarsClipped=false;gh.lineNumWidth=gh.lineNumInnerWidth=gh.lineNumChars=null;gh.alignWidgets=false;gh.cachedCharWidth=gh.cachedTextHeight=gh.cachedPaddingH=null;gh.maxLine=null;gh.maxLineLength=0;gh.maxLineChanged=false;gh.wheelDX=gh.wheelDY=gh.wheelStartX=gh.wheelStartY=null;gh.shift=false;gh.selForContextMenu=null;gh.activeTouch=null;gf.init(gh)}function bq(ge){ge.doc.mode=H.getMode(ge.options,ge.doc.modeOption);ej(ge)}function ej(ge){ge.doc.iter(function(gf){if(gf.stateAfter){gf.stateAfter=null}if(gf.styles){gf.styles=null}});ge.doc.frontier=ge.doc.first;ed(ge,100);ge.state.modeGen++;if(ge.curOp){ah(ge)}}function eE(ge){if(ge.options.lineWrapping){fy(ge.display.wrapper,"CodeMirror-wrap");ge.display.sizer.style.minWidth="";ge.display.sizerWidth=null}else{f(ge.display.wrapper,"CodeMirror-wrap");g(ge)}X(ge);ah(ge);ak(ge);setTimeout(function(){eW(ge)},100)}function bd(ge){var gg=aX(ge.display),gf=ge.options.lineWrapping;var gh=gf&&Math.max(5,ge.display.scroller.clientWidth/dB(ge.display)-3);return function(gj){if(fu(ge.doc,gj)){return 0}var gi=0;if(gj.widgets){for(var gk=0;gk<gj.widgets.length;gk++){if(gj.widgets[gk].height){gi+=gj.widgets[gk].height}}}if(gf){return gi+(Math.ceil(gj.text.length/gh)||1)*gg}else{return gi+gg}}}function X(ge){var gg=ge.doc,gf=bd(ge);gg.iter(function(gh){var gi=gf(gh);if(gi!=gh.height){f2(gh,gi)}})}function cM(ge){ge.display.wrapper.className=ge.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+ge.options.theme.replace(/(^|\s)\s*/g," cm-s-");ak(ge)}function du(ge){ea(ge);ah(ge);setTimeout(function(){eC(ge)},20)}function ea(ge){var gf=ge.display.gutters,gj=ge.options.gutters;dZ(gf);for(var gg=0;gg<gj.length;++gg){var gh=gj[gg];var gi=gf.appendChild(fZ("div",null,"CodeMirror-gutter "+gh));if(gh=="CodeMirror-linenumbers"){ge.display.lineGutter=gi;gi.style.width=(ge.display.lineNumWidth||1)+"px"}}gf.style.display=gg?"":"none";c2(ge)}function c2(ge){var gf=ge.display.gutters.offsetWidth;ge.display.sizer.style.marginLeft=gf+"px"}function el(gg){if(gg.height==0){return 0}var gf=gg.text.length,ge,gi=gg;while(ge=eM(gi)){var gh=ge.find(0,true);gi=gh.from.line;gf+=gh.from.ch-gh.to.ch}gi=gg;while(ge=eu(gi)){var gh=ge.find(0,true);gf-=gi.text.length-gh.from.ch;gi=gh.to.line;gf+=gi.text.length-gh.to.ch}return gf}function g(ge){var gg=ge.display,gf=ge.doc;gg.maxLine=fd(gf,gf.first);gg.maxLineLength=el(gg.maxLine);gg.maxLineChanged=true;gf.iter(function(gi){var gh=el(gi);if(gh>gg.maxLineLength){gg.maxLineLength=gh;gg.maxLine=gi}})}function cd(ge){var gf=df(ge.gutters,"CodeMirror-linenumbers");if(gf==-1&&ge.lineNumbers){ge.gutters=ge.gutters.concat(["CodeMirror-linenumbers"])}else{if(gf>-1&&!ge.lineNumbers){ge.gutters=ge.gutters.slice(0);ge.gutters.splice(gf,1)}}}function dy(ge){var gh=ge.display,gg=gh.gutters.offsetWidth;var gf=Math.round(ge.doc.height+bH(ge.display));return{clientHeight:gh.scroller.clientHeight,viewHeight:gh.wrapper.clientHeight,scrollWidth:gh.scroller.scrollWidth,clientWidth:gh.scroller.clientWidth,viewWidth:gh.wrapper.clientWidth,barLeft:ge.options.fixedGutter?gg:0,docHeight:gf,scrollHeight:gf+cR(ge)+gh.barHeight,nativeBarWidth:gh.nativeBarWidth,gutterWidth:gg}}function di(gg,gf,ge){this.cm=ge;var gh=this.vert=fZ("div",[fZ("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gi=this.horiz=fZ("div",[fZ("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gg(gh);gg(gi);bW(gh,"scroll",function(){if(gh.clientHeight){gf(gh.scrollTop,"vertical")}});bW(gi,"scroll",function(){if(gi.clientWidth){gf(gi.scrollLeft,"horizontal")}});this.checkedOverlay=false;if(dI&&k<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}di.prototype=aM({update:function(gh){var gi=gh.scrollWidth>gh.clientWidth+1;var gg=gh.scrollHeight>gh.clientHeight+1;var gj=gh.nativeBarWidth;if(gg){this.vert.style.display="block";this.vert.style.bottom=gi?gj+"px":"0";var gf=gh.viewHeight-(gi?gj:0);this.vert.firstChild.style.height=Math.max(0,gh.scrollHeight-gh.clientHeight+gf)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gi){this.horiz.style.display="block";this.horiz.style.right=gg?gj+"px":"0";this.horiz.style.left=gh.barLeft+"px";var ge=gh.viewWidth-gh.barLeft-(gg?gj:0);this.horiz.firstChild.style.width=(gh.scrollWidth-gh.clientWidth+ge)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedOverlay&&gh.clientHeight>0){if(gj==0){this.overlayHack()}this.checkedOverlay=true}return{right:gg?gj:0,bottom:gi?gj:0}},setScrollLeft:function(ge){if(this.horiz.scrollLeft!=ge){this.horiz.scrollLeft=ge}},setScrollTop:function(ge){if(this.vert.scrollTop!=ge){this.vert.scrollTop=ge}},overlayHack:function(){var ge=b6&&!c5?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=ge;var gf=this;var gg=function(gh){if(L(gh)!=gf.vert&&L(gh)!=gf.horiz){c0(gf.cm,es)(gh)}};bW(this.vert,"mousedown",gg);bW(this.horiz,"mousedown",gg)},clear:function(){var ge=this.horiz.parentNode;ge.removeChild(this.horiz);ge.removeChild(this.vert)}},di.prototype);function e2(){}e2.prototype=aM({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},e2.prototype);H.scrollbarModel={"native":di,"null":e2};function aC(ge){if(ge.display.scrollbars){ge.display.scrollbars.clear();if(ge.display.scrollbars.addClass){f(ge.display.wrapper,ge.display.scrollbars.addClass)}}ge.display.scrollbars=new H.scrollbarModel[ge.options.scrollbarStyle](function(gf){ge.display.wrapper.insertBefore(gf,ge.display.scrollbarFiller);bW(gf,"mousedown",function(){if(ge.state.focused){setTimeout(function(){ge.display.input.focus()},0)}});gf.setAttribute("cm-not-content","true")},function(gg,gf){if(gf=="horizontal"){bD(ge,gg)}else{N(ge,gg)}},ge);if(ge.display.scrollbars.addClass){fy(ge.display.wrapper,ge.display.scrollbars.addClass)}}function eW(gg,gi){if(!gi){gi=dy(gg)}var gf=gg.display.barWidth,ge=gg.display.barHeight;aT(gg,gi);for(var gh=0;gh<4&&gf!=gg.display.barWidth||ge!=gg.display.barHeight;gh++){if(gf!=gg.display.barWidth&&gg.options.lineWrapping){a9(gg)}aT(gg,dy(gg));gf=gg.display.barWidth;ge=gg.display.barHeight}}function aT(ge,gf){var gh=ge.display;var gg=gh.scrollbars.update(gf);gh.sizer.style.paddingRight=(gh.barWidth=gg.right)+"px";gh.sizer.style.paddingBottom=(gh.barHeight=gg.bottom)+"px";if(gg.right&&gg.bottom){gh.scrollbarFiller.style.display="block";gh.scrollbarFiller.style.height=gg.bottom+"px";gh.scrollbarFiller.style.width=gg.right+"px"}else{gh.scrollbarFiller.style.display=""}if(gg.bottom&&ge.options.coverGutterNextToScrollbar&&ge.options.fixedGutter){gh.gutterFiller.style.display="block";gh.gutterFiller.style.height=gg.bottom+"px";gh.gutterFiller.style.width=gf.gutterWidth+"px"}else{gh.gutterFiller.style.display=""}}function b5(gh,gl,gg){var gi=gg&&gg.top!=null?Math.max(0,gg.top):gh.scroller.scrollTop;gi=Math.floor(gi-e6(gh));var ge=gg&&gg.bottom!=null?gg.bottom:gi+gh.wrapper.clientHeight;var gj=bF(gl,gi),gk=bF(gl,ge);if(gg&&gg.ensure){var gf=gg.ensure.from.line,gm=gg.ensure.to.line;if(gf<gj){gj=gf;gk=bF(gl,bL(fd(gl,gf))+gh.wrapper.clientHeight)}else{if(Math.min(gm,gl.lastLine())>=gk){gj=bF(gl,bL(fd(gl,gm))-gh.wrapper.clientHeight);gk=gm}}}return{from:gj,to:Math.max(gk,gj+1)}}function eC(gm){var gk=gm.display,gl=gk.view;if(!gk.alignWidgets&&(!gk.gutters.firstChild||!gm.options.fixedGutter)){return}var gi=dV(gk)-gk.scroller.scrollLeft+gm.doc.scrollLeft;var ge=gk.gutters.offsetWidth,gf=gi+"px";for(var gh=0;gh<gl.length;gh++){if(!gl[gh].hidden){if(gm.options.fixedGutter&&gl[gh].gutter){gl[gh].gutter.style.left=gf}var gj=gl[gh].alignable;if(gj){for(var gg=0;gg<gj.length;gg++){gj[gg].style.left=gf}}}}if(gm.options.fixedGutter){gk.gutters.style.left=(gi+ge)+"px"}}function d3(ge){if(!ge.options.lineNumbers){return false}var gj=ge.doc,gf=eq(ge.options,gj.first+gj.size-1),gi=ge.display;if(gf.length!=gi.lineNumChars){var gk=gi.measure.appendChild(fZ("div",[fZ("div",gf)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gg=gk.firstChild.offsetWidth,gh=gk.offsetWidth-gg;gi.lineGutter.style.width="";gi.lineNumInnerWidth=Math.max(gg,gi.lineGutter.offsetWidth-gh);gi.lineNumWidth=gi.lineNumInnerWidth+gh;gi.lineNumChars=gi.lineNumInnerWidth?gf.length:-1;gi.lineGutter.style.width=gi.lineNumWidth+"px";c2(ge);return true}return false}function eq(ge,gf){return String(ge.lineNumberFormatter(gf+ge.firstLineNumber))}function dV(ge){return ge.scroller.getBoundingClientRect().left-ge.sizer.getBoundingClientRect().left}function aH(gf,ge,gg){var gh=gf.display;this.viewport=ge;this.visible=b5(gh,gf.doc,ge);this.editorIsHidden=!gh.wrapper.offsetWidth;this.wrapperHeight=gh.wrapper.clientHeight;this.wrapperWidth=gh.wrapper.clientWidth;this.oldDisplayWidth=dj(gf);this.force=gg;this.dims=fb(gf);this.events=[]}aH.prototype.signal=function(gf,ge){if(fg(gf,ge)){this.events.push(arguments)}};aH.prototype.finish=function(){for(var ge=0;ge<this.events.length;ge++){aD.apply(null,this.events[ge])}};function J(ge){var gf=ge.display;if(!gf.scrollbarsClipped&&gf.scroller.offsetWidth){gf.nativeBarWidth=gf.scroller.offsetWidth-gf.scroller.clientWidth;gf.heightForcer.style.height=cR(ge)+"px";gf.sizer.style.marginBottom=-gf.nativeBarWidth+"px";gf.sizer.style.borderRightWidth=cR(ge)+"px";gf.scrollbarsClipped=true}}function B(gn,gh){var gi=gn.display,gm=gn.doc;if(gh.editorIsHidden){ev(gn);return false}if(!gh.force&&gh.visible.from>=gi.viewFrom&&gh.visible.to<=gi.viewTo&&(gi.updateLineNumbers==null||gi.updateLineNumbers>=gi.viewTo)&&gi.renderedView==gi.view&&c9(gn)==0){return false}if(d3(gn)){ev(gn);gh.dims=fb(gn)}var gg=gm.first+gm.size;var gk=Math.max(gh.visible.from-gn.options.viewportMargin,gm.first);var gl=Math.min(gg,gh.visible.to+gn.options.viewportMargin);if(gi.viewFrom<gk&&gk-gi.viewFrom<20){gk=Math.max(gm.first,gi.viewFrom)}if(gi.viewTo>gl&&gi.viewTo-gl<20){gl=Math.min(gg,gi.viewTo)}if(a7){gk=aV(gn.doc,gk);gl=d1(gn.doc,gl)}var gf=gk!=gi.viewFrom||gl!=gi.viewTo||gi.lastWrapHeight!=gh.wrapperHeight||gi.lastWrapWidth!=gh.wrapperWidth;cP(gn,gk,gl);gi.viewOffset=bL(fd(gn.doc,gi.viewFrom));gn.display.mover.style.top=gi.viewOffset+"px";var ge=c9(gn);if(!gf&&ge==0&&!gh.force&&gi.renderedView==gi.view&&(gi.updateLineNumbers==null||gi.updateLineNumbers>=gi.viewTo)){return false}var gj=dM();if(ge>4){gi.lineDiv.style.display="none"}cl(gn,gi.updateLineNumbers,gh.dims);if(ge>4){gi.lineDiv.style.display=""}gi.renderedView=gi.view;if(gj&&dM()!=gj&&gj.offsetHeight){gj.focus()}dZ(gi.cursorDiv);dZ(gi.selectionDiv);gi.gutters.style.height=0;if(gf){gi.lastWrapHeight=gh.wrapperHeight;gi.lastWrapWidth=gh.wrapperWidth;ed(gn,400)}gi.updateLineNumbers=null;return true}function ci(gf,gj){var gh=gj.force,ge=gj.viewport;for(var gi=true;;gi=false){if(gi&&gf.options.lineWrapping&&gj.oldDisplayWidth!=dj(gf)){gh=true}else{gh=false;if(ge&&ge.top!=null){ge={top:Math.min(gf.doc.height+bH(gf.display)-cT(gf),ge.top)}}gj.visible=b5(gf.display,gf.doc,ge);if(gj.visible.from>=gf.display.viewFrom&&gj.visible.to<=gf.display.viewTo){break}}if(!B(gf,gj)){break}a9(gf);var gg=dy(gf);bB(gf);dx(gf,gg);eW(gf,gg)}gj.signal(gf,"update",gf);if(gf.display.viewFrom!=gf.display.reportedViewFrom||gf.display.viewTo!=gf.display.reportedViewTo){gj.signal(gf,"viewportChange",gf,gf.display.viewFrom,gf.display.viewTo);gf.display.reportedViewFrom=gf.display.viewFrom;gf.display.reportedViewTo=gf.display.viewTo}}function dR(gf,ge){var gh=new aH(gf,ge);if(B(gf,gh)){a9(gf);ci(gf,gh);var gg=dy(gf);bB(gf);dx(gf,gg);eW(gf,gg);gh.finish()}}function dx(ge,gf){ge.display.sizer.style.minHeight=gf.docHeight+"px";var gg=gf.docHeight+ge.display.barHeight;ge.display.heightForcer.style.top=gg+"px";ge.display.gutters.style.height=Math.max(gg+cR(ge),gf.clientHeight)+"px"}function a9(gl){var gj=gl.display;var gf=gj.lineDiv.offsetTop;for(var gg=0;gg<gj.view.length;gg++){var gm=gj.view[gg],gn;if(gm.hidden){continue}if(dI&&k<8){var gi=gm.node.offsetTop+gm.node.offsetHeight;gn=gi-gf;gf=gi}else{var gh=gm.node.getBoundingClientRect();gn=gh.bottom-gh.top}var gk=gm.line.height-gn;if(gn<2){gn=aX(gj)}if(gk>0.001||gk<-0.001){f2(gm.line,gn);ca(gm.line);if(gm.rest){for(var ge=0;ge<gm.rest.length;ge++){ca(gm.rest[ge])}}}}}function ca(ge){if(ge.widgets){for(var gf=0;gf<ge.widgets.length;++gf){ge.widgets[gf].height=ge.widgets[gf].node.offsetHeight}}}function fb(ge){var gj=ge.display,gh={},gg={};var gi=gj.gutters.clientLeft;for(var gk=gj.gutters.firstChild,gf=0;gk;gk=gk.nextSibling,++gf){gh[ge.options.gutters[gf]]=gk.offsetLeft+gk.clientLeft+gi;gg[ge.options.gutters[gf]]=gk.clientWidth}return{fixedPos:dV(gj),gutterTotalWidth:gj.gutters.offsetWidth,gutterLeft:gh,gutterWidth:gg,wrapperWidth:gj.wrapper.clientWidth}}function cl(gp,gg,go){var gl=gp.display,gr=gp.options.lineNumbers;var ge=gl.lineDiv,gq=ge.firstChild;function gk(gt){var gs=gt.nextSibling;if(cY&&b6&&gp.display.currentWheelTarget==gt){gt.style.display="none"}else{gt.parentNode.removeChild(gt)}return gs}var gm=gl.view,gj=gl.viewFrom;for(var gh=0;gh<gm.length;gh++){var gi=gm[gh];if(gi.hidden){}else{if(!gi.node||gi.node.parentNode!=ge){var gf=aE(gp,gi,gj,go);ge.insertBefore(gf,gq)}else{while(gq!=gi.node){gq=gk(gq)}var gn=gr&&gg!=null&&gg<=gj&&gi.lineNumber;if(gi.changes){if(df(gi.changes,"gutter")>-1){gn=false}ab(gp,gi,gj,go)}if(gn){dZ(gi.lineNumber);gi.lineNumber.appendChild(document.createTextNode(eq(gp.options,gj)))}gq=gi.node.nextSibling}}gj+=gi.size}while(gq){gq=gk(gq)}}function ab(ge,gg,gi,gj){for(var gf=0;gf<gg.changes.length;gf++){var gh=gg.changes[gf];if(gh=="text"){fj(ge,gg)}else{if(gh=="gutter"){dd(ge,gg,gi,gj)}else{if(gh=="class"){dE(gg)}else{if(gh=="widget"){an(ge,gg,gj)}}}}}gg.changes=null}function fG(ge){if(ge.node==ge.text){ge.node=fZ("div",null,null,"position: relative");if(ge.text.parentNode){ge.text.parentNode.replaceChild(ge.node,ge.text)}ge.node.appendChild(ge.text);if(dI&&k<8){ge.node.style.zIndex=2}}return ge.node}function et(gf){var ge=gf.bgClass?gf.bgClass+" "+(gf.line.bgClass||""):gf.line.bgClass;if(ge){ge+=" CodeMirror-linebackground"}if(gf.background){if(ge){gf.background.className=ge}else{gf.background.parentNode.removeChild(gf.background);gf.background=null}}else{if(ge){var gg=fG(gf);gf.background=gg.insertBefore(fZ("div",null,ge),gg.firstChild)}}}function dT(ge,gf){var gg=ge.display.externalMeasured;if(gg&&gg.line==gf.line){ge.display.externalMeasured=null;gf.measure=gg.measure;return gg.built}return eP(ge,gf)}function fj(ge,gh){var gf=gh.text.className;var gg=dT(ge,gh);if(gh.text==gh.node){gh.node=gg.pre}gh.text.parentNode.replaceChild(gg.pre,gh.text);gh.text=gg.pre;if(gg.bgClass!=gh.bgClass||gg.textClass!=gh.textClass){gh.bgClass=gg.bgClass;gh.textClass=gg.textClass;dE(gh)}else{if(gf){gh.text.className=gf}}}function dE(gf){et(gf);if(gf.line.wrapClass){fG(gf).className=gf.line.wrapClass}else{if(gf.node!=gf.text){gf.node.className=""}}var ge=gf.textClass?gf.textClass+" "+(gf.line.textClass||""):gf.line.textClass;gf.text.className=ge||""}function dd(gm,gk,gj,gl){if(gk.gutter){gk.node.removeChild(gk.gutter);gk.gutter=null}var gh=gk.line.gutterMarkers;if(gm.options.lineNumbers||gh){var gf=fG(gk);var gi=gk.gutter=fZ("div",null,"CodeMirror-gutter-wrapper","left: "+(gm.options.fixedGutter?gl.fixedPos:-gl.gutterTotalWidth)+"px; width: "+gl.gutterTotalWidth+"px");gm.display.input.setUneditable(gi);gf.insertBefore(gi,gk.text);if(gk.line.gutterClass){gi.className+=" "+gk.line.gutterClass}if(gm.options.lineNumbers&&(!gh||!gh["CodeMirror-linenumbers"])){gk.lineNumber=gi.appendChild(fZ("div",eq(gm.options,gj),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gl.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gm.display.lineNumInnerWidth+"px"))}if(gh){for(var gg=0;gg<gm.options.gutters.length;++gg){var ge=gm.options.gutters[gg],gn=gh.hasOwnProperty(ge)&&gh[ge];if(gn){gi.appendChild(fZ("div",[gn],"CodeMirror-gutter-elt","left: "+gl.gutterLeft[ge]+"px; width: "+gl.gutterWidth[ge]+"px"))}}}}}function an(ge,gf,gi){if(gf.alignable){gf.alignable=null}for(var gh=gf.node.firstChild,gg;gh;gh=gg){var gg=gh.nextSibling;if(gh.className=="CodeMirror-linewidget"){gf.node.removeChild(gh)}}fr(ge,gf,gi)}function aE(ge,gg,gh,gi){var gf=dT(ge,gg);gg.text=gg.node=gf.pre;if(gf.bgClass){gg.bgClass=gf.bgClass}if(gf.textClass){gg.textClass=gf.textClass}dE(gg);dd(ge,gg,gh,gi);fr(ge,gg,gi);return gg.node}function fr(ge,gg,gh){f4(ge,gg.line,gg,gh,true);if(gg.rest){for(var gf=0;gf<gg.rest.length;gf++){f4(ge,gg.rest[gf],gg,gh,false)}}}function f4(gm,gn,gj,gl,gh){if(!gn.widgets){return}var ge=fG(gj);for(var gg=0,gk=gn.widgets;gg<gk.length;++gg){var gi=gk[gg],gf=fZ("div",[gi.node],"CodeMirror-linewidget");if(!gi.handleMouseEvents){gf.setAttribute("cm-ignore-events","true")}bE(gi,gf,gj,gl);gm.display.input.setUneditable(gf);if(gh&&gi.above){ge.insertBefore(gf,gj.gutter||gj.text)}else{ge.appendChild(gf)}ae(gi,"redraw")}}function bE(gh,gg,ge,gi){if(gh.noHScroll){(ge.alignable||(ge.alignable=[])).push(gg);var gf=gi.wrapperWidth;gg.style.left=gi.fixedPos+"px";if(!gh.coverGutter){gf-=gi.gutterTotalWidth;gg.style.paddingLeft=gi.gutterTotalWidth+"px"}gg.style.width=gf+"px"}if(gh.coverGutter){gg.style.zIndex=5;gg.style.position="relative";if(!gh.noHScroll){gg.style.marginLeft=-gi.gutterTotalWidth+"px"}}}var W=H.Pos=function(ge,gf){if(!(this instanceof W)){return new W(ge,gf)}this.line=ge;this.ch=gf};var ce=H.cmpPos=function(gf,ge){return gf.line-ge.line||gf.ch-ge.ch};function ch(ge){return W(ge.line,ge.ch)}function bw(gf,ge){return ce(gf,ge)<0?ge:gf}function aq(gf,ge){return ce(gf,ge)<0?gf:ge}function r(ge){if(!ge.state.focused){ge.display.input.focus();cA(ge)}}function aj(ge){return ge.options.readOnly||ge.doc.cantEdit}var bl=null;function fW(gt,gj,gg,gf){var gs=gt.doc;gt.display.shift=false;if(!gf){gf=gs.sel}var gn=a0(gj),ge=null;if(gt.state.pasteIncoming&&gf.ranges.length>1){if(bl&&bl.join("\n")==gj){ge=gf.ranges.length%bl.length==0&&bR(bl,a0)}else{if(gn.length==gf.ranges.length){ge=bR(gn,function(gu){return[gu]})}}}for(var gk=gf.ranges.length-1;gk>=0;gk--){var gl=gf.ranges[gk];var gr=gl.from(),gq=gl.to();if(gl.empty()){if(gg&&gg>0){gr=W(gr.line,gr.ch-gg)}else{if(gt.state.overwrite&&!gt.state.pasteIncoming){gq=W(gq.line,Math.min(fd(gs,gq.line).text.length,gq.ch+fF(gn).length))}}}var go=gt.curOp.updateInput;var gp={from:gr,to:gq,text:ge?ge[gk%ge.length]:gn,origin:gt.state.pasteIncoming?"paste":gt.state.cutIncoming?"cut":"+input"};bf(gt.doc,gp);ae(gt,"inputRead",gt,gp);if(gj&&!gt.state.pasteIncoming&&gt.options.electricChars&&gt.options.smartIndent&&gl.head.ch<100&&(!gk||gf.ranges[gk-1].head.line!=gl.head.line)){var gm=gt.getModeAt(gl.head);var gh=cV(gp);if(gm.electricChars){for(var gi=0;gi<gm.electricChars.length;gi++){if(gj.indexOf(gm.electricChars.charAt(gi))>-1){ad(gt,gh.line,"smart");break}}}else{if(gm.electricInput){if(gm.electricInput.test(fd(gs,gh.line).text.slice(0,gh.ch))){ad(gt,gh.line,"smart")}}}}}fE(gt);gt.curOp.updateInput=go;gt.curOp.typing=true;gt.state.pasteIncoming=gt.state.cutIncoming=false}function dh(ge){var gj=[],gg=[];for(var gh=0;gh<ge.doc.sel.ranges.length;gh++){var gf=ge.doc.sel.ranges[gh].head.line;var gi={anchor:W(gf,0),head:W(gf+1,0)};gg.push(gi);gj.push(ge.getRange(gi.anchor,gi.head))}return{text:gj,ranges:gg}}function fO(ge){ge.setAttribute("autocorrect","off");ge.setAttribute("autocapitalize","off");ge.setAttribute("spellcheck","false")}function Y(ge){this.cm=ge;this.prevInput="";this.pollingFast=false;this.polling=new gd();this.inaccurateSelection=false;this.hasSelection=false}function aW(){var ge=fZ("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var gf=fZ("div",[ge],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(cY){ge.style.width="1000px"}else{ge.setAttribute("wrap","off")}if(eZ){ge.style.border="1px solid black"}fO(ge);return gf}Y.prototype=aM({init:function(gg){var gf=this,ge=this.cm;var gj=this.wrapper=aW();var gh=this.textarea=gj.firstChild;gg.wrapper.insertBefore(gj,gg.wrapper.firstChild);if(eZ){gh.style.width="0px"}bW(gh,"input",function(){if(dI&&k>=9&&gf.hasSelection){gf.hasSelection=null}gf.poll()});bW(gh,"paste",function(){if(cY&&!ge.state.fakedLastChar&&!(new Date-ge.state.lastMiddleDown<200)){var gl=gh.selectionStart,gk=gh.selectionEnd;gh.value+="$";gh.selectionEnd=gk;gh.selectionStart=gl;ge.state.fakedLastChar=true}ge.state.pasteIncoming=true;gf.fastPoll()});function gi(gl){if(ge.somethingSelected()){bl=ge.getSelections();if(gf.inaccurateSelection){gf.prevInput="";gf.inaccurateSelection=false;gh.value=bl.join("\n");dJ(gh)}}else{var gk=dh(ge);bl=gk.text;if(gl.type=="cut"){ge.setSelections(gk.ranges,null,Z)}else{gf.prevInput="";gh.value=gk.text.join("\n");dJ(gh)}}if(gl.type=="cut"){ge.state.cutIncoming=true}}bW(gh,"cut",gi);bW(gh,"copy",gi);bW(gg.scroller,"paste",function(gk){if(ba(gg,gk)){return}ge.state.pasteIncoming=true;gf.focus()});bW(gg.lineSpace,"selectstart",function(gk){if(!ba(gg,gk)){cE(gk)}})},prepareSelection:function(){var gf=this.cm,gj=gf.display,gi=gf.doc;var ge=fH(gf);if(gf.options.moveInputWithCursor){var gk=dS(gf,gi.sel.primary().head,"div");var gg=gj.wrapper.getBoundingClientRect(),gh=gj.lineDiv.getBoundingClientRect();ge.teTop=Math.max(0,Math.min(gj.wrapper.clientHeight-10,gk.top+gh.top-gg.top));ge.teLeft=Math.max(0,Math.min(gj.wrapper.clientWidth-10,gk.left+gh.left-gg.left))}return ge},showSelection:function(gg){var ge=this.cm,gf=ge.display;bQ(gf.cursorDiv,gg.cursors);bQ(gf.selectionDiv,gg.selection);if(gg.teTop!=null){this.wrapper.style.top=gg.teTop+"px";this.wrapper.style.left=gg.teLeft+"px"}},reset:function(gi){if(this.contextMenuPending){return}var gf,gh,ge=this.cm,gk=ge.doc;if(ge.somethingSelected()){this.prevInput="";var gg=gk.sel.primary();gf=c8&&(gg.to().line-gg.from().line>100||(gh=ge.getSelection()).length>1000);var gj=gf?"-":gh||ge.getSelection();this.textarea.value=gj;if(ge.state.focused){dJ(this.textarea)}if(dI&&k>=9){this.hasSelection=gj}}else{if(!gi){this.prevInput=this.textarea.value="";if(dI&&k>=9){this.hasSelection=null}}}this.inaccurateSelection=gf},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!ee||dM()!=this.textarea)){try{this.textarea.focus()}catch(ge){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var ge=this;if(ge.pollingFast){return}ge.polling.set(this.cm.options.pollInterval,function(){ge.poll();if(ge.cm.state.focused){ge.slowPoll()}})},fastPoll:function(){var gf=false,ge=this;ge.pollingFast=true;function gg(){var gh=ge.poll();if(!gh&&!gf){gf=true;ge.polling.set(60,gg)}else{ge.pollingFast=false;ge.slowPoll()}}ge.polling.set(20,gg)},poll:function(){var ge=this.cm,gh=this.textarea,gi=this.prevInput;if(!ge.state.focused||(br(gh)&&!gi)||aj(ge)||ge.options.disableInput||ge.state.keySeq){return false}if(ge.state.pasteIncoming&&ge.state.fakedLastChar){gh.value=gh.value.substring(0,gh.value.length-1);ge.state.fakedLastChar=false}var gj=gh.value;if(gj==gi&&!ge.somethingSelected()){return false}if(dI&&k>=9&&this.hasSelection===gj||b6&&/[\uf700-\uf7ff]/.test(gj)){ge.display.input.reset();return false}if(gj.charCodeAt(0)==8203&&ge.doc.sel==ge.display.selForContextMenu&&!gi){gi="\u200b"}var gk=0,gf=Math.min(gi.length,gj.length);while(gk<gf&&gi.charCodeAt(gk)==gj.charCodeAt(gk)){++gk}var gg=this;cK(ge,function(){fW(ge,gj.slice(gk),gi.length-gk);if(gj.length>1000||gj.indexOf("\n")>-1){gh.value=gg.prevInput=""}else{gg.prevInput=gj}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dI&&k>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gj){var go=this,gp=go.cm,gl=gp.display,gf=go.textarea;var gn=cm(gp,gj),ge=gl.scroller.scrollTop;if(!gn||d0){return}var gi=gp.options.resetSelectionOnContextMenu;if(gi&&gp.doc.sel.contains(gn)==-1){c0(gp,bT)(gp.doc,eQ(gn),Z)}var gk=gf.style.cssText;go.wrapper.style.position="absolute";gf.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(gj.clientY-5)+"px; left: "+(gj.clientX-5)+"px; z-index: 1000; background: "+(dI?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(cY){var gq=window.scrollY}gl.input.focus();if(cY){window.scrollTo(null,gq)}gl.input.reset();if(!gp.somethingSelected()){gf.value=go.prevInput=" "}go.contextMenuPending=true;gl.selForContextMenu=gp.doc.sel;clearTimeout(gl.detectingSelectAll);function gh(){if(gf.selectionStart!=null){var gr=gp.somethingSelected();var gs=gf.value="\u200b"+(gr?gf.value:"");go.prevInput=gr?"":"\u200b";gf.selectionStart=1;gf.selectionEnd=gs.length;gl.selForContextMenu=gp.doc.sel}}function gm(){go.contextMenuPending=false;go.wrapper.style.position="relative";gf.style.cssText=gk;if(dI&&k<9){gl.scrollbars.setScrollTop(gl.scroller.scrollTop=ge)}if(gf.selectionStart!=null){if(!dI||(dI&&k<9)){gh()}var gr=0,gs=function(){if(gl.selForContextMenu==gp.doc.sel&&gf.selectionStart==0){c0(gp,eB.selectAll)(gp)}else{if(gr++<10){gl.detectingSelectAll=setTimeout(gs,500)}else{gl.input.reset()}}};gl.detectingSelectAll=setTimeout(gs,200)}}if(dI&&k>=9){gh()}if(f6){ep(gj);var gg=function(){eb(window,"mouseup",gg);setTimeout(gm,20)};bW(window,"mouseup",gg)}else{setTimeout(gm,50)}},setUneditable:fT,needsContentAttribute:false},Y.prototype);function dt(ge){this.cm=ge;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gd()}dt.prototype=aM({init:function(gh){var gg=this,ge=gg.cm;var gi=gg.div=gh.lineDiv;gi.contentEditable="true";fO(gi);bW(gi,"paste",function(gk){var gj=gk.clipboardData&&gk.clipboardData.getData("text/plain");if(gj){gk.preventDefault();ge.replaceSelection(gj,null,"paste")}});bW(gi,"compositionstart",function(gn){var gm=gn.data;gg.composing={sel:ge.doc.sel,data:gm,startData:gm};if(!gm){return}var gk=ge.doc.sel.primary();var gj=ge.getLine(gk.head.line);var gl=gj.indexOf(gm,Math.max(0,gk.head.ch-gm.length));if(gl>-1&&gl<=gk.head.ch){gg.composing.sel=eQ(W(gk.head.line,gl),W(gk.head.line,gl+gm.length))}});bW(gi,"compositionupdate",function(gj){gg.composing.data=gj.data});bW(gi,"compositionend",function(gk){var gj=gg.composing;if(!gj){return}if(gk.data!=gj.startData&&!/\u200b/.test(gk.data)){gj.data=gk.data}setTimeout(function(){if(!gj.handled){gg.applyComposition(gj)}if(gg.composing==gj){gg.composing=null}},50)});bW(gi,"touchstart",function(){gg.forceCompositionEnd()});bW(gi,"input",function(){if(gg.composing){return}if(!gg.pollContent()){cK(gg.cm,function(){ah(ge)})}});function gf(gm){if(ge.somethingSelected()){bl=ge.getSelections();if(gm.type=="cut"){ge.replaceSelection("",null,"cut")}}else{var gk=dh(ge);bl=gk.text;if(gm.type=="cut"){ge.operation(function(){ge.setSelections(gk.ranges,0,Z);ge.replaceSelection("",null,"cut")})}}if(gm.clipboardData&&!eZ){gm.preventDefault();gm.clipboardData.clearData();gm.clipboardData.setData("text/plain",bl.join("\n"))}else{var gl=aW(),gn=gl.firstChild;ge.display.lineSpace.insertBefore(gl,ge.display.lineSpace.firstChild);gn.value=bl.join("\n");var gj=document.activeElement;dJ(gn);setTimeout(function(){ge.display.lineSpace.removeChild(gl);gj.focus()},50)}}bW(gi,"copy",gf);bW(gi,"cut",gf)},prepareSelection:function(){var ge=fH(this.cm,false);ge.focus=this.cm.state.focused;return ge},showSelection:function(ge){if(!ge||!this.cm.display.view.length){return}if(ge.focus){this.showPrimarySelection()}this.showMultipleSelections(ge)},showPrimarySelection:function(){var gi=window.getSelection(),gl=this.cm.doc.sel.primary();var gj=ay(this.cm,gi.anchorNode,gi.anchorOffset);var gn=ay(this.cm,gi.focusNode,gi.focusOffset);if(gj&&!gj.bad&&gn&&!gn.bad&&ce(aq(gj,gn),gl.from())==0&&ce(bw(gj,gn),gl.to())==0){return}var gh=cy(this.cm,gl.from());var gm=cy(this.cm,gl.to());if(!gh&&!gm){return}var gp=this.cm.display.view;var gk=gi.rangeCount&&gi.getRangeAt(0);if(!gh){gh={node:gp[0].measure.map[2],offset:0}}else{if(!gm){var gg=gp[gp.length-1].measure;var gf=gg.maps?gg.maps[gg.maps.length-1]:gg.map;gm={node:gf[gf.length-1],offset:gf[gf.length-2]-gf[gf.length-3]}}}try{var ge=ck(gh.node,gh.offset,gm.offset,gm.node)}catch(go){}if(ge){gi.removeAllRanges();gi.addRange(ge);if(gk&&gi.anchorNode==null){gi.addRange(gk)}}this.rememberSelection()},showMultipleSelections:function(ge){bQ(this.cm.display.cursorDiv,ge.cursors);bQ(this.cm.display.selectionDiv,ge.selection)},rememberSelection:function(){var ge=window.getSelection();this.lastAnchorNode=ge.anchorNode;this.lastAnchorOffset=ge.anchorOffset;this.lastFocusNode=ge.focusNode;this.lastFocusOffset=ge.focusOffset},selectionInEditor:function(){var gf=window.getSelection();if(!gf.rangeCount){return false}var ge=gf.getRangeAt(0).commonAncestorContainer;return f7(this.div,ge)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var ge=this;if(this.selectionInEditor()){this.pollSelection()}else{cK(this.cm,function(){ge.cm.curOp.selectionChanged=true})}function gf(){if(ge.cm.state.focused){ge.pollSelection();ge.polling.set(ge.cm.options.pollInterval,gf)}}this.polling.set(this.cm.options.pollInterval,gf)},pollSelection:function(){if(this.composing){return}var gh=window.getSelection(),ge=this.cm;if(gh.anchorNode!=this.lastAnchorNode||gh.anchorOffset!=this.lastAnchorOffset||gh.focusNode!=this.lastFocusNode||gh.focusOffset!=this.lastFocusOffset){this.rememberSelection();var gf=ay(ge,gh.anchorNode,gh.anchorOffset);var gg=ay(ge,gh.focusNode,gh.focusOffset);if(gf&&gg){cK(ge,function(){bT(ge.doc,eQ(gf,gg),Z);if(gf.bad||gg.bad){ge.curOp.selectionChanged=true}})}}},pollContent:function(){var go=this.cm,gy=go.display,gw=go.doc.sel.primary();var gx=gw.from(),gi=gw.to();if(gx.line<gy.viewFrom||gi.line>gy.viewTo-1){return false}var gl;if(gx.line==gy.viewFrom||(gl=dp(go,gx.line))==0){var gj=bM(gy.view[0].line);var gn=gy.view[0].node}else{var gj=bM(gy.view[gl].line);var gn=gy.view[gl-1].node.nextSibling}var gv=dp(go,gi.line);if(gv==gy.view.length-1){var gq=gy.viewTo-1;var gt=gy.view[gv].node}else{var gq=bM(gy.view[gv+1].line)-1;var gt=gy.view[gv+1].node.previousSibling}var gz=a0(fX(go,gn,gt,gj,gq));var gs=f1(go.doc,W(gj,0),W(gq,fd(go.doc,gq).text.length));while(gz.length>1&&gs.length>1){if(fF(gz)==fF(gs)){gz.pop();gs.pop();gq--}else{if(gz[0]==gs[0]){gz.shift();gs.shift();gj++}else{break}}}var gu=0,gg=0;var gp=gz[0],gf=gs[0],ge=Math.min(gp.length,gf.length);while(gu<ge&&gp.charCodeAt(gu)==gf.charCodeAt(gu)){++gu}var gm=fF(gz),gA=fF(gs);var gh=Math.min(gm.length-(gz.length==1?gu:0),gA.length-(gs.length==1?gu:0));while(gg<gh&&gm.charCodeAt(gm.length-gg-1)==gA.charCodeAt(gA.length-gg-1)){++gg}gz[gz.length-1]=gm.slice(0,gm.length-gg);gz[0]=gz[0].slice(gu);var gk=W(gj,gu);var gr=W(gq,gs.length?fF(gs).length-gg:0);if(gz.length>1||gz[0]||ce(gk,gr)){a1(go.doc,gz,gk,gr,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(ge){if(ge.data&&ge.data!=ge.startData){c0(this.cm,fW)(this.cm,ge.data,0,ge.sel)}},setUneditable:function(ge){ge.setAttribute("contenteditable","false")},onKeyPress:function(ge){ge.preventDefault();c0(this.cm,fW)(this.cm,String.fromCharCode(ge.charCode==null?ge.keyCode:ge.charCode),0)},onContextMenu:fT,resetPosition:fT,needsContentAttribute:true},dt.prototype);function cy(gk,gi){var gj=e9(gk,gi.line);if(!gj||gj.hidden){return null}var gm=fd(gk.doc,gi.line);var gf=cs(gj,gm,gi.line);var gg=a(gm),gh="left";if(gg){var ge=aF(gg,gi.ch);gh=ge%2?"right":"left"}var gl=aK(gf.map,gi.ch,"left");gl.offset=gl.collapse=="right"?gl.end:gl.start;return gl}function er(gf,ge){if(ge){gf.bad=true}return gf}function ay(ge,gh,gj){var gi;if(gh==ge.display.lineDiv){gi=ge.display.lineDiv.childNodes[gj];if(!gi){return er(ge.clipPos(W(ge.display.viewTo-1)),true)}gh=null;gj=0}else{for(gi=gh;;gi=gi.parentNode){if(!gi||gi==ge.display.lineDiv){return null}if(gi.parentNode&&gi.parentNode==ge.display.lineDiv){break}}}for(var gg=0;gg<ge.display.view.length;gg++){var gf=ge.display.view[gg];if(gf.node==gi){return aa(gf,gh,gj)}}}function aa(gm,gi,gk){var gg=gm.text.firstChild,gh=false;if(!gi||!f7(gg,gi)){return er(W(bM(gm.line),0),true)}if(gi==gg){gh=true;gi=gg.childNodes[gk];gk=0;if(!gi){var gs=gm.rest?fF(gm.rest):gm.line;return er(W(bM(gs),gs.text.length),gh)}}var gj=gi.nodeType==3?gi:null,gq=gi;if(!gj&&gi.childNodes.length==1&&gi.firstChild.nodeType==3){gj=gi.firstChild;if(gk){gk=gj.nodeValue.length}}while(gq.parentNode!=gg){gq=gq.parentNode}var gf=gm.measure,go=gf.maps;function gl(gv,gA,gx){for(var gz=-1;gz<(go?go.length:0);gz++){var gu=gz<0?gf.map:go[gz];for(var gy=0;gy<gu.length;gy+=3){var gw=gu[gy+2];if(gw==gv||gw==gA){var gB=bM(gz<0?gm.line:gm.rest[gz]);var gt=gu[gy]+gx;if(gx<0||gw!=gv){gt=gu[gy+(gx?1:0)]}return W(gB,gt)}}}}var gr=gl(gj,gq,gk);if(gr){return er(gr,gh)}for(var ge=gq.nextSibling,gn=gj?gj.nodeValue.length-gk:0;ge;ge=ge.nextSibling){gr=gl(ge,ge.firstChild,0);if(gr){return er(W(gr.line,gr.ch-gn),gh)}else{gn+=ge.textContent.length}}for(var gp=gq.previousSibling,gn=gk;gp;gp=gp.previousSibling){gr=gl(gp,gp.firstChild,-1);if(gr){return er(W(gr.line,gr.ch+gn),gh)}else{gn+=ge.textContent.length}}}function fX(gl,gj,gk,gg,ge){var gm="",gf=false;function gh(gn){return function(go){return go.id==gn}}function gi(gr){if(gr.nodeType==1){var go=gr.getAttribute("cm-text");if(go!=null){if(go==""){go=gr.textContent.replace(/\u200b/g,"")}gm+=go;return}var gq=gr.getAttribute("cm-marker"),gn;if(gq){var gs=gl.findMarks(W(gg,0),W(ge+1,0),gh(+gq));if(gs.length&&(gn=gs[0].find())){gm+=f1(gl.doc,gn.from,gn.to).join("\n")}return}if(gr.getAttribute("contenteditable")=="false"){return}for(var gp=0;gp<gr.childNodes.length;gp++){gi(gr.childNodes[gp])}if(/^(pre|div|p)$/i.test(gr.nodeName)){gf=true}}else{if(gr.nodeType==3){var gt=gr.nodeValue;if(!gt){return}if(gf){gm+="\n";gf=false}gm+=gt}}}for(;;){gi(gj);if(gj==gk){break}gj=gj.nextSibling}return gm}H.inputStyles={textarea:Y,contenteditable:dt};function f0(ge,gf){this.ranges=ge;this.primIndex=gf}f0.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(ge){if(ge==this){return true}if(ge.primIndex!=this.primIndex||ge.ranges.length!=this.ranges.length){return false}for(var gg=0;gg<this.ranges.length;gg++){var gf=this.ranges[gg],gh=ge.ranges[gg];if(ce(gf.anchor,gh.anchor)!=0||ce(gf.head,gh.head)!=0){return false}}return true},deepCopy:function(){for(var ge=[],gf=0;gf<this.ranges.length;gf++){ge[gf]=new dW(ch(this.ranges[gf].anchor),ch(this.ranges[gf].head))}return new f0(ge,this.primIndex)},somethingSelected:function(){for(var ge=0;ge<this.ranges.length;ge++){if(!this.ranges[ge].empty()){return true}}return false},contains:function(gh,ge){if(!ge){ge=gh}for(var gg=0;gg<this.ranges.length;gg++){var gf=this.ranges[gg];if(ce(ge,gf.from())>=0&&ce(gh,gf.to())<=0){return gg}}return -1}};function dW(ge,gf){this.anchor=ge;this.head=gf}dW.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bw(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cv(ge,gl){var gg=ge[gl];ge.sort(function(go,gn){return ce(go.from(),gn.from())});gl=df(ge,gg);for(var gi=1;gi<ge.length;gi++){var gm=ge[gi],gf=ge[gi-1];if(ce(gf.to(),gm.from())>=0){var gj=aq(gf.from(),gm.from()),gk=bw(gf.to(),gm.to());var gh=gf.empty()?gm.from()==gm.head:gf.from()==gf.head;if(gi<=gl){--gl}ge.splice(--gi,2,new dW(gh?gk:gj,gh?gj:gk))}}return new f0(ge,gl)}function eQ(ge,gf){return new f0([new dW(ge,gf||ge)],0)}function c3(ge,gf){return Math.max(ge.first,Math.min(gf,ge.first+ge.size-1))}function fI(gf,gg){if(gg.line<gf.first){return W(gf.first,0)}var ge=gf.first+gf.size-1;if(gg.line>ge){return W(ge,fd(gf,ge).text.length)}return fq(gg,fd(gf,gg.line).text.length)}function fq(gg,gf){var ge=gg.ch;if(ge==null||ge>gf){return W(gg.line,gf)}else{if(ge<0){return W(gg.line,0)}else{return gg}}}function b8(gf,ge){return ge>=gf.first&&ge<gf.first+gf.size}function dY(gg,gh){for(var ge=[],gf=0;gf<gh.length;gf++){ge[gf]=fI(gg,gh[gf])}return ge}function ft(gj,gf,gi,ge){if(gj.cm&&gj.cm.display.shift||gj.extend){var gh=gf.anchor;if(ge){var gg=ce(gi,gh)<0;if(gg!=(ce(ge,gh)<0)){gh=gi;gi=ge}else{if(gg!=(ce(gi,ge)<0)){gi=ge}}}return new dW(gh,gi)}else{return new dW(ge||gi,gi)}}function fU(gh,gg,ge,gf){bT(gh,new f0([ft(gh,gh.sel.primary(),gg,ge)],0),gf)}function av(gj,gi,gg){for(var gf=[],gh=0;gh<gj.sel.ranges.length;gh++){gf[gh]=ft(gj,gj.sel.ranges[gh],gi[gh],null)}var ge=cv(gf,gj.sel.primIndex);bT(gj,ge,gg)}function e(gi,gh,gf,gg){var ge=gi.sel.ranges.slice(0);ge[gh]=gf;bT(gi,cv(ge,gi.sel.primIndex),gg)}function F(gh,gf,gg,ge){bT(gh,eQ(gf,gg),ge)}function c(gg,ge){var gf={ranges:ge.ranges,update:function(gh){this.ranges=[];for(var gi=0;gi<gh.length;gi++){this.ranges[gi]=new dW(fI(gg,gh[gi].anchor),fI(gg,gh[gi].head))}}};aD(gg,"beforeSelectionChange",gg,gf);if(gg.cm){aD(gg.cm,"beforeSelectionChange",gg.cm,gf)}if(gf.ranges!=ge.ranges){return cv(gf.ranges,gf.ranges.length-1)}else{return ge}}function e5(gi,gh,gf){var ge=gi.history.done,gg=fF(ge);if(gg&&gg.ranges){ge[ge.length-1]=gh;en(gi,gh,gf)}else{bT(gi,gh,gf)}}function bT(gg,gf,ge){en(gg,gf,ge);f8(gg,gg.sel,gg.cm?gg.cm.curOp.id:NaN,ge)}function en(gh,gg,gf){if(fg(gh,"beforeSelectionChange")||gh.cm&&fg(gh.cm,"beforeSelectionChange")){gg=c(gh,gg)}var ge=gf&&gf.bias||(ce(gg.primary().head,gh.sel.primary().head)<0?-1:1);c7(gh,n(gh,gg,ge,true));if(!(gf&&gf.scroll===false)&&gh.cm){fE(gh.cm)}}function c7(gf,ge){if(ge.equals(gf.sel)){return}gf.sel=ge;if(gf.cm){gf.cm.curOp.updateInput=gf.cm.curOp.selectionChanged=true;V(gf.cm)}ae(gf,"cursorActivity",gf)}function ew(ge){c7(ge,n(ge,ge.sel,null,false),Z)}function n(gm,ge,gj,gk){var gg;for(var gh=0;gh<ge.ranges.length;gh++){var gi=ge.ranges[gh];var gl=bU(gm,gi.anchor,gj,gk);var gf=bU(gm,gi.head,gj,gk);if(gg||gl!=gi.anchor||gf!=gi.head){if(!gg){gg=ge.ranges.slice(0,gh)}gg[gh]=new dW(gl,gf)}}return gg?cv(gg,ge.primIndex):ge}function bU(gn,gm,gj,gk){var go=false,gg=gm;var gh=gj||1;gn.cantEdit=false;search:for(;;){var gp=fd(gn,gg.line);if(gp.markedSpans){for(var gi=0;gi<gp.markedSpans.length;++gi){var ge=gp.markedSpans[gi],gf=ge.marker;if((ge.from==null||(gf.inclusiveLeft?ge.from<=gg.ch:ge.from<gg.ch))&&(ge.to==null||(gf.inclusiveRight?ge.to>=gg.ch:ge.to>gg.ch))){if(gk){aD(gf,"beforeCursorEnter");if(gf.explicitlyCleared){if(!gp.markedSpans){break}else{--gi;continue}}}if(!gf.atomic){continue}var gl=gf.find(gh<0?-1:1);if(ce(gl,gg)==0){gl.ch+=gh;if(gl.ch<0){if(gl.line>gn.first){gl=fI(gn,W(gl.line-1))}else{gl=null}}else{if(gl.ch>gp.text.length){if(gl.line<gn.first+gn.size-1){gl=W(gl.line+1,0)}else{gl=null}}}if(!gl){if(go){if(!gk){return bU(gn,gm,gj,true)}gn.cantEdit=true;return W(gn.first,0)}go=true;gl=gm;gh=-gh}}gg=gl;continue search}}}return gg}}function bB(ge){ge.display.input.showSelection(ge.display.input.prepareSelection())}function fH(gl,ge){var gk=gl.doc,gm={};var gj=gm.cursors=document.createDocumentFragment();var gf=gm.selection=document.createDocumentFragment();for(var gh=0;gh<gk.sel.ranges.length;gh++){if(ge===false&&gh==gk.sel.primIndex){continue}var gi=gk.sel.ranges[gh];var gg=gi.empty();if(gg||gl.options.showCursorWhenSelecting){A(gl,gi,gj)}if(!gg){bC(gl,gi,gf)}}return gm}function A(ge,gh,gg){var gj=dS(ge,gh.head,"div",null,null,!ge.options.singleCursorHeightPerLine);var gi=gg.appendChild(fZ("div","\u00a0","CodeMirror-cursor"));gi.style.left=gj.left+"px";gi.style.top=gj.top+"px";gi.style.height=Math.max(0,gj.bottom-gj.top)*ge.options.cursorHeight+"px";if(gj.other){var gf=gg.appendChild(fZ("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gf.style.display="";gf.style.left=gj.other.left+"px";gf.style.top=gj.other.top+"px";gf.style.height=(gj.other.bottom-gj.other.top)*0.85+"px"}}function bC(gi,go,gj){var gr=gi.display,gv=gi.doc;var ge=document.createDocumentFragment();var gn=e3(gi.display),gh=gn.left;var gs=Math.max(gr.sizerWidth,dj(gi)-gr.sizer.offsetLeft)-gn.right;function gp(gz,gy,gx,gw){if(gy<0){gy=0}gy=Math.round(gy);gw=Math.round(gw);ge.appendChild(fZ("div",null,"CodeMirror-selected","position: absolute; left: "+gz+"px; top: "+gy+"px; width: "+(gx==null?gs-gz:gx)+"px; height: "+(gw-gy)+"px"))}function gf(gx,gz,gC){var gy=fd(gv,gx);var gA=gy.text.length;var gD,gw;function gB(gF,gE){return cH(gi,W(gx,gF),"div",gy,gE)}d2(a(gy),gz||0,gC==null?gA:gC,function(gL,gK,gE){var gH=gB(gL,"left"),gI,gJ,gG;if(gL==gK){gI=gH;gJ=gG=gH.left}else{gI=gB(gK-1,"right");if(gE=="rtl"){var gF=gH;gH=gI;gI=gF}gJ=gH.left;gG=gI.right}if(gz==null&&gL==0){gJ=gh}if(gI.top-gH.top>3){gp(gJ,gH.top,null,gH.bottom);gJ=gh;if(gH.bottom<gI.top){gp(gJ,gH.bottom,null,gI.top)}}if(gC==null&&gK==gA){gG=gs}if(!gD||gH.top<gD.top||gH.top==gD.top&&gH.left<gD.left){gD=gH}if(!gw||gI.bottom>gw.bottom||gI.bottom==gw.bottom&&gI.right>gw.right){gw=gI}if(gJ<gh+1){gJ=gh}gp(gJ,gI.top,gG-gJ,gI.bottom)});return{start:gD,end:gw}}var gu=go.from(),gt=go.to();if(gu.line==gt.line){gf(gu.line,gu.ch,gt.ch)}else{var gg=fd(gv,gu.line),gl=fd(gv,gt.line);var gk=y(gg)==y(gl);var gm=gf(gu.line,gu.ch,gk?gg.text.length+1:null).end;var gq=gf(gt.line,gk?0:null,gt.ch).start;if(gk){if(gm.top<gq.top-2){gp(gm.right,gm.top,null,gm.bottom);gp(gh,gq.top,gq.left,gq.bottom)}else{gp(gm.right,gm.top,gq.left-gm.right,gm.bottom)}}if(gm.bottom<gq.top){gp(gh,gm.bottom,null,gq.top)}}gj.appendChild(ge)}function o(ge){if(!ge.state.focused){return}var gg=ge.display;clearInterval(gg.blinker);var gf=true;gg.cursorDiv.style.visibility="";if(ge.options.cursorBlinkRate>0){gg.blinker=setInterval(function(){gg.cursorDiv.style.visibility=(gf=!gf)?"":"hidden"},ge.options.cursorBlinkRate)}else{if(ge.options.cursorBlinkRate<0){gg.cursorDiv.style.visibility="hidden"}}}function ed(ge,gf){if(ge.doc.mode.startState&&ge.doc.frontier<ge.display.viewTo){ge.state.highlight.set(gf,cu(cN,ge))}}function cN(ge){var gi=ge.doc;if(gi.frontier<gi.first){gi.frontier=gi.first}if(gi.frontier>=ge.display.viewTo){return}var gg=+new Date+ge.options.workTime;var gh=b2(gi.mode,dA(ge,gi.frontier));var gf=[];gi.iter(gi.frontier,Math.min(gi.first+gi.size,ge.display.viewTo+500),function(gj){if(gi.frontier>=ge.display.viewFrom){var gm=gj.styles;var go=fx(ge,gj,gh,true);gj.styles=go.styles;var gl=gj.styleClasses,gn=go.classes;if(gn){gj.styleClasses=gn}else{if(gl){gj.styleClasses=null}}var gp=!gm||gm.length!=gj.styles.length||gl!=gn&&(!gl||!gn||gl.bgClass!=gn.bgClass||gl.textClass!=gn.textClass);for(var gk=0;!gp&&gk<gm.length;++gk){gp=gm[gk]!=gj.styles[gk]}if(gp){gf.push(gi.frontier)}gj.stateAfter=b2(gi.mode,gh)}else{dv(ge,gj.text,gh);gj.stateAfter=gi.frontier%5==0?b2(gi.mode,gh):null}++gi.frontier;if(+new Date>gg){ed(ge,ge.options.workDelay);return true}});if(gf.length){cK(ge,function(){for(var gj=0;gj<gf.length;gj++){R(ge,gf[gj],"text")}})}}function cx(gk,ge,gh){var gf,gi,gj=gk.doc;var gg=gh?-1:ge-(gk.doc.mode.innerMode?1000:100);for(var gn=ge;gn>gg;--gn){if(gn<=gj.first){return gj.first}var gm=fd(gj,gn-1);if(gm.stateAfter&&(!gh||gn<=gj.frontier)){return gn}var gl=bS(gm.text,null,gk.options.tabSize);if(gi==null||gf>gl){gi=gn-1;gf=gl}}return gi}function dA(ge,gk,gf){var gi=ge.doc,gh=ge.display;if(!gi.mode.startState){return true}var gj=cx(ge,gk,gf),gg=gj>gi.first&&fd(gi,gj-1).stateAfter;if(!gg){gg=bZ(gi.mode)}else{gg=b2(gi.mode,gg)}gi.iter(gj,gk,function(gl){dv(ge,gl.text,gg);var gm=gj==gk-1||gj%5==0||gj>=gh.viewFrom&&gj<gh.viewTo;gl.stateAfter=gm?b2(gi.mode,gg):null;++gj});if(gf){gi.frontier=gj}return gg}function e6(ge){return ge.lineSpace.offsetTop}function bH(ge){return ge.mover.offsetHeight-ge.lineSpace.offsetHeight}function e3(gh){if(gh.cachedPaddingH){return gh.cachedPaddingH}var gg=bQ(gh.measure,fZ("pre","x"));var ge=window.getComputedStyle?window.getComputedStyle(gg):gg.currentStyle;var gf={left:parseInt(ge.paddingLeft),right:parseInt(ge.paddingRight)};if(!isNaN(gf.left)&&!isNaN(gf.right)){gh.cachedPaddingH=gf}return gf}function cR(ge){return dH-ge.display.nativeBarWidth}function dj(ge){return ge.display.scroller.clientWidth-cR(ge)-ge.display.barWidth}function cT(ge){return ge.display.scroller.clientHeight-cR(ge)-ge.display.barHeight}function cg(gl,gh,gk){var gg=gl.options.lineWrapping;var gi=gg&&dj(gl);if(!gh.measure.heights||gg&&gh.measure.width!=gi){var gj=gh.measure.heights=[];if(gg){gh.measure.width=gi;var gn=gh.text.firstChild.getClientRects();for(var ge=0;ge<gn.length-1;ge++){var gm=gn[ge],gf=gn[ge+1];if(Math.abs(gm.bottom-gf.bottom)>2){gj.push((gm.bottom+gf.top)/2-gk.top)}}}gj.push(gk.bottom-gk.top)}}function cs(gg,ge,gh){if(gg.line==ge){return{map:gg.measure.map,cache:gg.measure.cache}}for(var gf=0;gf<gg.rest.length;gf++){if(gg.rest[gf]==ge){return{map:gg.measure.maps[gf],cache:gg.measure.caches[gf]}}}for(var gf=0;gf<gg.rest.length;gf++){if(bM(gg.rest[gf])>gh){return{map:gg.measure.maps[gf],cache:gg.measure.caches[gf],before:true}}}}function cZ(ge,gg){gg=y(gg);var gi=bM(gg);var gf=ge.display.externalMeasured=new bu(ge.doc,gg,gi);gf.lineN=gi;var gh=gf.built=eP(ge,gf);gf.text=gh.pre;bQ(ge.display.lineMeasure,gh.pre);return gf}function ef(ge,gf,gh,gg){return C(ge,a4(ge,gf),gh,gg)}function e9(ge,gg){if(gg>=ge.display.viewFrom&&gg<ge.display.viewTo){return ge.display.view[dp(ge,gg)]}var gf=ge.display.externalMeasured;if(gf&&gg>=gf.lineN&&gg<gf.lineN+gf.size){return gf}}function a4(ge,gg){var gh=bM(gg);var gf=e9(ge,gh);if(gf&&!gf.text){gf=null}else{if(gf&&gf.changes){ab(ge,gf,gh,fb(ge))}}if(!gf){gf=cZ(ge,gg)}var gi=cs(gf,gg,gh);return{line:gg,view:gf,rect:null,map:gi.map,cache:gi.cache,before:gi.before,hasHeights:false}}function C(ge,gk,gi,gf,gh){if(gk.before){gi=-1}var gg=gi+(gf||""),gj;if(gk.cache.hasOwnProperty(gg)){gj=gk.cache[gg]}else{if(!gk.rect){gk.rect=gk.view.text.getBoundingClientRect()}if(!gk.hasHeights){cg(ge,gk.view,gk.rect);gk.hasHeights=true}gj=j(ge,gk,gi,gf);if(!gj.bogus){gk.cache[gg]=gj}}return{left:gj.left,right:gj.right,top:gh?gj.rtop:gj.top,bottom:gh?gj.rbottom:gj.bottom}}var ez={left:0,right:0,top:0,bottom:0};function aK(gf,ge,gl){var gh,gg,gj,gm;for(var gk=0;gk<gf.length;gk+=3){var gi=gf[gk],gn=gf[gk+1];if(ge<gi){gg=0;gj=1;gm="left"}else{if(ge<gn){gg=ge-gi;gj=gg+1}else{if(gk==gf.length-3||ge==gn&&gf[gk+3]>ge){gj=gn-gi;gg=gj-1;if(ge>=gn){gm="right"}}}}if(gg!=null){gh=gf[gk+2];if(gi==gn&&gl==(gh.insertLeft?"left":"right")){gm=gl}if(gl=="left"&&gg==0){while(gk&&gf[gk-2]==gf[gk-3]&&gf[gk-1].insertLeft){gh=gf[(gk-=3)+2];gm="left"}}if(gl=="right"&&gg==gn-gi){while(gk<gf.length-3&&gf[gk+3]==gf[gk+4]&&!gf[gk+5].insertLeft){gh=gf[(gk+=3)+2];gm="right"}}break}}return{node:gh,start:gg,end:gj,collapse:gm,coverStart:gi,coverEnd:gn}}function j(gl,gv,go,gj){var gm=aK(gv.map,go,gj);var gt=gm.node,gi=gm.start,gh=gm.end,ge=gm.collapse;var gf;if(gt.nodeType==3){for(var gu=0;gu<4;gu++){while(gi&&fn(gv.line.text.charAt(gm.coverStart+gi))){--gi}while(gm.coverStart+gh<gm.coverEnd&&fn(gv.line.text.charAt(gm.coverStart+gh))){++gh}if(dI&&k<9&&gi==0&&gh==gm.coverEnd-gm.coverStart){gf=gt.parentNode.getBoundingClientRect()}else{if(dI&&gl.options.lineWrapping){var gg=ck(gt,gi,gh).getClientRects();if(gg.length){gf=gg[gj=="right"?gg.length-1:0]}else{gf=ez}}else{gf=ck(gt,gi,gh).getBoundingClientRect()||ez}}if(gf.left||gf.right||gi==0){break}gh=gi;gi=gi-1;ge="right"}if(dI&&k<11){gf=eL(gl.display.measure,gf)}}else{if(gi>0){ge=gj="right"}var gg;if(gl.options.lineWrapping&&(gg=gt.getClientRects()).length>1){gf=gg[gj=="right"?gg.length-1:0]}else{gf=gt.getBoundingClientRect()}}if(dI&&k<9&&!gi&&(!gf||!gf.left&&!gf.right)){var gk=gt.parentNode.getClientRects()[0];if(gk){gf={left:gk.left,right:gk.left+dB(gl.display),top:gk.top,bottom:gk.bottom}}else{gf=ez}}var gr=gf.top-gv.rect.top,gp=gf.bottom-gv.rect.top;var gx=(gr+gp)/2;var gw=gv.view.measure.heights;for(var gu=0;gu<gw.length-1;gu++){if(gx<gw[gu]){break}}var gs=gu?gw[gu-1]:0,gq=gw[gu];var gn={left:(ge=="right"?gf.right:gf.left)-gv.rect.left,right:(ge=="left"?gf.left:gf.right)-gv.rect.left,top:gs,bottom:gq};if(!gf.left&&!gf.right){gn.bogus=true}if(!gl.options.singleCursorHeightPerLine){gn.rtop=gr;gn.rbottom=gp}return gn}function eL(gg,gh){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aJ(gg)){return gh}var gf=screen.logicalXDPI/screen.deviceXDPI;var ge=screen.logicalYDPI/screen.deviceYDPI;return{left:gh.left*gf,right:gh.right*gf,top:gh.top*ge,bottom:gh.bottom*ge}}function at(gf){if(gf.measure){gf.measure.cache={};gf.measure.heights=null;if(gf.rest){for(var ge=0;ge<gf.rest.length;ge++){gf.measure.caches[ge]={}}}}}function aN(ge){ge.display.externalMeasure=null;dZ(ge.display.lineMeasure);for(var gf=0;gf<ge.display.view.length;gf++){at(ge.display.view[gf])}}function ak(ge){aN(ge);ge.display.cachedCharWidth=ge.display.cachedTextHeight=ge.display.cachedPaddingH=null;if(!ge.options.lineWrapping){ge.display.maxLineChanged=true}ge.display.lineNumChars=null}function ct(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cr(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eO(gk,gh,gj,gf){if(gh.widgets){for(var gg=0;gg<gh.widgets.length;++gg){if(gh.widgets[gg].above){var gm=cW(gh.widgets[gg]);gj.top+=gm;gj.bottom+=gm}}}if(gf=="line"){return gj}if(!gf){gf="local"}var gi=bL(gh);if(gf=="local"){gi+=e6(gk.display)}else{gi-=gk.display.viewOffset}if(gf=="page"||gf=="window"){var ge=gk.display.lineSpace.getBoundingClientRect();gi+=ge.top+(gf=="window"?0:cr());var gl=ge.left+(gf=="window"?0:ct());gj.left+=gl;gj.right+=gl}gj.top+=gi;gj.bottom+=gi;return gj}function gb(gf,gi,gg){if(gg=="div"){return gi}var gk=gi.left,gj=gi.top;if(gg=="page"){gk-=ct();gj-=cr()}else{if(gg=="local"||!gg){var gh=gf.display.sizer.getBoundingClientRect();gk+=gh.left;gj+=gh.top}}var ge=gf.display.lineSpace.getBoundingClientRect();return{left:gk-ge.left,top:gj-ge.top}}function cH(ge,gi,gh,gg,gf){if(!gg){gg=fd(ge.doc,gi.line)}return eO(ge,gg,ef(ge,gg,gi.ch,gf),gh)}function dS(gn,gm,gg,gk,gp,gl){gk=gk||fd(gn.doc,gm.line);if(!gp){gp=a4(gn,gk)}function gi(gs,gr){var gq=C(gn,gp,gs,gr?"right":"left",gl);if(gr){gq.left=gq.right}else{gq.right=gq.left}return eO(gn,gk,gq,gg)}function go(gt,gq){var gr=gj[gq],gs=gr.level%2;if(gt==dw(gr)&&gq&&gr.level<gj[gq-1].level){gr=gj[--gq];gt=ga(gr)-(gr.level%2?0:1);gs=true}else{if(gt==ga(gr)&&gq<gj.length-1&&gr.level<gj[gq+1].level){gr=gj[++gq];gt=dw(gr)-gr.level%2;gs=false}}if(gs&&gt==gr.to&&gt>gr.from){return gi(gt-1)}return gi(gt,gs)}var gj=a(gk),ge=gm.ch;if(!gj){return gi(ge)}var gf=aF(gj,ge);var gh=go(ge,gf);if(e0!=null){gh.other=go(ge,e0)}return gh}function dF(ge,gi){var gh=0,gi=fI(ge.doc,gi);if(!ge.options.lineWrapping){gh=dB(ge.display)*gi.ch}var gf=fd(ge.doc,gi.line);var gg=bL(gf)+e6(ge.display);return{left:gh,right:gh,top:gg,bottom:gg+gf.height}}function fY(ge,gf,gg,gi){var gh=W(ge,gf);gh.xRel=gi;if(gg){gh.outside=true}return gh}function fN(gl,gi,gh){var gk=gl.doc;gh+=gl.display.viewOffset;if(gh<0){return fY(gk.first,0,true,-1)}var gg=bF(gk,gh),gm=gk.first+gk.size-1;if(gg>gm){return fY(gk.first+gk.size-1,fd(gk,gm).text.length,true,1)}if(gi<0){gi=0}var gf=fd(gk,gg);for(;;){var gn=cX(gl,gf,gg,gi,gh);var gj=eu(gf);var ge=gj&&gj.find(0,true);if(gj&&(gn.ch>ge.from.ch||gn.ch==ge.from.ch&&gn.xRel>0)){gg=bM(gf=ge.to.line)}else{return gn}}}function cX(go,gg,gr,gq,gp){var gn=gp-bL(gg);var gk=false,gx=2*go.display.wrapper.clientWidth;var gu=a4(go,gg);function gB(gD){var gE=dS(go,W(gr,gD),"line",gg,gu);gk=true;if(gn>gE.bottom){return gE.left-gx}else{if(gn<gE.top){return gE.left+gx}else{gk=false}}return gE.left}var gt=a(gg),gw=gg.text.length;var gy=cD(gg),gh=cQ(gg);var gv=gB(gy),ge=gk,gf=gB(gh),gj=gk;if(gq>gf){return fY(gr,gh,gj,1)}for(;;){if(gt?gh==gy||gh==u(gg,gy,1):gh-gy<=1){var gs=gq<gv||gq-gv<=gf-gq?gy:gh;var gA=gq-(gs==gy?gv:gf);while(fn(gg.text.charAt(gs))){++gs}var gm=fY(gr,gs,gs==gy?ge:gj,gA<-1?-1:gA>1?1:0);return gm}var gl=Math.ceil(gw/2),gC=gy+gl;if(gt){gC=gy;for(var gz=0;gz<gl;++gz){gC=u(gg,gC,1)}}var gi=gB(gC);if(gi>gq){gh=gC;gf=gi;if(gj=gk){gf+=1000}gw=gl}else{gy=gC;gv=gi;ge=gk;gw-=gl}}}var aG;function aX(gg){if(gg.cachedTextHeight!=null){return gg.cachedTextHeight}if(aG==null){aG=fZ("pre");for(var gf=0;gf<49;++gf){aG.appendChild(document.createTextNode("x"));aG.appendChild(fZ("br"))}aG.appendChild(document.createTextNode("x"))}bQ(gg.measure,aG);var ge=aG.offsetHeight/50;if(ge>3){gg.cachedTextHeight=ge}dZ(gg.measure);return ge||1}function dB(gi){if(gi.cachedCharWidth!=null){return gi.cachedCharWidth}var ge=fZ("span","xxxxxxxxxx");var gh=fZ("pre",[ge]);bQ(gi.measure,gh);var gg=ge.getBoundingClientRect(),gf=(gg.right-gg.left)/10;if(gf>2){gi.cachedCharWidth=gf}return gf||10}var bo=null;var d6=0;function cG(ge){ge.curOp={cm:ge,viewChanged:false,startHeight:ge.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++d6};if(bo){bo.ops.push(ge.curOp)}else{ge.curOp.ownsGroup=bo={ops:[ge.curOp],delayedCallbacks:[]}}}function cS(gh){var gg=gh.delayedCallbacks,gf=0;do{for(;gf<gg.length;gf++){gg[gf]()}for(var ge=0;ge<gh.ops.length;ge++){var gi=gh.ops[ge];if(gi.cursorActivityHandlers){while(gi.cursorActivityCalled<gi.cursorActivityHandlers.length){gi.cursorActivityHandlers[gi.cursorActivityCalled++](gi.cm)}}}}while(gf<gg.length)}function al(ge){var gh=ge.curOp,gg=gh.ownsGroup;if(!gg){return}try{cS(gg)}finally{bo=null;for(var gf=0;gf<gg.ops.length;gf++){gg.ops[gf].cm.curOp=null}cI(gg)}}function cI(gg){var gf=gg.ops;for(var ge=0;ge<gf.length;ge++){b4(gf[ge])}for(var ge=0;ge<gf.length;ge++){ap(gf[ge])}for(var ge=0;ge<gf.length;ge++){b1(gf[ge])}for(var ge=0;ge<gf.length;ge++){ao(gf[ge])}for(var ge=0;ge<gf.length;ge++){eY(gf[ge])}}function b4(gg){var ge=gg.cm,gf=ge.display;J(ge);if(gg.updateMaxLine){g(ge)}gg.mustUpdate=gg.viewChanged||gg.forceUpdate||gg.scrollTop!=null||gg.scrollToPos&&(gg.scrollToPos.from.line<gf.viewFrom||gg.scrollToPos.to.line>=gf.viewTo)||gf.maxLineChanged&&ge.options.lineWrapping;gg.update=gg.mustUpdate&&new aH(ge,gg.mustUpdate&&{top:gg.scrollTop,ensure:gg.scrollToPos},gg.forceUpdate)}function ap(ge){ge.updatedDisplay=ge.mustUpdate&&B(ge.cm,ge.update)}function b1(gg){var ge=gg.cm,gf=ge.display;if(gg.updatedDisplay){a9(ge)}gg.barMeasure=dy(ge);if(gf.maxLineChanged&&!ge.options.lineWrapping){gg.adjustWidthTo=ef(ge,gf.maxLine,gf.maxLine.text.length).left+3;ge.display.sizerWidth=gg.adjustWidthTo;gg.barMeasure.scrollWidth=Math.max(gf.scroller.clientWidth,gf.sizer.offsetLeft+gg.adjustWidthTo+cR(ge)+ge.display.barWidth);gg.maxScrollLeft=Math.max(0,gf.sizer.offsetLeft+gg.adjustWidthTo-dj(ge))}if(gg.updatedDisplay||gg.selectionChanged){gg.preparedSelection=gf.input.prepareSelection()}}function ao(gf){var ge=gf.cm;if(gf.adjustWidthTo!=null){ge.display.sizer.style.minWidth=gf.adjustWidthTo+"px";if(gf.maxScrollLeft<ge.doc.scrollLeft){bD(ge,Math.min(ge.display.scroller.scrollLeft,gf.maxScrollLeft),true)}ge.display.maxLineChanged=false}if(gf.preparedSelection){ge.display.input.showSelection(gf.preparedSelection)}if(gf.updatedDisplay){dx(ge,gf.barMeasure)}if(gf.updatedDisplay||gf.startHeight!=ge.doc.height){eW(ge,gf.barMeasure)}if(gf.selectionChanged){o(ge)}if(ge.state.focused&&gf.updateInput){ge.display.input.reset(gf.typing)}}function eY(gl){var ge=gl.cm,gj=ge.display,gi=ge.doc;if(gl.updatedDisplay){ci(ge,gl.update)}if(gj.wheelStartX!=null&&(gl.scrollTop!=null||gl.scrollLeft!=null||gl.scrollToPos)){gj.wheelStartX=gj.wheelStartY=null}if(gl.scrollTop!=null&&(gj.scroller.scrollTop!=gl.scrollTop||gl.forceScroll)){gi.scrollTop=Math.max(0,Math.min(gj.scroller.scrollHeight-gj.scroller.clientHeight,gl.scrollTop));gj.scrollbars.setScrollTop(gi.scrollTop);gj.scroller.scrollTop=gi.scrollTop}if(gl.scrollLeft!=null&&(gj.scroller.scrollLeft!=gl.scrollLeft||gl.forceScroll)){gi.scrollLeft=Math.max(0,Math.min(gj.scroller.scrollWidth-dj(ge),gl.scrollLeft));gj.scrollbars.setScrollLeft(gi.scrollLeft);gj.scroller.scrollLeft=gi.scrollLeft;eC(ge)}if(gl.scrollToPos){var gh=D(ge,fI(gi,gl.scrollToPos.from),fI(gi,gl.scrollToPos.to),gl.scrollToPos.margin);if(gl.scrollToPos.isCursor&&ge.state.focused){d4(ge,gh)}}var gg=gl.maybeHiddenMarkers,gk=gl.maybeUnhiddenMarkers;if(gg){for(var gf=0;gf<gg.length;++gf){if(!gg[gf].lines.length){aD(gg[gf],"hide")}}}if(gk){for(var gf=0;gf<gk.length;++gf){if(gk[gf].lines.length){aD(gk[gf],"unhide")}}}if(gj.wrapper.offsetHeight){gi.scrollTop=ge.display.scroller.scrollTop}if(gl.changeObjs){aD(ge,"changes",ge,gl.changeObjs)}if(gl.update){gl.update.finish()}}function cK(ge,gf){if(ge.curOp){return gf()}cG(ge);try{return gf()}finally{al(ge)}}function c0(ge,gf){return function(){if(ge.curOp){return gf.apply(ge,arguments)}cG(ge);try{return gf.apply(ge,arguments)}finally{al(ge)}}}function c6(ge){return function(){if(this.curOp){return ge.apply(this,arguments)}cG(this);try{return ge.apply(this,arguments)}finally{al(this)}}}function cC(ge){return function(){var gf=this.cm;if(!gf||gf.curOp){return ge.apply(this,arguments)}cG(gf);try{return ge.apply(this,arguments)}finally{al(gf)}}}function bu(gg,ge,gf){this.line=ge;this.rest=h(ge);this.size=this.rest?bM(fF(this.rest))-gf+1:1;this.node=this.text=null;this.hidden=fu(gg,ge)}function eT(ge,gk,gj){var gi=[],gg;for(var gh=gk;gh<gj;gh=gg){var gf=new bu(ge.doc,fd(ge.doc,gh),gh);gg=gh+gf.size;gi.push(gf)}return gi}function ah(gl,gj,gk,gm){if(gj==null){gj=gl.doc.first}if(gk==null){gk=gl.doc.first+gl.doc.size}if(!gm){gm=0}var gg=gl.display;if(gm&&gk<gg.viewTo&&(gg.updateLineNumbers==null||gg.updateLineNumbers>gj)){gg.updateLineNumbers=gj}gl.curOp.viewChanged=true;if(gj>=gg.viewTo){if(a7&&aV(gl.doc,gj)<gg.viewTo){ev(gl)}}else{if(gk<=gg.viewFrom){if(a7&&d1(gl.doc,gk+gm)>gg.viewFrom){ev(gl)}else{gg.viewFrom+=gm;gg.viewTo+=gm}}else{if(gj<=gg.viewFrom&&gk>=gg.viewTo){ev(gl)}else{if(gj<=gg.viewFrom){var gi=dc(gl,gk,gk+gm,1);if(gi){gg.view=gg.view.slice(gi.index);gg.viewFrom=gi.lineN;gg.viewTo+=gm}else{ev(gl)}}else{if(gk>=gg.viewTo){var gi=dc(gl,gj,gj,-1);if(gi){gg.view=gg.view.slice(0,gi.index);gg.viewTo=gi.lineN}else{ev(gl)}}else{var gh=dc(gl,gj,gj,-1);var gf=dc(gl,gk,gk+gm,1);if(gh&&gf){gg.view=gg.view.slice(0,gh.index).concat(eT(gl,gh.lineN,gf.lineN)).concat(gg.view.slice(gf.index));gg.viewTo+=gm}else{ev(gl)}}}}}}var ge=gg.externalMeasured;if(ge){if(gk<ge.lineN){ge.lineN+=gm}else{if(gj<ge.lineN+ge.size){gg.externalMeasured=null}}}}function R(gf,gg,gj){gf.curOp.viewChanged=true;var gk=gf.display,gi=gf.display.externalMeasured;if(gi&&gg>=gi.lineN&&gg<gi.lineN+gi.size){gk.externalMeasured=null}if(gg<gk.viewFrom||gg>=gk.viewTo){return}var gh=gk.view[dp(gf,gg)];if(gh.node==null){return}var ge=gh.changes||(gh.changes=[]);if(df(ge,gj)==-1){ge.push(gj)}}function ev(ge){ge.display.viewFrom=ge.display.viewTo=ge.doc.first;ge.display.view=[];ge.display.viewOffset=0}function dp(ge,gh){if(gh>=ge.display.viewTo){return null}gh-=ge.display.viewFrom;if(gh<0){return null}var gf=ge.display.view;for(var gg=0;gg<gf.length;gg++){gh-=gf[gg].size;if(gh<0){return gg}}}function dc(gm,gg,gi,gf){var gj=dp(gm,gg),gl,gk=gm.display.view;if(!a7||gi==gm.doc.first+gm.doc.size){return{index:gj,lineN:gi}}for(var gh=0,ge=gm.display.viewFrom;gh<gj;gh++){ge+=gk[gh].size}if(ge!=gg){if(gf>0){if(gj==gk.length-1){return null}gl=(ge+gk[gj].size)-gg;gj++}else{gl=ge-gg}gg+=gl;gi+=gl}while(aV(gm.doc,gi)!=gi){if(gj==(gf<0?0:gk.length-1)){return null}gi+=gf*gk[gj-(gf<0?1:0)].size;gj+=gf}return{index:gj,lineN:gi}}function cP(ge,gi,gh){var gg=ge.display,gf=gg.view;if(gf.length==0||gi>=gg.viewTo||gh<=gg.viewFrom){gg.view=eT(ge,gi,gh);gg.viewFrom=gi}else{if(gg.viewFrom>gi){gg.view=eT(ge,gi,gg.viewFrom).concat(gg.view)}else{if(gg.viewFrom<gi){gg.view=gg.view.slice(dp(ge,gi))}}gg.viewFrom=gi;if(gg.viewTo<gh){gg.view=gg.view.concat(eT(ge,gg.viewTo,gh))}else{if(gg.viewTo>gh){gg.view=gg.view.slice(0,dp(ge,gh))}}}gg.viewTo=gh}function c9(ge){var gf=ge.display.view,gi=0;for(var gh=0;gh<gf.length;gh++){var gg=gf[gh];if(!gg.hidden&&(!gg.node||gg.changes)){++gi}}return gi}function fP(gl){var gi=gl.display;bW(gi.scroller,"mousedown",c0(gl,es));if(dI&&k<11){bW(gi.scroller,"dblclick",c0(gl,function(go){if(aQ(gl,go)){return}var gp=cm(gl,go);if(!gp||l(gl,go)||ba(gl.display,go)){return}cE(go);var gn=gl.findWordAt(gp);fU(gl.doc,gn.anchor,gn.head)}))}else{bW(gi.scroller,"dblclick",function(gn){aQ(gl,gn)||cE(gn)})}if(!f6){bW(gi.scroller,"contextmenu",function(gn){ax(gl,gn)})}var gm,gf={end:0};function gh(){if(gi.activeTouch){gm=setTimeout(function(){gi.activeTouch=null},1000);gf=gi.activeTouch;gf.end=+new Date}}function gg(gn){if(gn.touches.length!=1){return false}var go=gn.touches[0];return go.radiusX<=1&&go.radiusY<=1}function ge(gq,gn){if(gn.left==null){return true}var gp=gn.left-gq.left,go=gn.top-gq.top;return gp*gp+go*go>20*20}bW(gi.scroller,"touchstart",function(go){if(!gg(go)){clearTimeout(gm);var gn=+new Date;gi.activeTouch={start:gn,moved:false,prev:gn-gf.end<=300?gf:null};if(go.touches.length==1){gi.activeTouch.left=go.touches[0].pageX;gi.activeTouch.top=go.touches[0].pageY}}});bW(gi.scroller,"touchmove",function(){if(gi.activeTouch){gi.activeTouch.moved=true}});bW(gi.scroller,"touchend",function(go){var gq=gi.activeTouch;if(gq&&!ba(gi,go)&&gq.left!=null&&!gq.moved&&new Date-gq.start<300){var gp=gl.coordsChar(gi.activeTouch,"page"),gn;if(!gq.prev||ge(gq,gq.prev)){gn=new dW(gp,gp)}else{if(!gq.prev.prev||ge(gq,gq.prev.prev)){gn=gl.findWordAt(gp)}else{gn=new dW(W(gp.line,0),fI(gl.doc,W(gp.line+1,0)))}}gl.setSelection(gn.anchor,gn.head);gl.focus();cE(go)}gh()});bW(gi.scroller,"touchcancel",gh);bW(gi.scroller,"scroll",function(){if(gi.scroller.clientHeight){N(gl,gi.scroller.scrollTop);bD(gl,gi.scroller.scrollLeft,true);aD(gl,"scroll",gl)}});bW(gi.scroller,"mousewheel",function(gn){b(gl,gn)});bW(gi.scroller,"DOMMouseScroll",function(gn){b(gl,gn)});bW(gi.wrapper,"scroll",function(){gi.wrapper.scrollTop=gi.wrapper.scrollLeft=0});function gk(gn){if(!aQ(gl,gn)){ep(gn)}}if(gl.options.dragDrop){bW(gi.scroller,"dragstart",function(gn){Q(gl,gn)});bW(gi.scroller,"dragenter",gk);bW(gi.scroller,"dragover",gk);bW(gi.scroller,"drop",c0(gl,bj))}var gj=gi.input.getField();bW(gj,"keyup",function(gn){bh.call(gl,gn)});bW(gj,"keydown",c0(gl,p));bW(gj,"keypress",c0(gl,cw));bW(gj,"focus",cu(cA,gl));bW(gj,"blur",cu(aU,gl))}function aS(ge){var gf=ge.display;if(gf.lastWrapHeight==gf.wrapper.clientHeight&&gf.lastWrapWidth==gf.wrapper.clientWidth){return}gf.cachedCharWidth=gf.cachedTextHeight=gf.cachedPaddingH=null;gf.scrollbarsClipped=false;ge.setSize()}function ba(gf,ge){for(var gg=L(ge);gg!=gf.wrapper;gg=gg.parentNode){if(!gg||(gg.nodeType==1&&gg.getAttribute("cm-ignore-events")=="true")||(gg.parentNode==gf.sizer&&gg!=gf.mover)){return true}}}function cm(gn,gi,gf,gg){var gj=gn.display;if(!gf&&L(gi).getAttribute("cm-not-content")=="true"){return null}var gm,gk,ge=gj.lineSpace.getBoundingClientRect();try{gm=gi.clientX-ge.left;gk=gi.clientY-ge.top}catch(gi){return null}var gl=fN(gn,gm,gk),go;if(gg&&gl.xRel==1&&(go=fd(gn.doc,gl.line).text).length==gl.ch){var gh=bS(go,go.length,gn.options.tabSize)-go.length;gl=W(gl.line,Math.max(0,Math.round((gm-e3(gn.display).left)/dB(gn.display))-gh))}return gl}function es(gg){var ge=this,gf=ge.display;if(gf.activeTouch&&gf.input.supportsTouch()||aQ(ge,gg)){return}gf.shift=gg.shiftKey;if(ba(gf,gg)){if(!cY){gf.scroller.draggable=false;setTimeout(function(){gf.scroller.draggable=true},100)}return}if(l(ge,gg)){return}var gh=cm(ge,gg);window.focus();switch(fM(gg)){case 1:if(gh){aw(ge,gg,gh)}else{if(L(gg)==gf.scroller){cE(gg)}}break;case 2:if(cY){ge.state.lastMiddleDown=+new Date}if(gh){fU(ge.doc,gh)}setTimeout(function(){gf.input.focus()},20);cE(gg);break;case 3:if(f6){ax(ge,gg)}break}}var dl,db;function aw(gf,gk,gl){if(dI){setTimeout(cu(r,gf),0)}else{r(gf)}var gg=+new Date,gi;if(db&&db.time>gg-400&&ce(db.pos,gl)==0){gi="triple"}else{if(dl&&dl.time>gg-400&&ce(dl.pos,gl)==0){gi="double";db={time:gg,pos:gl}}else{gi="single";dl={time:gg,pos:gl}}}var gj=gf.doc.sel,ge=b6?gk.metaKey:gk.ctrlKey,gh;if(gf.options.dragDrop&&eJ&&!aj(gf)&&gi=="single"&&(gh=gj.contains(gl))>-1&&!gj.ranges[gh].empty()){a3(gf,gk,gl,ge)}else{m(gf,gk,gl,gi,ge)}}function a3(gg,gi,gj,gf){var gh=gg.display;var ge=c0(gg,function(gk){if(cY){gh.scroller.draggable=false}gg.state.draggingText=false;eb(document,"mouseup",ge);eb(gh.scroller,"drop",ge);if(Math.abs(gi.clientX-gk.clientX)+Math.abs(gi.clientY-gk.clientY)<10){cE(gk);if(!gf){fU(gg.doc,gj)}gh.input.focus();if(dI&&k==9){setTimeout(function(){document.body.focus();gh.input.focus()},20)}}});if(cY){gh.scroller.draggable=true}gg.state.draggingText=ge;if(gh.scroller.dragDrop){gh.scroller.dragDrop()}bW(document,"mouseup",ge);bW(gh.scroller,"drop",ge)}function m(gi,gw,gh,gf,gk){var gt=gi.display,gy=gi.doc;cE(gw);var gg,gx,gj=gy.sel,ge=gj.ranges;if(gk&&!gw.shiftKey){gx=gy.sel.contains(gh);if(gx>-1){gg=ge[gx]}else{gg=new dW(gh,gh)}}else{gg=gy.sel.primary()}if(gw.altKey){gf="rect";if(!gk){gg=new dW(gh,gh)}gh=cm(gi,gw,true,true);gx=-1}else{if(gf=="double"){var gu=gi.findWordAt(gh);if(gi.display.shift||gy.extend){gg=ft(gy,gg,gu.anchor,gu.head)}else{gg=gu}}else{if(gf=="triple"){var gn=new dW(W(gh.line,0),fI(gy,W(gh.line+1,0)));if(gi.display.shift||gy.extend){gg=ft(gy,gg,gn.anchor,gn.head)}else{gg=gn}}else{gg=ft(gy,gg,gh)}}}if(!gk){gx=0;bT(gy,new f0([gg],0),M);gj=gy.sel}else{if(gx==-1){gx=ge.length;bT(gy,cv(ge.concat([gg]),gx),{scroll:false,origin:"*mouse"})}else{if(ge.length>1&&ge[gx].empty()&&gf=="single"){bT(gy,cv(ge.slice(0,gx).concat(ge.slice(gx+1)),0));gj=gy.sel}else{e(gy,gx,gg,M)}}}var gs=gh;function gr(gJ){if(ce(gs,gJ)==0){return}gs=gJ;if(gf=="rect"){var gA=[],gG=gi.options.tabSize;var gz=bS(fd(gy,gh.line).text,gh.ch,gG);var gM=bS(fd(gy,gJ.line).text,gJ.ch,gG);var gB=Math.min(gz,gM),gK=Math.max(gz,gM);for(var gN=Math.min(gh.line,gJ.line),gD=Math.min(gi.lastLine(),Math.max(gh.line,gJ.line));gN<=gD;gN++){var gL=fd(gy,gN).text,gC=eo(gL,gB,gG);if(gB==gK){gA.push(new dW(W(gN,gC),W(gN,gC)))}else{if(gL.length>gC){gA.push(new dW(W(gN,gC),W(gN,eo(gL,gK,gG))))}}}if(!gA.length){gA.push(new dW(gh,gh))}bT(gy,cv(gj.ranges.slice(0,gx).concat(gA),gx),{origin:"*mouse",scroll:false});gi.scrollIntoView(gJ)}else{var gH=gg;var gE=gH.anchor,gI=gJ;if(gf!="single"){if(gf=="double"){var gF=gi.findWordAt(gJ)}else{var gF=new dW(W(gJ.line,0),fI(gy,W(gJ.line+1,0)))}if(ce(gF.anchor,gE)>0){gI=gF.head;gE=aq(gH.from(),gF.anchor)}else{gI=gF.anchor;gE=bw(gH.to(),gF.head)}}var gA=gj.ranges.slice(0);gA[gx]=new dW(fI(gy,gE),gI);bT(gy,cv(gA,gx),M)}}var gp=gt.wrapper.getBoundingClientRect();var gl=0;function gv(gB){var gz=++gl;var gD=cm(gi,gB,true,gf=="rect");if(!gD){return}if(ce(gD,gs)!=0){r(gi);gr(gD);var gC=b5(gt,gy);if(gD.line>=gC.to||gD.line<gC.from){setTimeout(c0(gi,function(){if(gl==gz){gv(gB)}}),150)}}else{var gA=gB.clientY<gp.top?-20:gB.clientY>gp.bottom?20:0;if(gA){setTimeout(c0(gi,function(){if(gl!=gz){return}gt.scroller.scrollTop+=gA;gv(gB)}),50)}}}function go(gz){gl=Infinity;cE(gz);gt.input.focus();eb(document,"mousemove",gq);eb(document,"mouseup",gm);gy.history.lastSelOrigin=null}var gq=c0(gi,function(gz){if(!fM(gz)){go(gz)}else{gv(gz)}});var gm=c0(gi,go);bW(document,"mousemove",gq);bW(document,"mouseup",gm)}function gc(gp,gl,gn,go,gh){try{var gf=gl.clientX,ge=gl.clientY}catch(gl){return false}if(gf>=Math.floor(gp.display.gutters.getBoundingClientRect().right)){return false}if(go){cE(gl)}var gm=gp.display;var gk=gm.lineDiv.getBoundingClientRect();if(ge>gk.bottom||!fg(gp,gn)){return bK(gl)}ge-=gk.top-gm.viewOffset;for(var gi=0;gi<gp.options.gutters.length;++gi){var gj=gm.gutters.childNodes[gi];if(gj&&gj.getBoundingClientRect().right>=gf){var gq=bF(gp.doc,ge);var gg=gp.options.gutters[gi];gh(gp,gn,gp,gq,gg,gl);return bK(gl)}}}function l(ge,gf){return gc(ge,gf,"gutterClick",true,ae)}var ag=0;function bj(gk){var gm=this;if(aQ(gm,gk)||ba(gm.display,gk)){return}cE(gk);if(dI){ag=+new Date}var gl=cm(gm,gk,true),ge=gk.dataTransfer.files;if(!gl||aj(gm)){return}if(ge&&ge.length&&window.FileReader&&window.File){var gg=ge.length,gn=Array(gg),gf=0;var gi=function(gq,gp){var go=new FileReader;go.onload=c0(gm,function(){gn[gp]=go.result;if(++gf==gg){gl=fI(gm.doc,gl);var gr={from:gl,to:gl,text:a0(gn.join("\n")),origin:"paste"};bf(gm.doc,gr);e5(gm.doc,eQ(gl,cV(gr)))}});go.readAsText(gq)};for(var gj=0;gj<gg;++gj){gi(ge[gj],gj)}}else{if(gm.state.draggingText&&gm.doc.sel.contains(gl)>-1){gm.state.draggingText(gk);setTimeout(function(){gm.display.input.focus()},20);return}try{var gn=gk.dataTransfer.getData("Text");if(gn){if(gm.state.draggingText&&!(b6?gk.metaKey:gk.ctrlKey)){var gh=gm.listSelections()}en(gm.doc,eQ(gl,gl));if(gh){for(var gj=0;gj<gh.length;++gj){a1(gm.doc,"",gh[gj].anchor,gh[gj].head,"drag")}}gm.replaceSelection(gn,"around","paste");gm.display.input.focus()}}catch(gk){}}}function Q(ge,gg){if(dI&&(!ge.state.draggingText||+new Date-ag<100)){ep(gg);return}if(aQ(ge,gg)||ba(ge.display,gg)){return}gg.dataTransfer.setData("Text",ge.getSelection());if(gg.dataTransfer.setDragImage&&!aB){var gf=fZ("img",null,null,"position: fixed; left: 0; top: 0;");gf.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d0){gf.width=gf.height=1;ge.display.wrapper.appendChild(gf);gf._top=gf.offsetTop}gg.dataTransfer.setDragImage(gf,0,0);if(d0){gf.parentNode.removeChild(gf)}}}function N(ge,gf){if(Math.abs(ge.doc.scrollTop-gf)<2){return}ge.doc.scrollTop=gf;if(!cn){dR(ge,{top:gf})}if(ge.display.scroller.scrollTop!=gf){ge.display.scroller.scrollTop=gf}ge.display.scrollbars.setScrollTop(gf);if(cn){dR(ge)}ed(ge,100)}function bD(ge,gg,gf){if(gf?gg==ge.doc.scrollLeft:Math.abs(ge.doc.scrollLeft-gg)<2){return}gg=Math.min(gg,ge.display.scroller.scrollWidth-ge.display.scroller.clientWidth);ge.doc.scrollLeft=gg;eC(ge);if(ge.display.scroller.scrollLeft!=gg){ge.display.scroller.scrollLeft=gg}ge.display.scrollbars.setScrollLeft(gg)}var fk=0,cf=null;if(dI){cf=-0.53}else{if(cn){cf=15}else{if(da){cf=-0.7}else{if(aB){cf=-1/3}}}}var cO=function(gg){var gf=gg.wheelDeltaX,ge=gg.wheelDeltaY;if(gf==null&&gg.detail&&gg.axis==gg.HORIZONTAL_AXIS){gf=gg.detail}if(ge==null&&gg.detail&&gg.axis==gg.VERTICAL_AXIS){ge=gg.detail}else{if(ge==null){ge=gg.wheelDelta}}return{x:gf,y:ge}};H.wheelEventPixels=function(ge){var gf=cO(ge);gf.x*=cf;gf.y*=cf;return gf};function b(gm,gg){var gn=cO(gg),gq=gn.x,gp=gn.y;var gi=gm.display,gl=gi.scroller;if(!(gq&&gl.scrollWidth>gl.clientWidth||gp&&gl.scrollHeight>gl.clientHeight)){return}if(gp&&b6&&cY){outer:for(var go=gg.target,gk=gi.view;go!=gl;go=go.parentNode){for(var gf=0;gf<gk.length;gf++){if(gk[gf].node==go){gm.display.currentWheelTarget=go;break outer}}}}if(gq&&!cn&&!d0&&cf!=null){if(gp){N(gm,Math.max(0,Math.min(gl.scrollTop+gp*cf,gl.scrollHeight-gl.clientHeight)))}bD(gm,Math.max(0,Math.min(gl.scrollLeft+gq*cf,gl.scrollWidth-gl.clientWidth)));cE(gg);gi.wheelStartX=null;return}if(gp&&cf!=null){var ge=gp*cf;var gj=gm.doc.scrollTop,gh=gj+gi.wrapper.clientHeight;if(ge<0){gj=Math.max(0,gj+ge-50)}else{gh=Math.min(gm.doc.height,gh+ge+50)}dR(gm,{top:gj,bottom:gh})}if(fk<20){if(gi.wheelStartX==null){gi.wheelStartX=gl.scrollLeft;gi.wheelStartY=gl.scrollTop;gi.wheelDX=gq;gi.wheelDY=gp;setTimeout(function(){if(gi.wheelStartX==null){return}var gr=gl.scrollLeft-gi.wheelStartX;var gt=gl.scrollTop-gi.wheelStartY;var gs=(gt&&gi.wheelDY&&gt/gi.wheelDY)||(gr&&gi.wheelDX&&gr/gi.wheelDX);gi.wheelStartX=gi.wheelStartY=null;if(!gs){return}cf=(cf*fk+gs)/(fk+1);++fk},200)}else{gi.wheelDX+=gq;gi.wheelDY+=gp}}}function fQ(gf,gi,ge){if(typeof gi=="string"){gi=eB[gi];if(!gi){return false}}gf.display.input.ensurePolled();var gh=gf.display.shift,gg=false;try{if(aj(gf)){gf.state.suppressEdits=true}if(ge){gf.display.shift=false}gg=gi(gf)!=b9}finally{gf.display.shift=gh;gf.state.suppressEdits=false}return gg}function d8(gf,gg,gi){for(var gh=0;gh<gf.state.keyMaps.length;gh++){var ge=i(gg,gf.state.keyMaps[gh],gi,gf);if(ge){return ge}}return(gf.options.extraKeys&&i(gg,gf.options.extraKeys,gi,gf))||i(gg,gf.options.keyMap,gi,gf)}var dK=new gd;function bc(gf,gh,gj,gi){var gg=gf.state.keySeq;if(gg){if(eA(gh)){return"handled"}dK.set(50,function(){if(gf.state.keySeq==gg){gf.state.keySeq=null;gf.display.input.reset()}});gh=gg+" "+gh}var ge=d8(gf,gh,gi);if(ge=="multi"){gf.state.keySeq=gh}if(ge=="handled"){ae(gf,"keyHandled",gf,gh,gj)}if(ge=="handled"||ge=="multi"){cE(gj);o(gf)}if(gg&&!ge&&/\'$/.test(gh)){cE(gj);return true}return !!ge}function fh(ge,gg){var gf=fp(gg,true);if(!gf){return false}if(gg.shiftKey&&!ge.state.keySeq){return bc(ge,"Shift-"+gf,gg,function(gh){return fQ(ge,gh,true)})||bc(ge,gf,gg,function(gh){if(typeof gh=="string"?/^go[A-Z]/.test(gh):gh.motion){return fQ(ge,gh)}})}else{return bc(ge,gf,gg,function(gh){return fQ(ge,gh)})}}function eh(ge,gg,gf){return bc(ge,"'"+gf+"'",gg,function(gh){return fQ(ge,gh,true)})}var dk=null;function p(gh){var ge=this;r(ge);if(aQ(ge,gh)){return}if(dI&&k<11&&gh.keyCode==27){gh.returnValue=false}var gf=gh.keyCode;ge.display.shift=gf==16||gh.shiftKey;var gg=fh(ge,gh);if(d0){dk=gg?gf:null;if(!gg&&gf==88&&!c8&&(b6?gh.metaKey:gh.ctrlKey)){ge.replaceSelection("",null,"cut")}}if(gf==18&&!/\bCodeMirror-crosshair\b/.test(ge.display.lineDiv.className)){au(ge)}}function au(gf){var gg=gf.display.lineDiv;fy(gg,"CodeMirror-crosshair");function ge(gh){if(gh.keyCode==18||!gh.altKey){f(gg,"CodeMirror-crosshair");eb(document,"keyup",ge);eb(document,"mouseover",ge)}}bW(document,"keyup",ge);bW(document,"mouseover",ge)}function bh(ge){if(ge.keyCode==16){this.doc.sel.shift=false}aQ(this,ge)}function cw(gi){var ge=this;if(ba(ge.display,gi)||aQ(ge,gi)||gi.ctrlKey&&!gi.altKey||b6&&gi.metaKey){return}var gh=gi.keyCode,gf=gi.charCode;if(d0&&gh==dk){dk=null;cE(gi);return}if((d0&&(!gi.which||gi.which<10))&&fh(ge,gi)){return}var gg=String.fromCharCode(gf==null?gh:gf);if(eh(ge,gi,gg)){return}ge.display.input.onKeyPress(gi)}function cA(ge){if(ge.options.readOnly=="nocursor"){return}if(!ge.state.focused){aD(ge,"focus",ge);ge.state.focused=true;fy(ge.display.wrapper,"CodeMirror-focused");if(!ge.curOp&&ge.display.selForContextMenu!=ge.doc.sel){ge.display.input.reset();if(cY){setTimeout(function(){ge.display.input.reset(true)},20)}}ge.display.input.receivedFocus()}o(ge)}function aU(ge){if(ge.state.focused){aD(ge,"blur",ge);ge.state.focused=false;f(ge.display.wrapper,"CodeMirror-focused")}clearInterval(ge.display.blinker);setTimeout(function(){if(!ge.state.focused){ge.display.shift=false}},150)}function ax(ge,gf){if(ba(ge.display,gf)||de(ge,gf)){return}ge.display.input.onContextMenu(gf)}function de(ge,gf){if(!fg(ge,"gutterContextMenu")){return false}return gc(ge,gf,"gutterContextMenu",false,aD)}var cV=H.changeEnd=function(ge){if(!ge.text){return ge.to}return W(ge.from.line+ge.text.length-1,fF(ge.text).length+(ge.text.length==1?ge.from.ch:0))};function bY(gh,gg){if(ce(gh,gg.from)<0){return gh}if(ce(gh,gg.to)<=0){return cV(gg)}var ge=gh.line+gg.text.length-(gg.to.line-gg.from.line)-1,gf=gh.ch;if(gh.line==gg.to.line){gf+=cV(gg).ch-gg.to.ch}return W(ge,gf)}function fi(gh,gi){var gf=[];for(var gg=0;gg<gh.sel.ranges.length;gg++){var ge=gh.sel.ranges[gg];gf.push(new dW(bY(ge.anchor,gi),bY(ge.head,gi)))}return cv(gf,gh.sel.primIndex)}function bt(gg,gf,ge){if(gg.line==gf.line){return W(ge.line,gg.ch-gf.ch+ge.ch)}else{return W(ge.line+(gg.line-gf.line),gg.ch)}}function af(go,gl,gf){var gg=[];var ge=W(go.first,0),gp=ge;for(var gi=0;gi<gl.length;gi++){var gk=gl[gi];var gn=bt(gk.from,ge,gp);var gm=bt(cV(gk),ge,gp);ge=gk.to;gp=gm;if(gf=="around"){var gj=go.sel.ranges[gi],gh=ce(gj.head,gj.anchor)<0;gg[gi]=new dW(gh?gm:gn,gh?gn:gm)}else{gg[gi]=new dW(gn,gn)}}return new f0(gg,go.sel.primIndex)}function dP(gf,gh,gg){var ge={canceled:false,from:gh.from,to:gh.to,text:gh.text,origin:gh.origin,cancel:function(){this.canceled=true}};if(gg){ge.update=function(gl,gk,gj,gi){if(gl){this.from=fI(gf,gl)}if(gk){this.to=fI(gf,gk)}if(gj){this.text=gj}if(gi!==undefined){this.origin=gi}}}aD(gf,"beforeChange",gf,ge);if(gf.cm){aD(gf.cm,"beforeChange",gf.cm,ge)}if(ge.canceled){return null}return{from:ge.from,to:ge.to,text:ge.text,origin:ge.origin}}function bf(gh,gi,gg){if(gh.cm){if(!gh.cm.curOp){return c0(gh.cm,bf)(gh,gi,gg)}if(gh.cm.state.suppressEdits){return}}if(fg(gh,"beforeChange")||gh.cm&&fg(gh.cm,"beforeChange")){gi=dP(gh,gi,true);if(!gi){return}}var gf=f9&&!gg&&cF(gh,gi.from,gi.to);if(gf){for(var ge=gf.length-1;ge>=0;--ge){K(gh,{from:gf[ge].from,to:gf[ge].to,text:ge?[""]:gi.text})}}else{K(gh,gi)}}function K(gg,gh){if(gh.text.length==1&&gh.text[0]==""&&ce(gh.from,gh.to)==0){return}var gf=fi(gg,gh);fL(gg,gh,gf,gg.cm?gg.cm.curOp.id:NaN);ec(gg,gh,gf,ei(gg,gh));var ge=[];d5(gg,function(gj,gi){if(!gi&&df(ge,gj.history)==-1){dC(gj.history,gh);ge.push(gj.history)}ec(gj,gh,null,ei(gj,gh))})}function b7(gp,gn,gr){if(gp.cm&&gp.cm.state.suppressEdits){return}var gm=gp.history,gg,gi=gp.sel;var ge=gn=="undo"?gm.done:gm.undone,gq=gn=="undo"?gm.undone:gm.done;for(var gj=0;gj<ge.length;gj++){gg=ge[gj];if(gr?gg.ranges&&!gg.equals(gp.sel):!gg.ranges){break}}if(gj==ge.length){return}gm.lastOrigin=gm.lastSelOrigin=null;for(;;){gg=ge.pop();if(gg.ranges){cL(gg,gq);if(gr&&!gg.equals(gp.sel)){bT(gp,gg,{clearRedo:false});return}gi=gg}else{break}}var gl=[];cL(gi,gq);gq.push({changes:gl,generation:gm.generation});gm.generation=gg.generation||++gm.maxGeneration;var gh=fg(gp,"beforeChange")||gp.cm&&fg(gp.cm,"beforeChange");for(var gj=gg.changes.length-1;gj>=0;--gj){var go=gg.changes[gj];go.origin=gn;if(gh&&!dP(gp,go,false)){ge.length=0;return}gl.push(ds(gp,go));var gf=gj?fi(gp,go):fF(ge);ec(gp,go,gf,d7(gp,go));if(!gj&&gp.cm){gp.cm.scrollIntoView({from:go.from,to:cV(go)})}var gk=[];d5(gp,function(gt,gs){if(!gs&&df(gk,gt.history)==-1){dC(gt.history,go);gk.push(gt.history)}ec(gt,go,null,d7(gt,go))})}}function fl(gf,gh){if(gh==0){return}gf.first+=gh;gf.sel=new f0(bR(gf.sel.ranges,function(gi){return new dW(W(gi.anchor.line+gh,gi.anchor.ch),W(gi.head.line+gh,gi.head.ch))}),gf.sel.primIndex);if(gf.cm){ah(gf.cm,gf.first,gf.first-gh,gh);for(var gg=gf.cm.display,ge=gg.viewFrom;ge<gg.viewTo;ge++){R(gf.cm,ge,"gutter")}}}function ec(gi,gj,gh,gf){if(gi.cm&&!gi.cm.curOp){return c0(gi.cm,ec)(gi,gj,gh,gf)}if(gj.to.line<gi.first){fl(gi,gj.text.length-1-(gj.to.line-gj.from.line));return}if(gj.from.line>gi.lastLine()){return}if(gj.from.line<gi.first){var ge=gj.text.length-1-(gi.first-gj.from.line);fl(gi,ge);gj={from:W(gi.first,0),to:W(gj.to.line+ge,gj.to.ch),text:[fF(gj.text)],origin:gj.origin}}var gg=gi.lastLine();if(gj.to.line>gg){gj={from:gj.from,to:W(gg,fd(gi,gg).text.length),text:[gj.text[0]],origin:gj.origin}}gj.removed=f1(gi,gj.from,gj.to);if(!gh){gh=fi(gi,gj)}if(gi.cm){aI(gi.cm,gj,gf)}else{fw(gi,gj,gf)}en(gi,gh,Z)}function aI(gp,gl,gj){var go=gp.doc,gk=gp.display,gm=gl.from,gn=gl.to;var ge=false,gi=gm.line;if(!gp.options.lineWrapping){gi=bM(y(fd(go,gm.line)));go.iter(gi,gn.line+1,function(gr){if(gr==gk.maxLine){ge=true;return true}})}if(go.sel.contains(gl.from,gl.to)>-1){V(gp)}fw(go,gl,gj,bd(gp));if(!gp.options.lineWrapping){go.iter(gi,gm.line+gl.text.length,function(gs){var gr=el(gs);if(gr>gk.maxLineLength){gk.maxLine=gs;gk.maxLineLength=gr;gk.maxLineChanged=true;ge=false}});if(ge){gp.curOp.updateMaxLine=true}}go.frontier=Math.min(go.frontier,gm.line);ed(gp,400);var gq=gl.text.length-(gn.line-gm.line)-1;if(gl.full){ah(gp)}else{if(gm.line==gn.line&&gl.text.length==1&&!dQ(gp.doc,gl)){R(gp,gm.line,"text")}else{ah(gp,gm.line,gn.line+1,gq)}}var gg=fg(gp,"changes"),gh=fg(gp,"change");if(gh||gg){var gf={from:gm,to:gn,text:gl.text,removed:gl.removed,origin:gl.origin};if(gh){ae(gp,"change",gp,gf)}if(gg){(gp.curOp.changeObjs||(gp.curOp.changeObjs=[])).push(gf)}}gp.display.selForContextMenu=null}function a1(gh,gg,gj,gi,ge){if(!gi){gi=gj}if(ce(gi,gj)<0){var gf=gi;gi=gj;gj=gf}if(typeof gg=="string"){gg=a0(gg)}bf(gh,{from:gj,to:gi,text:gg,origin:ge})}function d4(gf,gi){if(aQ(gf,"scrollCursorIntoView")){return}var gj=gf.display,gg=gj.sizer.getBoundingClientRect(),ge=null;if(gi.top+gg.top<0){ge=true}else{if(gi.bottom+gg.top>(window.innerHeight||document.documentElement.clientHeight)){ge=false}}if(ge!=null&&!fs){var gh=fZ("div","\u200b",null,"position: absolute; top: "+(gi.top-gj.viewOffset-e6(gf.display))+"px; height: "+(gi.bottom-gi.top+cR(gf)+gj.barHeight)+"px; left: "+gi.left+"px; width: 2px;");gf.display.lineSpace.appendChild(gh);gh.scrollIntoView(ge);gf.display.lineSpace.removeChild(gh)}}function D(go,gm,gi,gh){if(gh==null){gh=0}for(var gj=0;gj<5;gj++){var gk=false,gn=dS(go,gm);var ge=!gi||gi==gm?gn:dS(go,gi);var gg=G(go,Math.min(gn.left,ge.left),Math.min(gn.top,ge.top)-gh,Math.max(gn.left,ge.left),Math.max(gn.bottom,ge.bottom)+gh);var gl=go.doc.scrollTop,gf=go.doc.scrollLeft;if(gg.scrollTop!=null){N(go,gg.scrollTop);if(Math.abs(go.doc.scrollTop-gl)>1){gk=true}}if(gg.scrollLeft!=null){bD(go,gg.scrollLeft);if(Math.abs(go.doc.scrollLeft-gf)>1){gk=true}}if(!gk){break}}return gn}function E(ge,gg,gi,gf,gh){var gj=G(ge,gg,gi,gf,gh);if(gj.scrollTop!=null){N(ge,gj.scrollTop)}if(gj.scrollLeft!=null){bD(ge,gj.scrollLeft)}}function G(gq,gh,gp,gf,go){var gm=gq.display,gk=aX(gq.display);if(gp<0){gp=0}var gi=gq.curOp&&gq.curOp.scrollTop!=null?gq.curOp.scrollTop:gm.scroller.scrollTop;var gs=cT(gq),gu={};if(go-gp>gs){go=gp+gs}var gg=gq.doc.height+bH(gm);var ge=gp<gk,gl=go>gg-gk;if(gp<gi){gu.scrollTop=ge?0:gp}else{if(go>gi+gs){var gn=Math.min(gp,(gl?gg:go)-gs);if(gn!=gi){gu.scrollTop=gn}}}var gt=gq.curOp&&gq.curOp.scrollLeft!=null?gq.curOp.scrollLeft:gm.scroller.scrollLeft;var gr=dj(gq)-(gq.options.fixedGutter?gm.gutters.offsetWidth:0);var gj=gf-gh>gr;if(gj){gf=gh+gr}if(gh<10){gu.scrollLeft=0}else{if(gh<gt){gu.scrollLeft=Math.max(0,gh-(gj?0:10))}else{if(gf>gr+gt-3){gu.scrollLeft=gf+(gj?0:10)-gr}}}return gu}function cJ(ge,gg,gf){if(gg!=null||gf!=null){fA(ge)}if(gg!=null){ge.curOp.scrollLeft=(ge.curOp.scrollLeft==null?ge.doc.scrollLeft:ge.curOp.scrollLeft)+gg}if(gf!=null){ge.curOp.scrollTop=(ge.curOp.scrollTop==null?ge.doc.scrollTop:ge.curOp.scrollTop)+gf}}function fE(ge){fA(ge);var gf=ge.getCursor(),gh=gf,gg=gf;if(!ge.options.lineWrapping){gh=gf.ch?W(gf.line,gf.ch-1):gf;gg=W(gf.line,gf.ch+1)}ge.curOp.scrollToPos={from:gh,to:gg,margin:ge.options.cursorScrollMargin,isCursor:true}}function fA(ge){var gg=ge.curOp.scrollToPos;if(gg){ge.curOp.scrollToPos=null;var gi=dF(ge,gg.from),gh=dF(ge,gg.to);var gf=G(ge,Math.min(gi.left,gh.left),Math.min(gi.top,gh.top)-gg.margin,Math.max(gi.right,gh.right),Math.max(gi.bottom,gh.bottom)+gg.margin);ge.scrollTo(gf.scrollLeft,gf.scrollTop)}}function ad(gr,gh,gq,gg){var gp=gr.doc,gf;if(gq==null){gq="add"}if(gq=="smart"){if(!gp.mode.indent){gq="prev"}else{gf=dA(gr,gh)}}var gl=gr.options.tabSize;var gs=fd(gp,gh),gk=bS(gs.text,null,gl);if(gs.stateAfter){gs.stateAfter=null}var ge=gs.text.match(/^\s*/)[0],gn;if(!gg&&!/\S/.test(gs.text)){gn=0;gq="not"}else{if(gq=="smart"){gn=gp.mode.indent(gf,gs.text.slice(ge.length),gs.text);if(gn==b9||gn>150){if(!gg){return}gq="prev"}}}if(gq=="prev"){if(gh>gp.first){gn=bS(fd(gp,gh-1).text,null,gl)}else{gn=0}}else{if(gq=="add"){gn=gk+gr.options.indentUnit}else{if(gq=="subtract"){gn=gk-gr.options.indentUnit}else{if(typeof gq=="number"){gn=gk+gq}}}}gn=Math.max(0,gn);var go="",gm=0;if(gr.options.indentWithTabs){for(var gi=Math.floor(gn/gl);gi;--gi){gm+=gl;go+="\t"}}if(gm<gn){go+=co(gn-gm)}if(go!=ge){a1(gp,go,W(gh,0),W(gh,ge.length),"+input")}else{for(var gi=0;gi<gp.sel.ranges.length;gi++){var gj=gp.sel.ranges[gi];if(gj.head.line==gh&&gj.head.ch<ge.length){var gm=W(gh,ge.length);e(gp,gi,new dW(gm,gm));break}}}gs.stateAfter=null}function ex(gh,gg,ge,gj){var gi=gg,gf=gg;if(typeof gg=="number"){gf=fd(gh,c3(gh,gg))}else{gi=bM(gg)}if(gi==null){return null}if(gj(gf,gi)&&gh.cm){R(gh.cm,gi,ge)}return gf}function eV(ge,gk){var gf=ge.doc.sel.ranges,gi=[];for(var gh=0;gh<gf.length;gh++){var gg=gk(gf[gh]);while(gi.length&&ce(gg.from,fF(gi).to)<=0){var gj=gi.pop();if(ce(gj.from,gg.from)<0){gg.from=gj.from;break}}gi.push(gg)}cK(ge,function(){for(var gl=gi.length-1;gl>=0;gl--){a1(ge.doc,"",gi[gl].from,gi[gl].to,"+delete")}fE(ge)})}function bv(gw,gi,gq,gp,gk){var gn=gi.line,go=gi.ch,gv=gq;var gf=fd(gw,gn);var gt=true;function gu(){var gx=gn+gq;if(gx<gw.first||gx>=gw.first+gw.size){return(gt=false)}gn=gx;return gf=fd(gw,gx)}function gs(gy){var gx=(gk?u:ai)(gf,go,gq,true);if(gx==null){if(!gy&&gu()){if(gk){go=(gq<0?cQ:cD)(gf)}else{go=gq<0?gf.text.length:0}}else{return(gt=false)}}else{go=gx}return true}if(gp=="char"){gs()}else{if(gp=="column"){gs(true)}else{if(gp=="word"||gp=="group"){var gr=null,gl=gp=="group";var ge=gw.cm&&gw.cm.getHelper(gi,"wordChars");for(var gj=true;;gj=false){if(gq<0&&!gs(!gj)){break}var gg=gf.text.charAt(go)||"\n";var gh=cz(gg,ge)?"w":gl&&gg=="\n"?"n":!gl||/\s/.test(gg)?null:"p";if(gl&&!gj&&!gh){gh="s"}if(gr&&gr!=gh){if(gq<0){gq=1;gs()}break}if(gh){gr=gh}if(gq>0&&!gs(!gj)){break}}}}}var gm=bU(gw,W(gn,go),gv,true);if(!gt){gm.hitSide=true}return gm}function bp(gm,gh,ge,gl){var gk=gm.doc,gj=gh.left,gi;if(gl=="page"){var gg=Math.min(gm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);gi=gh.top+ge*(gg-(ge<0?1.5:0.5)*aX(gm.display))}else{if(gl=="line"){gi=ge>0?gh.bottom+3:gh.top-3}}for(;;){var gf=fN(gm,gj,gi);if(!gf.outside){break}if(ge<0?gi<=0:gi>=gk.height){gf.hitSide=true;break}gi+=ge*5}return gf}H.prototype={constructor:H,focus:function(){window.focus();this.display.input.focus()},setOption:function(gg,gh){var gf=this.options,ge=gf[gg];if(gf[gg]==gh&&gg!="mode"){return}gf[gg]=gh;if(be.hasOwnProperty(gg)){c0(this,be[gg])(this,gh,ge)}},getOption:function(ge){return this.options[ge]},getDoc:function(){return this.doc},addKeyMap:function(gf,ge){this.state.keyMaps[ge?"push":"unshift"](fV(gf))},removeKeyMap:function(gf){var gg=this.state.keyMaps;for(var ge=0;ge<gg.length;++ge){if(gg[ge]==gf||gg[ge].name==gf){gg.splice(ge,1);return true}}},addOverlay:c6(function(ge,gf){var gg=ge.token?ge:H.getMode(this.options,ge);if(gg.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:gg,modeSpec:ge,opaque:gf&&gf.opaque});this.state.modeGen++;ah(this)}),removeOverlay:c6(function(ge){var gg=this.state.overlays;for(var gf=0;gf<gg.length;++gf){var gh=gg[gf].modeSpec;if(gh==ge||typeof ge=="string"&&gh.name==ge){gg.splice(gf,1);this.state.modeGen++;ah(this);return}}}),indentLine:c6(function(gg,ge,gf){if(typeof ge!="string"&&typeof ge!="number"){if(ge==null){ge=this.options.smartIndent?"smart":"prev"}else{ge=ge?"add":"subtract"}}if(b8(this.doc,gg)){ad(this,gg,ge,gf)}}),indentSelection:c6(function(gn){var ge=this.doc.sel.ranges,gh=-1;for(var gj=0;gj<ge.length;gj++){var gk=ge[gj];if(!gk.empty()){var gl=gk.from(),gm=gk.to();var gf=Math.max(gh,gl.line);gh=Math.min(this.lastLine(),gm.line-(gm.ch?0:1))+1;for(var gi=gf;gi<gh;++gi){ad(this,gi,gn)}var gg=this.doc.sel.ranges;if(gl.ch==0&&ge.length==gg.length&&gg[gj].from().ch>0){e(this.doc,gj,new dW(gl,gg[gj].to()),Z)}}else{if(gk.head.line>gh){ad(this,gk.head.line,gn,true);gh=gk.head.line;if(gj==this.doc.sel.primIndex){fE(this)}}}}}),getTokenAt:function(gf,ge){return cp(this,gf,ge)},getLineTokens:function(gf,ge){return cp(this,W(gf),ge,true)},getTokenTypeAt:function(gl){gl=fI(this.doc,gl);var gh=c4(this,fd(this.doc,gl.line));var gj=0,gk=(gh.length-1)/2,gg=gl.ch;var gf;if(gg==0){gf=gh[2]}else{for(;;){var ge=(gj+gk)>>1;if((ge?gh[ge*2-1]:0)>=gg){gk=ge}else{if(gh[ge*2+1]<gg){gj=ge+1}else{gf=gh[ge*2+2];break}}}}var gi=gf?gf.indexOf("cm-overlay "):-1;return gi<0?gf:gi==0?null:gf.slice(0,gi-1)},getModeAt:function(gf){var ge=this.doc.mode;if(!ge.innerMode){return ge}return H.innerMode(ge,this.getTokenAt(gf).state).mode},getHelper:function(gf,ge){return this.getHelpers(gf,ge)[0]},getHelpers:function(gl,gg){var gh=[];if(!fm.hasOwnProperty(gg)){return fm}var ge=fm[gg],gk=this.getModeAt(gl);if(typeof gk[gg]=="string"){if(ge[gk[gg]]){gh.push(ge[gk[gg]])}}else{if(gk[gg]){for(var gf=0;gf<gk[gg].length;gf++){var gj=ge[gk[gg][gf]];if(gj){gh.push(gj)}}}else{if(gk.helperType&&ge[gk.helperType]){gh.push(ge[gk.helperType])}else{if(ge[gk.name]){gh.push(ge[gk.name])}}}}for(var gf=0;gf<ge._global.length;gf++){var gi=ge._global[gf];if(gi.pred(gk,this)&&df(gh,gi.val)==-1){gh.push(gi.val)}}return gh},getStateAfter:function(gf,ge){var gg=this.doc;gf=c3(gg,gf==null?gg.first+gg.size-1:gf);return dA(this,gf+1,ge)},cursorCoords:function(gh,gf){var gg,ge=this.doc.sel.primary();if(gh==null){gg=ge.head}else{if(typeof gh=="object"){gg=fI(this.doc,gh)}else{gg=gh?ge.from():ge.to()}}return dS(this,gg,gf||"page")},charCoords:function(gf,ge){return cH(this,fI(this.doc,gf),ge||"page")},coordsChar:function(ge,gf){ge=gb(this,ge,gf||"page");return fN(this,ge.left,ge.top)},lineAtHeight:function(ge,gf){ge=gb(this,{top:ge,left:0},gf||"page").top;return bF(this.doc,ge+this.display.viewOffset)},heightAtLine:function(gf,gi){var ge=false,gh=this.doc.first+this.doc.size-1;if(gf<this.doc.first){gf=this.doc.first}else{if(gf>gh){gf=gh;ge=true}}var gg=fd(this.doc,gf);return eO(this,gg,{top:0,left:0},gi||"page").top+(ge?this.doc.height-bL(gg):0)},defaultTextHeight:function(){return aX(this.display)},defaultCharWidth:function(){return dB(this.display)},setGutterMarker:c6(function(ge,gf,gg){return ex(this.doc,ge,"gutter",function(gh){var gi=gh.gutterMarkers||(gh.gutterMarkers={});gi[gf]=gg;if(!gg&&eS(gi)){gh.gutterMarkers=null}return true})}),clearGutter:c6(function(gg){var ge=this,gh=ge.doc,gf=gh.first;gh.iter(function(gi){if(gi.gutterMarkers&&gi.gutterMarkers[gg]){gi.gutterMarkers[gg]=null;R(ge,gf,"gutter");if(eS(gi.gutterMarkers)){gi.gutterMarkers=null}}++gf})}),addLineWidget:c6(function(gg,gf,ge){return bG(this,gg,gf,ge)}),removeLineWidget:function(ge){ge.clear()},lineInfo:function(ge){if(typeof ge=="number"){if(!b8(this.doc,ge)){return null}var gf=ge;ge=fd(this.doc,ge);if(!ge){return null}}else{var gf=bM(ge);if(gf==null){return null}}return{line:gf,handle:ge,text:ge.text,gutterMarkers:ge.gutterMarkers,textClass:ge.textClass,bgClass:ge.bgClass,wrapClass:ge.wrapClass,widgets:ge.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gj,gg,gl,gh,gn){var gi=this.display;gj=dS(this,fI(this.doc,gj));var gk=gj.bottom,gf=gj.left;gg.style.position="absolute";gg.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gg);gi.sizer.appendChild(gg);if(gh=="over"){gk=gj.top}else{if(gh=="above"||gh=="near"){var ge=Math.max(gi.wrapper.clientHeight,this.doc.height),gm=Math.max(gi.sizer.clientWidth,gi.lineSpace.clientWidth);if((gh=="above"||gj.bottom+gg.offsetHeight>ge)&&gj.top>gg.offsetHeight){gk=gj.top-gg.offsetHeight}else{if(gj.bottom+gg.offsetHeight<=ge){gk=gj.bottom}}if(gf+gg.offsetWidth>gm){gf=gm-gg.offsetWidth}}}gg.style.top=gk+"px";gg.style.left=gg.style.right="";if(gn=="right"){gf=gi.sizer.clientWidth-gg.offsetWidth;gg.style.right="0px"}else{if(gn=="left"){gf=0}else{if(gn=="middle"){gf=(gi.sizer.clientWidth-gg.offsetWidth)/2}}gg.style.left=gf+"px"}if(gl){E(this,gf,gk,gf+gg.offsetWidth,gk+gg.offsetHeight)}},triggerOnKeyDown:c6(p),triggerOnKeyPress:c6(cw),triggerOnKeyUp:bh,execCommand:function(ge){if(eB.hasOwnProperty(ge)){return eB[ge](this)}},findPosH:function(gk,gh,gi,gf){var ge=1;if(gh<0){ge=-1;gh=-gh}for(var gg=0,gj=fI(this.doc,gk);gg<gh;++gg){gj=bv(this.doc,gj,ge,gi,gf);if(gj.hitSide){break}}return gj},moveH:c6(function(gf,gg){var ge=this;ge.extendSelectionsBy(function(gh){if(ge.display.shift||ge.doc.extend||gh.empty()){return bv(ge.doc,gh.head,gf,gg,ge.options.rtlMoveVisually)}else{return gf<0?gh.from():gh.to()}},cU)}),deleteH:c6(function(ge,gf){var gg=this.doc.sel,gh=this.doc;if(gg.somethingSelected()){gh.replaceSelection("",null,"+delete")}else{eV(this,function(gj){var gi=bv(gh,gj.head,ge,gf,false);return ge<0?{from:gi,to:gj.head}:{from:gj.head,to:gi}})}}),findPosV:function(gj,gg,gk,gm){var ge=1,gi=gm;if(gg<0){ge=-1;gg=-gg}for(var gf=0,gl=fI(this.doc,gj);gf<gg;++gf){var gh=dS(this,gl,"div");if(gi==null){gi=gh.left}else{gh.left=gi}gl=bp(this,gh,ge,gk);if(gl.hitSide){break}}return gl},moveV:c6(function(gf,gh){var ge=this,gj=this.doc,gi=[];var gk=!ge.display.shift&&!gj.extend&&gj.sel.somethingSelected();gj.extendSelectionsBy(function(gl){if(gk){return gf<0?gl.from():gl.to()}var gn=dS(ge,gl.head,"div");if(gl.goalColumn!=null){gn.left=gl.goalColumn}gi.push(gn.left);var gm=bp(ge,gn,gf,gh);if(gh=="page"&&gl==gj.sel.primary()){cJ(ge,null,cH(ge,gm,"div").top-gn.top)}return gm},cU);if(gi.length){for(var gg=0;gg<gj.sel.ranges.length;gg++){gj.sel.ranges[gg].goalColumn=gi[gg]}}}),findWordAt:function(gl){var gj=this.doc,gh=fd(gj,gl.line).text;var gk=gl.ch,gg=gl.ch;if(gh){var gi=this.getHelper(gl,"wordChars");if((gl.xRel<0||gg==gh.length)&&gk){--gk}else{++gg}var gf=gh.charAt(gk);var ge=cz(gf,gi)?function(gm){return cz(gm,gi)}:/\s/.test(gf)?function(gm){return/\s/.test(gm)}:function(gm){return !/\s/.test(gm)&&!cz(gm)};while(gk>0&&ge(gh.charAt(gk-1))){--gk}while(gg<gh.length&&ge(gh.charAt(gg))){++gg}}return new dW(W(gl.line,gk),W(gl.line,gg))},toggleOverwrite:function(ge){if(ge!=null&&ge==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fy(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aD(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dM()},scrollTo:c6(function(ge,gf){if(ge!=null||gf!=null){fA(this)}if(ge!=null){this.curOp.scrollLeft=ge}if(gf!=null){this.curOp.scrollTop=gf}}),getScrollInfo:function(){var ge=this.display.scroller;return{left:ge.scrollLeft,top:ge.scrollTop,height:ge.scrollHeight-cR(this)-this.display.barHeight,width:ge.scrollWidth-cR(this)-this.display.barWidth,clientHeight:cT(this),clientWidth:dj(this)}},scrollIntoView:c6(function(gf,gg){if(gf==null){gf={from:this.doc.sel.primary().head,to:null};if(gg==null){gg=this.options.cursorScrollMargin}}else{if(typeof gf=="number"){gf={from:W(gf,0),to:null}}else{if(gf.from==null){gf={from:gf,to:null}}}}if(!gf.to){gf.to=gf.from}gf.margin=gg||0;if(gf.from.line!=null){fA(this);this.curOp.scrollToPos=gf}else{var ge=G(this,Math.min(gf.from.left,gf.to.left),Math.min(gf.from.top,gf.to.top)-gf.margin,Math.max(gf.from.right,gf.to.right),Math.max(gf.from.bottom,gf.to.bottom)+gf.margin);this.scrollTo(ge.scrollLeft,ge.scrollTop)}}),setSize:c6(function(gh,gf){var ge=this;function gg(gj){return typeof gj=="number"||/^\d+$/.test(String(gj))?gj+"px":gj}if(gh!=null){ge.display.wrapper.style.width=gg(gh)}if(gf!=null){ge.display.wrapper.style.height=gg(gf)}if(ge.options.lineWrapping){aN(this)}var gi=ge.display.viewFrom;ge.doc.iter(gi,ge.display.viewTo,function(gj){if(gj.widgets){for(var gk=0;gk<gj.widgets.length;gk++){if(gj.widgets[gk].noHScroll){R(ge,gi,"widget");break}}}++gi});ge.curOp.forceUpdate=true;aD(ge,"refresh",this)}),operation:function(ge){return cK(this,ge)},refresh:c6(function(){var ge=this.display.cachedTextHeight;ah(this);this.curOp.forceUpdate=true;ak(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);c2(this);if(ge==null||Math.abs(ge-aX(this.display))>0.5){X(this)}aD(this,"refresh",this)}),swapDoc:c6(function(gf){var ge=this.doc;ge.cm=null;d9(this,gf);ak(this);this.display.input.reset();this.scrollTo(gf.scrollLeft,gf.scrollTop);this.curOp.forceScroll=true;ae(this,"swapDoc",this,ge);return ge}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bx(H);var e1=H.defaults={};var be=H.optionHandlers={};function s(ge,gh,gg,gf){H.defaults[ge]=gh;if(gg){be[ge]=gf?function(gi,gk,gj){if(gj!=cb){gg(gi,gk,gj)}}:gg}}var cb=H.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(ge,gf){ge.setValue(gf)},true);s("mode",null,function(ge,gf){ge.doc.modeOption=gf;bq(ge)},true);s("indentUnit",2,bq,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(ge){ej(ge);ak(ge);ah(ge)},true);s("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(ge,gf){ge.options.specialChars=new RegExp(gf.source+(gf.test("\t")?"":"|\t"),"g");ge.refresh()},true);s("specialCharPlaceholder",fa,function(ge){ge.refresh()},true);s("electricChars",true);s("inputStyle",ee?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);s("rtlMoveVisually",!aO);s("wholeLineUpdateBefore",true);s("theme","default",function(ge){cM(ge);du(ge)},true);s("keyMap","default",function(ge,gi,gf){var gg=fV(gi);var gh=gf!=H.Init&&fV(gf);if(gh&&gh.detach){gh.detach(ge,gg)}if(gg.attach){gg.attach(ge,gh||null)}});s("extraKeys",null);s("lineWrapping",false,eE,true);s("gutters",[],function(ge){cd(ge.options);du(ge)},true);s("fixedGutter",true,function(ge,gf){ge.display.gutters.style.left=gf?dV(ge.display)+"px":"0";ge.refresh()},true);s("coverGutterNextToScrollbar",false,function(ge){eW(ge)},true);s("scrollbarStyle","native",function(ge){aC(ge);eW(ge);ge.display.scrollbars.setScrollTop(ge.doc.scrollTop);ge.display.scrollbars.setScrollLeft(ge.doc.scrollLeft)},true);s("lineNumbers",false,function(ge){cd(ge.options);du(ge)},true);s("firstLineNumber",1,du,true);s("lineNumberFormatter",function(ge){return ge},du,true);s("showCursorWhenSelecting",false,bB,true);s("resetSelectionOnContextMenu",true);s("readOnly",false,function(ge,gf){if(gf=="nocursor"){aU(ge);ge.display.input.blur();ge.display.disabled=true}else{ge.display.disabled=false;if(!gf){ge.display.input.reset()}}});s("disableInput",false,function(ge,gf){if(!gf){ge.display.input.reset()}},true);s("dragDrop",true);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1,bB,true);s("singleCursorHeightPerLine",true,bB,true);s("workTime",100);s("workDelay",100);s("flattenSpans",true,ej,true);s("addModeClass",false,ej,true);s("pollInterval",100);s("undoDepth",200,function(ge,gf){ge.doc.history.undoDepth=gf});s("historyEventDelay",1250);s("viewportMargin",10,function(ge){ge.refresh()},true);s("maxHighlightLength",10000,ej,true);s("moveInputWithCursor",true,function(ge,gf){if(!gf){ge.display.input.resetPosition()}});s("tabindex",null,function(ge,gf){ge.display.input.getField().tabIndex=gf||""});s("autofocus",null);var dq=H.modes={},aR=H.mimeModes={};H.defineMode=function(ge,gf){if(!H.defaults.mode&&ge!="null"){H.defaults.mode=ge}if(arguments.length>2){gf.dependencies=Array.prototype.slice.call(arguments,2)}dq[ge]=gf};H.defineMIME=function(gf,ge){aR[gf]=ge};H.resolveMode=function(ge){if(typeof ge=="string"&&aR.hasOwnProperty(ge)){ge=aR[ge]}else{if(ge&&typeof ge.name=="string"&&aR.hasOwnProperty(ge.name)){var gf=aR[ge.name];if(typeof gf=="string"){gf={name:gf}}ge=cj(gf,ge);ge.name=gf.name}else{if(typeof ge=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ge)){return H.resolveMode("application/xml")}}}if(typeof ge=="string"){return{name:ge}}else{return ge||{name:"null"}}};H.getMode=function(gf,ge){var ge=H.resolveMode(ge);var gh=dq[ge.name];if(!gh){return H.getMode(gf,"text/plain")}var gi=gh(gf,ge);if(dm.hasOwnProperty(ge.name)){var gg=dm[ge.name];for(var gj in gg){if(!gg.hasOwnProperty(gj)){continue}if(gi.hasOwnProperty(gj)){gi["_"+gj]=gi[gj]}gi[gj]=gg[gj]}}gi.name=ge.name;if(ge.helperType){gi.helperType=ge.helperType}if(ge.modeProps){for(var gj in ge.modeProps){gi[gj]=ge.modeProps[gj]}}return gi};H.defineMode("null",function(){return{token:function(ge){ge.skipToEnd()}}});H.defineMIME("text/plain","null");var dm=H.modeExtensions={};H.extendMode=function(gg,gf){var ge=dm.hasOwnProperty(gg)?dm[gg]:(dm[gg]={});aM(gf,ge)};H.defineExtension=function(ge,gf){H.prototype[ge]=gf};H.defineDocExtension=function(ge,gf){ar.prototype[ge]=gf};H.defineOption=s;var a8=[];H.defineInitHook=function(ge){a8.push(ge)};var fm=H.helpers={};H.registerHelper=function(gf,ge,gg){if(!fm.hasOwnProperty(gf)){fm[gf]=H[gf]={_global:[]}}fm[gf][ge]=gg};H.registerGlobalHelper=function(gg,gf,ge,gh){H.registerHelper(gg,gf,gh);fm[gg]._global.push({pred:ge,val:gh})};var b2=H.copyState=function(gh,ge){if(ge===true){return ge}if(gh.copyState){return gh.copyState(ge)}var gg={};for(var gi in ge){var gf=ge[gi];if(gf instanceof Array){gf=gf.concat([])}gg[gi]=gf}return gg};var bZ=H.startState=function(gg,gf,ge){return gg.startState?gg.startState(gf,ge):true};H.innerMode=function(gg,ge){while(gg.innerMode){var gf=gg.innerMode(ge);if(!gf||gf.mode==gg){break}ge=gf.state;gg=gf.mode}return gf||{mode:gg,state:ge}};var eB=H.commands={selectAll:function(ge){ge.setSelection(W(ge.firstLine(),0),W(ge.lastLine()),Z)},singleSelection:function(ge){ge.setSelection(ge.getCursor("anchor"),ge.getCursor("head"),Z)},killLine:function(ge){eV(ge,function(gg){if(gg.empty()){var gf=fd(ge.doc,gg.head.line).text.length;if(gg.head.ch==gf&&gg.head.line<ge.lastLine()){return{from:gg.head,to:W(gg.head.line+1,0)}}else{return{from:gg.head,to:W(gg.head.line,gf)}}}else{return{from:gg.from(),to:gg.to()}}})},deleteLine:function(ge){eV(ge,function(gf){return{from:W(gf.from().line,0),to:fI(ge.doc,W(gf.to().line+1,0))}})},delLineLeft:function(ge){eV(ge,function(gf){return{from:W(gf.from().line,0),to:gf.from()}})},delWrappedLineLeft:function(ge){eV(ge,function(gf){var gh=ge.charCoords(gf.head,"div").top+5;var gg=ge.coordsChar({left:0,top:gh},"div");return{from:gg,to:gf.from()}})},delWrappedLineRight:function(ge){eV(ge,function(gf){var gh=ge.charCoords(gf.head,"div").top+5;var gg=ge.coordsChar({left:ge.display.lineDiv.offsetWidth+100,top:gh},"div");return{from:gf.from(),to:gg}})},undo:function(ge){ge.undo()},redo:function(ge){ge.redo()},undoSelection:function(ge){ge.undoSelection()},redoSelection:function(ge){ge.redoSelection()},goDocStart:function(ge){ge.extendSelection(W(ge.firstLine(),0))},goDocEnd:function(ge){ge.extendSelection(W(ge.lastLine()))},goLineStart:function(ge){ge.extendSelectionsBy(function(gf){return bs(ge,gf.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(ge){ge.extendSelectionsBy(function(gf){return dG(ge,gf.head)},{origin:"+move",bias:1})},goLineEnd:function(ge){ge.extendSelectionsBy(function(gf){return dN(ge,gf.head.line)},{origin:"+move",bias:-1})},goLineRight:function(ge){ge.extendSelectionsBy(function(gf){var gg=ge.charCoords(gf.head,"div").top+5;return ge.coordsChar({left:ge.display.lineDiv.offsetWidth+100,top:gg},"div")},cU)},goLineLeft:function(ge){ge.extendSelectionsBy(function(gf){var gg=ge.charCoords(gf.head,"div").top+5;return ge.coordsChar({left:0,top:gg},"div")},cU)},goLineLeftSmart:function(ge){ge.extendSelectionsBy(function(gf){var gg=ge.charCoords(gf.head,"div").top+5;var gh=ge.coordsChar({left:0,top:gg},"div");if(gh.ch<ge.getLine(gh.line).search(/\S/)){return dG(ge,gf.head)}return gh},cU)},goLineUp:function(ge){ge.moveV(-1,"line")},goLineDown:function(ge){ge.moveV(1,"line")},goPageUp:function(ge){ge.moveV(-1,"page")},goPageDown:function(ge){ge.moveV(1,"page")},goCharLeft:function(ge){ge.moveH(-1,"char")},goCharRight:function(ge){ge.moveH(1,"char")},goColumnLeft:function(ge){ge.moveH(-1,"column")},goColumnRight:function(ge){ge.moveH(1,"column")},goWordLeft:function(ge){ge.moveH(-1,"word")},goGroupRight:function(ge){ge.moveH(1,"group")},goGroupLeft:function(ge){ge.moveH(-1,"group")},goWordRight:function(ge){ge.moveH(1,"word")},delCharBefore:function(ge){ge.deleteH(-1,"char")},delCharAfter:function(ge){ge.deleteH(1,"char")},delWordBefore:function(ge){ge.deleteH(-1,"word")},delWordAfter:function(ge){ge.deleteH(1,"word")},delGroupBefore:function(ge){ge.deleteH(-1,"group")},delGroupAfter:function(ge){ge.deleteH(1,"group")},indentAuto:function(ge){ge.indentSelection("smart")},indentMore:function(ge){ge.indentSelection("add")},indentLess:function(ge){ge.indentSelection("subtract")},insertTab:function(ge){ge.replaceSelection("\t")},insertSoftTab:function(ge){var gg=[],gf=ge.listSelections(),gj=ge.options.tabSize;for(var gi=0;gi<gf.length;gi++){var gk=gf[gi].from();var gh=bS(ge.getLine(gk.line),gk.ch,gj);gg.push(new Array(gj-gh%gj+1).join(" "))}ge.replaceSelections(gg)},defaultTab:function(ge){if(ge.somethingSelected()){ge.indentSelection("add")}else{ge.execCommand("insertTab")}},transposeChars:function(ge){cK(ge,function(){var gh=ge.listSelections(),gg=[];for(var gi=0;gi<gh.length;gi++){var gk=gh[gi].head,gf=fd(ge.doc,gk.line).text;if(gf){if(gk.ch==gf.length){gk=new W(gk.line,gk.ch-1)}if(gk.ch>0){gk=new W(gk.line,gk.ch+1);ge.replaceRange(gf.charAt(gk.ch-1)+gf.charAt(gk.ch-2),W(gk.line,gk.ch-2),gk,"+transpose")}else{if(gk.line>ge.doc.first){var gj=fd(ge.doc,gk.line-1).text;if(gj){ge.replaceRange(gf.charAt(0)+"\n"+gj.charAt(gj.length-1),W(gk.line-1,gj.length-1),W(gk.line,1),"+transpose")}}}}gg.push(new dW(gk,gk))}ge.setSelections(gg)})},newlineAndIndent:function(ge){cK(ge,function(){var gf=ge.listSelections().length;for(var gh=0;gh<gf;gh++){var gg=ge.listSelections()[gh];ge.replaceRange("\n",gg.anchor,gg.head,"+input");ge.indentLine(gg.from().line+1,null,true);fE(ge)}})},toggleOverwrite:function(ge){ge.toggleOverwrite()}};var e8=H.keyMap={};e8.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};e8.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};e8.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};e8.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};e8["default"]=b6?e8.macDefault:e8.pcDefault;function dr(gf){var gl=gf.split(/-(?!$)/),gf=gl[gl.length-1];var gk,gj,ge,gi;for(var gh=0;gh<gl.length-1;gh++){var gg=gl[gh];if(/^(cmd|meta|m)$/i.test(gg)){gi=true}else{if(/^a(lt)?$/i.test(gg)){gk=true}else{if(/^(c|ctrl|control)$/i.test(gg)){gj=true}else{if(/^s(hift)$/i.test(gg)){ge=true}else{throw new Error("Unrecognized modifier name: "+gg)}}}}}if(gk){gf="Alt-"+gf}if(gj){gf="Ctrl-"+gf}if(gi){gf="Cmd-"+gf}if(ge){gf="Shift-"+gf}return gf}H.normalizeKeyMap=function(gl){var gf={};for(var gk in gl){if(gl.hasOwnProperty(gk)){var gm=gl[gk];if(/^(name|fallthrough|(de|at)tach)$/.test(gk)){continue}if(gm=="..."){delete gl[gk];continue}var gn=bR(gk.split(" "),dr);for(var gj=0;gj<gn.length;gj++){var gh,gg;if(gj==gn.length-1){gg=gk;gh=gm}else{gg=gn.slice(0,gj+1).join(" ");gh="..."}var gi=gf[gg];if(!gi){gf[gg]=gh}else{if(gi!=gh){throw new Error("Inconsistent bindings for "+gg)}}}delete gl[gk]}}for(var ge in gf){gl[ge]=gf[ge]}return gl};var i=H.lookupKey=function(gh,gk,gj,gg){gk=fV(gk);var gi=gk.call?gk.call(gh,gg):gk[gh];if(gi===false){return"nothing"}if(gi==="..."){return"multi"}if(gi!=null&&gj(gi)){return"handled"}if(gk.fallthrough){if(Object.prototype.toString.call(gk.fallthrough)!="[object Array]"){return i(gh,gk.fallthrough,gj,gg)}for(var gf=0;gf<gk.fallthrough.length;gf++){var ge=i(gh,gk.fallthrough[gf],gj,gg);if(ge){return ge}}}};var eA=H.isModifierKey=function(gf){var ge=typeof gf=="string"?gf:fe[gf.keyCode];return ge=="Ctrl"||ge=="Alt"||ge=="Shift"||ge=="Mod"};var fp=H.keyName=function(gf,gh){if(d0&&gf.keyCode==34&&gf["char"]){return false}var gg=fe[gf.keyCode],ge=gg;if(ge==null||gf.altGraphKey){return false}if(gf.altKey&&gg!="Alt"){ge="Alt-"+ge}if((bP?gf.metaKey:gf.ctrlKey)&&gg!="Ctrl"){ge="Ctrl-"+ge}if((bP?gf.ctrlKey:gf.metaKey)&&gg!="Cmd"){ge="Cmd-"+ge}if(!gh&&gf.shiftKey&&gg!="Shift"){ge="Shift-"+ge}return ge};function fV(ge){return typeof ge=="string"?e8[ge]:ge}H.fromTextArea=function(gl,gm){gm=gm?aM(gm):{};gm.value=gl.value;if(!gm.tabindex&&gl.tabIndex){gm.tabindex=gl.tabIndex}if(!gm.placeholder&&gl.placeholder){gm.placeholder=gl.placeholder}if(gm.autofocus==null){var ge=dM();gm.autofocus=ge==gl||gl.getAttribute("autofocus")!=null&&ge==document.body}function gi(){gl.value=gk.getValue()}if(gl.form){bW(gl.form,"submit",gi);if(!gm.leaveSubmitMethodAlone){var gf=gl.form,gj=gf.submit;try{var gh=gf.submit=function(){gi();gf.submit=gj;gf.submit();gf.submit=gh}}catch(gg){}}}gm.finishInit=function(gn){gn.save=gi;gn.getTextArea=function(){return gl};gn.toTextArea=function(){gn.toTextArea=isNaN;gi();gl.parentNode.removeChild(gn.getWrapperElement());gl.style.display="";if(gl.form){eb(gl.form,"submit",gi);if(typeof gl.form.submit=="function"){gl.form.submit=gj}}}};gl.style.display="none";var gk=H(function(gn){gl.parentNode.insertBefore(gn,gl.nextSibling)},gm);return gk};var eR=H.StringStream=function(ge,gf){this.pos=this.start=0;this.string=ge;this.tabSize=gf||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eR.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(ge){var gg=this.string.charAt(this.pos);if(typeof ge=="string"){var gf=gg==ge}else{var gf=gg&&(ge.test?ge.test(gg):ge(gg))}if(gf){++this.pos;return gg}},eatWhile:function(ge){var gf=this.pos;while(this.eat(ge)){}return this.pos>gf},eatSpace:function(){var ge=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>ge},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ge){var gf=this.string.indexOf(ge,this.pos);if(gf>-1){this.pos=gf;return true}},backUp:function(ge){this.pos-=ge},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bS(this.string,null,this.tabSize)-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},match:function(gi,gf,ge){if(typeof gi=="string"){var gj=function(gk){return ge?gk.toLowerCase():gk};var gh=this.string.substr(this.pos,gi.length);if(gj(gh)==gj(gi)){if(gf!==false){this.pos+=gi.length}return true}}else{var gg=this.string.slice(this.pos).match(gi);if(gg&&gg.index>0){return null}if(gg&&gf!==false){this.pos+=gg[0].length}return gg}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gf,ge){this.lineStart+=gf;try{return ge()}finally{this.lineStart-=gf}}};var a5=0;var P=H.TextMarker=function(gf,ge){this.lines=[];this.type=ge;this.doc=gf;this.id=++a5};bx(P);P.prototype.clear=function(){if(this.explicitlyCleared){return}var gl=this.doc.cm,gf=gl&&!gl.curOp;if(gf){cG(gl)}if(fg(this,"clear")){var gm=this.find();if(gm){ae(this,"clear",gm.from,gm.to)}}var gg=null,gj=null;for(var gh=0;gh<this.lines.length;++gh){var gn=this.lines[gh];var gk=e7(gn.markedSpans,this);if(gl&&!this.collapsed){R(gl,bM(gn),"text")}else{if(gl){if(gk.to!=null){gj=bM(gn)}if(gk.from!=null){gg=bM(gn)}}}gn.markedSpans=eF(gn.markedSpans,gk);if(gk.from==null&&this.collapsed&&!fu(this.doc,gn)&&gl){f2(gn,aX(gl.display))}}if(gl&&this.collapsed&&!gl.options.lineWrapping){for(var gh=0;gh<this.lines.length;++gh){var ge=y(this.lines[gh]),gi=el(ge);if(gi>gl.display.maxLineLength){gl.display.maxLine=ge;gl.display.maxLineLength=gi;gl.display.maxLineChanged=true}}}if(gg!=null&&gl&&this.collapsed){ah(gl,gg,gj+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gl){ew(gl.doc)}}if(gl){ae(gl,"markerCleared",gl,this)}if(gf){al(gl)}if(this.parent){this.parent.clear()}};P.prototype.find=function(gh,gf){if(gh==null&&this.type=="bookmark"){gh=1}var gk,gj;for(var gg=0;gg<this.lines.length;++gg){var ge=this.lines[gg];var gi=e7(ge.markedSpans,this);if(gi.from!=null){gk=W(gf?ge:bM(ge),gi.from);if(gh==-1){return gk}}if(gi.to!=null){gj=W(gf?ge:bM(ge),gi.to);if(gh==1){return gj}}}return gk&&{from:gk,to:gj}};P.prototype.changed=function(){var gg=this.find(-1,true),gf=this,ge=this.doc.cm;if(!gg||!ge){return}cK(ge,function(){var gi=gg.line,gj=bM(gg.line);var gh=e9(ge,gj);if(gh){at(gh);ge.curOp.selectionChanged=ge.curOp.forceUpdate=true}ge.curOp.updateMaxLine=true;if(!fu(gf.doc,gi)&&gf.height!=null){var gl=gf.height;gf.height=null;var gk=cW(gf)-gl;if(gk){f2(gi,gi.height+gk)}}})};P.prototype.attachLine=function(ge){if(!this.lines.length&&this.doc.cm){var gf=this.doc.cm.curOp;if(!gf.maybeHiddenMarkers||df(gf.maybeHiddenMarkers,this)==-1){(gf.maybeUnhiddenMarkers||(gf.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(ge)};P.prototype.detachLine=function(ge){this.lines.splice(df(this.lines,ge),1);if(!this.lines.length&&this.doc.cm){var gf=this.doc.cm.curOp;(gf.maybeHiddenMarkers||(gf.maybeHiddenMarkers=[])).push(this)}};var a5=0;function eD(gm,gk,gl,go,gi){if(go&&go.shared){return O(gm,gk,gl,go,gi)}if(gm.cm&&!gm.cm.curOp){return c0(gm.cm,eD)(gm,gk,gl,go,gi)}var gh=new P(gm,gi),gn=ce(gk,gl);if(go){aM(go,gh,false)}if(gn>0||gn==0&&gh.clearWhenEmpty!==false){return gh}if(gh.replacedWith){gh.collapsed=true;gh.widgetNode=fZ("span",[gh.replacedWith],"CodeMirror-widget");if(!go.handleMouseEvents){gh.widgetNode.setAttribute("cm-ignore-events","true")}if(go.insertLeft){gh.widgetNode.insertLeft=true}}if(gh.collapsed){if(z(gm,gk.line,gk,gl,gh)||gk.line!=gl.line&&z(gm,gl.line,gk,gl,gh)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a7=true}if(gh.addToHistory){fL(gm,{from:gk,to:gl,origin:"markText"},gm.sel,NaN)}var gf=gk.line,gj=gm.cm,ge;gm.iter(gf,gl.line+1,function(gp){if(gj&&gh.collapsed&&!gj.options.lineWrapping&&y(gp)==gj.display.maxLine){ge=true}if(gh.collapsed&&gf!=gk.line){f2(gp,0)}cc(gp,new eg(gh,gf==gk.line?gk.ch:null,gf==gl.line?gl.ch:null));++gf});if(gh.collapsed){gm.iter(gk.line,gl.line+1,function(gp){if(fu(gm,gp)){f2(gp,0)}})}if(gh.clearOnEnter){bW(gh,"beforeCursorEnter",function(){gh.clear()})}if(gh.readOnly){f9=true;if(gm.history.done.length||gm.history.undone.length){gm.clearHistory()}}if(gh.collapsed){gh.id=++a5;gh.atomic=true}if(gj){if(ge){gj.curOp.updateMaxLine=true}if(gh.collapsed){ah(gj,gk.line,gl.line+1)}else{if(gh.className||gh.title||gh.startStyle||gh.endStyle||gh.css){for(var gg=gk.line;gg<=gl.line;gg++){R(gj,gg,"text")}}}if(gh.atomic){ew(gj.doc)}ae(gj,"markerAdded",gj,gh)}return gh}var x=H.SharedTextMarker=function(gg,gf){this.markers=gg;this.primary=gf;for(var ge=0;ge<gg.length;++ge){gg[ge].parent=this}};bx(x);x.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var ge=0;ge<this.markers.length;++ge){this.markers[ge].clear()}ae(this,"clear")};x.prototype.find=function(gf,ge){return this.primary.find(gf,ge)};function O(gi,gl,gk,ge,gg){ge=aM(ge);ge.shared=false;var gj=[eD(gi,gl,gk,ge,gg)],gf=gj[0];var gh=ge.widgetNode;d5(gi,function(gn){if(gh){ge.widgetNode=gh.cloneNode(true)}gj.push(eD(gn,fI(gn,gl),fI(gn,gk),ge,gg));for(var gm=0;gm<gn.linked.length;++gm){if(gn.linked[gm].isParent){return}}gf=fF(gj)});return new x(gj,gf)}function eN(ge){return ge.findMarks(W(ge.first,0),ge.clipPos(W(ge.lastLine())),function(gf){return gf.parent})}function dD(gj,gk){for(var gh=0;gh<gk.length;gh++){var gf=gk[gh],gl=gf.find();var ge=gj.clipPos(gl.from),gi=gj.clipPos(gl.to);if(ce(ge,gi)){var gg=eD(gj,ge,gi,gf.primary,gf.primary.type);gf.markers.push(gg);gg.parent=gf}}}function em(gh){for(var gg=0;gg<gh.length;gg++){var ge=gh[gg],gj=[ge.primary.doc];d5(ge.primary.doc,function(gk){gj.push(gk)});for(var gf=0;gf<ge.markers.length;gf++){var gi=ge.markers[gf];if(df(gj,gi.doc)==-1){gi.parent=null;ge.markers.splice(gf--,1)}}}}function eg(ge,gg,gf){this.marker=ge;this.from=gg;this.to=gf}function e7(gg,ge){if(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if(gh.marker==ge){return gh}}}}function eF(gf,gg){for(var gh,ge=0;ge<gf.length;++ge){if(gf[ge]!=gg){(gh||(gh=[])).push(gf[ge])}}return gh}function cc(ge,gf){ge.markedSpans=ge.markedSpans?ge.markedSpans.concat([gf]):[gf];gf.marker.attachLine(ge)}function aP(gf,gg,gk){if(gf){for(var gi=0,gl;gi<gf.length;++gi){var gm=gf[gi],gj=gm.marker;var ge=gm.from==null||(gj.inclusiveLeft?gm.from<=gg:gm.from<gg);if(ge||gm.from==gg&&gj.type=="bookmark"&&(!gk||!gm.marker.insertLeft)){var gh=gm.to==null||(gj.inclusiveRight?gm.to>=gg:gm.to>gg);(gl||(gl=[])).push(new eg(gj,gm.from,gh?null:gm.to))}}}return gl}function aA(gf,gh,gk){if(gf){for(var gi=0,gl;gi<gf.length;++gi){var gm=gf[gi],gj=gm.marker;var gg=gm.to==null||(gj.inclusiveRight?gm.to>=gh:gm.to>gh);if(gg||gm.from==gh&&gj.type=="bookmark"&&(!gk||gm.marker.insertLeft)){var ge=gm.from==null||(gj.inclusiveLeft?gm.from<=gh:gm.from<gh);(gl||(gl=[])).push(new eg(gj,ge?null:gm.from-gh,gm.to==null?null:gm.to-gh))}}}return gl}function ei(gq,gn){if(gn.full){return null}var gm=b8(gq,gn.from.line)&&fd(gq,gn.from.line).markedSpans;var gt=b8(gq,gn.to.line)&&fd(gq,gn.to.line).markedSpans;if(!gm&&!gt){return null}var gf=gn.from.ch,gi=gn.to.ch,gl=ce(gn.from,gn.to)==0;var gk=aP(gm,gf,gl);var gs=aA(gt,gi,gl);var gr=gn.text.length==1,gg=fF(gn.text).length+(gr?gf:0);if(gk){for(var gh=0;gh<gk.length;++gh){var gp=gk[gh];if(gp.to==null){var gu=e7(gs,gp.marker);if(!gu){gp.to=gf}else{if(gr){gp.to=gu.to==null?null:gu.to+gg}}}}}if(gs){for(var gh=0;gh<gs.length;++gh){var gp=gs[gh];if(gp.to!=null){gp.to+=gg}if(gp.from==null){var gu=e7(gk,gp.marker);if(!gu){gp.from=gg;if(gr){(gk||(gk=[])).push(gp)}}}else{gp.from+=gg;if(gr){(gk||(gk=[])).push(gp)}}}}if(gk){gk=q(gk)}if(gs&&gs!=gk){gs=q(gs)}var gj=[gk];if(!gr){var go=gn.text.length-2,ge;if(go>0&&gk){for(var gh=0;gh<gk.length;++gh){if(gk[gh].to==null){(ge||(ge=[])).push(new eg(gk[gh].marker,null,null))}}}for(var gh=0;gh<go;++gh){gj.push(ge)}gj.push(gs)}return gj}function q(gf){for(var ge=0;ge<gf.length;++ge){var gg=gf[ge];if(gg.from!=null&&gg.from==gg.to&&gg.marker.clearWhenEmpty!==false){gf.splice(ge--,1)}}if(!gf.length){return null}return gf}function d7(gm,gk){var ge=b3(gm,gk);var gn=ei(gm,gk);if(!ge){return gn}if(!gn){return ge}for(var gh=0;gh<ge.length;++gh){var gi=ge[gh],gj=gn[gh];if(gi&&gj){spans:for(var gg=0;gg<gj.length;++gg){var gl=gj[gg];for(var gf=0;gf<gi.length;++gf){if(gi[gf].marker==gl.marker){continue spans}}gi.push(gl)}}else{if(gj){ge[gh]=gj}}}return ge}function cF(gq,go,gp){var gi=null;gq.iter(go.line,gp.line+1,function(gr){if(gr.markedSpans){for(var gs=0;gs<gr.markedSpans.length;++gs){var gt=gr.markedSpans[gs].marker;if(gt.readOnly&&(!gi||df(gi,gt)==-1)){(gi||(gi=[])).push(gt)}}}});if(!gi){return null}var gj=[{from:go,to:gp}];for(var gk=0;gk<gi.length;++gk){var gl=gi[gk],gg=gl.find(0);for(var gh=0;gh<gj.length;++gh){var gf=gj[gh];if(ce(gf.to,gg.from)<0||ce(gf.from,gg.to)>0){continue}var gn=[gh,1],ge=ce(gf.from,gg.from),gm=ce(gf.to,gg.to);if(ge<0||!gl.inclusiveLeft&&!ge){gn.push({from:gf.from,to:gg.from})}if(gm>0||!gl.inclusiveRight&&!gm){gn.push({from:gg.to,to:gf.to})}gj.splice.apply(gj,gn);gh+=gn.length-1}}return gj}function f5(ge){var gg=ge.markedSpans;if(!gg){return}for(var gf=0;gf<gg.length;++gf){gg[gf].marker.detachLine(ge)}ge.markedSpans=null}function c1(ge,gg){if(!gg){return}for(var gf=0;gf<gg.length;++gf){gg[gf].marker.attachLine(ge)}ge.markedSpans=gg}function v(ge){return ge.inclusiveLeft?-1:0}function bV(ge){return ge.inclusiveRight?1:0}function dO(gh,gf){var gj=gh.lines.length-gf.lines.length;if(gj!=0){return gj}var gg=gh.find(),gk=gf.find();var ge=ce(gg.from,gk.from)||v(gh)-v(gf);if(ge){return -ge}var gi=ce(gg.to,gk.to)||bV(gh)-bV(gf);if(gi){return gi}return gf.id-gh.id}function a6(gf,gj){var ge=a7&&gf.markedSpans,gi;if(ge){for(var gh,gg=0;gg<ge.length;++gg){gh=ge[gg];if(gh.marker.collapsed&&(gj?gh.from:gh.to)==null&&(!gi||dO(gi,gh.marker)<0)){gi=gh.marker}}}return gi}function eM(ge){return a6(ge,true)}function eu(ge){return a6(ge,false)}function z(gm,gg,gk,gl,gi){var gp=fd(gm,gg);var ge=a7&&gp.markedSpans;if(ge){for(var gh=0;gh<ge.length;++gh){var gf=ge[gh];if(!gf.marker.collapsed){continue}var go=gf.marker.find(0);var gn=ce(go.from,gk)||v(gf.marker)-v(gi);var gj=ce(go.to,gl)||bV(gf.marker)-bV(gi);if(gn>=0&&gj<=0||gn<=0&&gj>=0){continue}if(gn<=0&&(ce(go.to,gk)>0||(gf.marker.inclusiveRight&&gi.inclusiveLeft))||gn>=0&&(ce(go.from,gl)<0||(gf.marker.inclusiveLeft&&gi.inclusiveRight))){return true}}}}function y(gf){var ge;while(ge=eM(gf)){gf=ge.find(-1,true).line}return gf}function h(gg){var ge,gf;while(ge=eu(gg)){gg=ge.find(1,true).line;(gf||(gf=[])).push(gg)}return gf}function aV(gh,gf){var ge=fd(gh,gf),gg=y(ge);if(ge==gg){return gf}return bM(gg)}function d1(gh,gg){if(gg>gh.lastLine()){return gg}var gf=fd(gh,gg),ge;if(!fu(gh,gf)){return gg}while(ge=eu(gf)){gf=ge.find(1,true).line}return bM(gf)+1}function fu(gi,gf){var ge=a7&&gf.markedSpans;if(ge){for(var gh,gg=0;gg<ge.length;++gg){gh=ge[gg];if(!gh.marker.collapsed){continue}if(gh.from==null){return true}if(gh.marker.widgetNode){continue}if(gh.from==0&&gh.marker.inclusiveLeft&&T(gi,gf,gh)){return true}}}}function T(gj,gf,gh){if(gh.to==null){var ge=gh.marker.find(1,true);return T(gj,ge.line,e7(ge.line.markedSpans,gh.marker))}if(gh.marker.inclusiveRight&&gh.to==gf.text.length){return true}for(var gi,gg=0;gg<gf.markedSpans.length;++gg){gi=gf.markedSpans[gg];if(gi.marker.collapsed&&!gi.marker.widgetNode&&gi.from==gh.to&&(gi.to==null||gi.to!=gh.from)&&(gi.marker.inclusiveLeft||gh.marker.inclusiveRight)&&T(gj,gf,gi)){return true}}}var dz=H.LineWidget=function(ge,gh,gf){if(gf){for(var gg in gf){if(gf.hasOwnProperty(gg)){this[gg]=gf[gg]}}}this.cm=ge;this.node=gh};bx(dz);function dX(ge,gf,gg){if(bL(gf)<((ge.curOp&&ge.curOp.scrollTop)||ge.doc.scrollTop)){cJ(ge,null,gg)}}dz.prototype.clear=function(){var gf=this.cm,gh=this.line.widgets,gg=this.line,gj=bM(gg);if(gj==null||!gh){return}for(var gi=0;gi<gh.length;++gi){if(gh[gi]==this){gh.splice(gi--,1)}}if(!gh.length){gg.widgets=null}var ge=cW(this);cK(gf,function(){dX(gf,gg,-ge);R(gf,gj,"widget");f2(gg,Math.max(0,gg.height-ge))})};dz.prototype.changed=function(){var gf=this.height,ge=this.cm,gg=this.line;this.height=null;var gh=cW(this)-gf;if(!gh){return}cK(ge,function(){ge.curOp.forceUpdate=true;dX(ge,gg,gh);f2(gg,gg.height+gh)})};function cW(gf){if(gf.height!=null){return gf.height}if(!f7(document.body,gf.node)){var ge="position: relative;";if(gf.coverGutter){ge+="margin-left: -"+gf.cm.display.gutters.offsetWidth+"px;"}if(gf.noHScroll){ge+="width: "+gf.cm.display.wrapper.clientWidth+"px;"}bQ(gf.cm.display.measure,fZ("div",[gf.node],null,ge))}return gf.height=gf.node.offsetHeight}function bG(ge,gi,gg,gf){var gh=new dz(ge,gg,gf);if(gh.noHScroll){ge.display.alignWidgets=true}ex(ge.doc,gi,"widget",function(gk){var gl=gk.widgets||(gk.widgets=[]);if(gh.insertAt==null){gl.push(gh)}else{gl.splice(Math.min(gl.length-1,Math.max(0,gh.insertAt)),0,gh)}gh.line=gk;if(!fu(ge.doc,gk)){var gj=bL(gk)<ge.doc.scrollTop;f2(gk,gk.height+cW(gh));if(gj){cJ(ge,null,gh.height)}ge.curOp.forceUpdate=true}return true});return gh}var f3=H.Line=function(gg,gf,ge){this.text=gg;c1(this,gf);this.height=ge?ge(this):1};bx(f3);f3.prototype.lineNo=function(){return bM(this)};function ek(gf,gi,gg,ge){gf.text=gi;if(gf.stateAfter){gf.stateAfter=null}if(gf.styles){gf.styles=null}if(gf.order!=null){gf.order=null}f5(gf);c1(gf,gg);var gh=ge?ge(gf):1;if(gh!=gf.height){f2(gf,gh)}}function bA(ge){ge.parent=null;f5(ge)}function dg(gg,gf){if(gg){for(;;){var ge=gg.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!ge){break}gg=gg.slice(0,ge.index)+gg.slice(ge.index+ge[0].length);var gh=ge[1]?"bgClass":"textClass";if(gf[gh]==null){gf[gh]=ge[2]}else{if(!(new RegExp("(?:^|s)"+ge[2]+"(?:$|s)")).test(gf[gh])){gf[gh]+=" "+ge[2]}}}}return gg}function fo(gg,gf){if(gg.blankLine){return gg.blankLine(gf)}if(!gg.innerMode){return}var ge=H.innerMode(gg,gf);if(ge.mode.blankLine){return ge.mode.blankLine(ge.state)}}function ey(gj,gi,gh,ge){for(var gf=0;gf<10;gf++){if(ge){ge[0]=H.innerMode(gj,gh).mode}var gg=gj.token(gi,gh);if(gi.pos>gi.start){return gg}}throw new Error("Mode "+gj.name+" failed to advance stream.")}function cp(gn,gl,gi,gh){function ge(gq){return{start:go.start,end:go.pos,string:go.current(),type:gg||null,state:gq?b2(gm.mode,gf):gf}}var gm=gn.doc,gj=gm.mode,gg;gl=fI(gm,gl);var gp=fd(gm,gl.line),gf=dA(gn,gl.line,gi);var go=new eR(gp.text,gn.options.tabSize),gk;if(gh){gk=[]}while((gh||go.pos<gl.ch)&&!go.eol()){go.start=go.pos;gg=ey(gj,go,gf);if(gh){gk.push(ge(true))}}return gh?gk:ge()}function w(go,gq,gj,gf,gk,gh,gi){var gg=gj.flattenSpans;if(gg==null){gg=go.options.flattenSpans}var gm=0,gl=null;var gp=new eR(gq,go.options.tabSize),ge;var gs=go.options.addModeClass&&[null];if(gq==""){dg(fo(gj,gf),gh)}while(!gp.eol()){if(gp.pos>go.options.maxHighlightLength){gg=false;if(gi){dv(go,gq,gf,gp.pos)}gp.pos=gq.length;ge=null}else{ge=dg(ey(gj,gp,gf,gs),gh)}if(gs){var gr=gs[0].name;if(gr){ge="m-"+(ge?gr+" "+ge:gr)}}if(!gg||gl!=ge){while(gm<gp.start){gm=Math.min(gp.start,gm+50000);gk(gm,gl)}gl=ge}gp.start=gp.pos}while(gm<gp.pos){var gn=Math.min(gp.pos,gm+50000);gk(gn,gl);gm=gn}}function fx(gl,gn,ge,gi){var gm=[gl.state.modeGen],gh={};w(gl,gn.text,gl.doc.mode,ge,function(go,gp){gm.push(go,gp)},gh,gi);for(var gf=0;gf<gl.state.overlays.length;++gf){var gj=gl.state.overlays[gf],gk=1,gg=0;w(gl,gn.text,gj.mode,true,function(go,gq){var gs=gk;while(gg<go){var gp=gm[gk];if(gp>go){gm.splice(gk,1,go,gm[gk+1],gp)}gk+=2;gg=Math.min(go,gp)}if(!gq){return}if(gj.opaque){gm.splice(gs,gk-gs,go,"cm-overlay "+gq);gk=gs+2}else{for(;gs<gk;gs+=2){var gr=gm[gs+1];gm[gs+1]=(gr?gr+" ":"")+"cm-overlay "+gq}}},gh)}return{styles:gm,classes:gh.bgClass||gh.textClass?gh:null}}function c4(gf,gg,gh){if(!gg.styles||gg.styles[0]!=gf.state.modeGen){var ge=fx(gf,gg,gg.stateAfter=dA(gf,bM(gg)));gg.styles=ge.styles;if(ge.classes){gg.styleClasses=ge.classes}else{if(gg.styleClasses){gg.styleClasses=null}}if(gh===gf.doc.frontier){gf.doc.frontier++}}return gg.styles}function dv(ge,gj,gg,gf){var gi=ge.doc.mode;var gh=new eR(gj,ge.options.tabSize);gh.start=gh.pos=gf||0;if(gj==""){fo(gi,gg)}while(!gh.eol()&&gh.pos<=ge.options.maxHighlightLength){ey(gi,gh,gg);gh.start=gh.pos}}var dU={},b0={};function eU(gg,gf){if(!gg||/^\s*$/.test(gg)){return null}var ge=gf.addModeClass?b0:dU;return ge[gg]||(ge[gg]=gg.replace(/\S+/g,"cm-$&"))}function eP(gf,gj){var gk=fZ("span",null,null,cY?"padding-right: .1px":null);var gh={pre:fZ("pre",[gk]),content:gk,col:0,pos:0,cm:gf};gj.measure={};for(var gi=0;gi<=(gj.rest?gj.rest.length:0);gi++){var gg=gi?gj.rest[gi-1]:gj.line,ge;gh.pos=0;gh.addToken=t;if((dI||cY)&&gf.getOption("lineWrapping")){gh.addToken=fD(gh.addToken)}if(bN(gf.display.measure)&&(ge=a(gg))){gh.addToken=U(gh.addToken,ge)}gh.map=[];var gl=gj!=gf.display.externalMeasured&&bM(gg);bn(gg,gh,c4(gf,gg,gl));if(gg.styleClasses){if(gg.styleClasses.bgClass){gh.bgClass=fR(gg.styleClasses.bgClass,gh.bgClass||"")}if(gg.styleClasses.textClass){gh.textClass=fR(gg.styleClasses.textClass,gh.textClass||"")}}if(gh.map.length==0){gh.map.push(0,0,gh.content.appendChild(bm(gf.display.measure)))}if(gi==0){gj.measure.map=gh.map;gj.measure.cache={}}else{(gj.measure.maps||(gj.measure.maps=[])).push(gh.map);(gj.measure.caches||(gj.measure.caches=[])).push({})}}if(cY&&/\bcm-tab\b/.test(gh.content.lastChild.className)){gh.content.className="cm-tab-wrap-hack"}aD(gf,"renderLine",gf,gj.line,gh.pre);if(gh.pre.className){gh.textClass=fR(gh.pre.className,gh.textClass||"")}return gh}function fa(gf){var ge=fZ("span","\u2022","cm-invalidchar");ge.title="\\u"+gf.charCodeAt(0).toString(16);ge.setAttribute("aria-label",ge.title);return ge}function t(gp,gk,gt,gr,gn,gv,gj){if(!gk){return}var ge=gp.cm.options.specialChars,gf=false;if(!ge.test(gk)){gp.col+=gk.length;var gs=document.createTextNode(gk);gp.map.push(gp.pos,gp.pos+gk.length,gs);if(dI&&k<9){gf=true}gp.pos+=gk.length}else{var gs=document.createDocumentFragment(),gh=0;while(true){ge.lastIndex=gh;var gq=ge.exec(gk);var gu=gq?gq.index-gh:gk.length-gh;if(gu){var gm=document.createTextNode(gk.slice(gh,gh+gu));if(dI&&k<9){gs.appendChild(fZ("span",[gm]))}else{gs.appendChild(gm)}gp.map.push(gp.pos,gp.pos+gu,gm);gp.col+=gu;gp.pos+=gu}if(!gq){break}gh+=gu+1;if(gq[0]=="\t"){var go=gp.cm.options.tabSize,gl=go-gp.col%go;var gm=gs.appendChild(fZ("span",co(gl),"cm-tab"));gm.setAttribute("role","presentation");gm.setAttribute("cm-text","\t");gp.col+=gl}else{var gm=gp.cm.options.specialCharPlaceholder(gq[0]);gm.setAttribute("cm-text",gq[0]);if(dI&&k<9){gs.appendChild(fZ("span",[gm]))}else{gs.appendChild(gm)}gp.col+=1}gp.map.push(gp.pos,gp.pos+1,gm);gp.pos++}}if(gt||gr||gn||gf||gj){var gg=gt||"";if(gr){gg+=gr}if(gn){gg+=gn}var gi=fZ("span",[gs],gg,gj);if(gv){gi.title=gv}return gp.content.appendChild(gi)}gp.content.appendChild(gs)}function fD(ge){function gf(gg){var gh=" ";for(var gi=0;gi<gg.length-2;++gi){gh+=gi%2?" ":"\u00a0"}gh+=" ";return gh}return function(gh,gl,gi,gg,gk,gj){ge(gh,gl.replace(/ {3,}/g,gf),gi,gg,gk,gj)}}function U(gf,ge){return function(gm,go,gg,gk,gp,gn){gg=gg?gg+" cm-force-border":"cm-force-border";var gh=gm.pos,gj=gh+go.length;for(;;){for(var gl=0;gl<ge.length;gl++){var gi=ge[gl];if(gi.to>gh&&gi.from<=gh){break}}if(gi.to>=gj){return gf(gm,go,gg,gk,gp,gn)}gf(gm,go.slice(0,gi.to-gh),gg,gk,null,gn);gk=null;go=go.slice(gi.to-gh);gh=gi.to}}}function ac(gf,gh,ge,gg){var gi=!gg&&ge.widgetNode;if(gi){gf.map.push(gf.pos,gf.pos+gh,gi)}if(!gg&&gf.cm.display.input.needsContentAttribute){if(!gi){gi=gf.content.appendChild(document.createElement("span"))}gi.setAttribute("cm-marker",ge.id)}if(gi){gf.cm.display.input.setUneditable(gi);gf.content.appendChild(gi)}gf.pos+=gh}function bn(gn,gu,gm){var gj=gn.markedSpans,gl=gn.text,gs=0;if(!gj){for(var gx=1;gx<gm.length;gx+=2){gu.addToken(gu,gl.slice(gs,gs=gm[gx]),eU(gm[gx+1],gu.cm.options))}return}var gy=gl.length,gi=0,gx=1,gq="",gz,go;var gB=0,ge,gA,gr,gC,gg;for(;;){if(gB==gi){ge=gA=gr=gC=go="";gg=null;gB=Infinity;var gk=[];for(var gv=0;gv<gj.length;++gv){var gw=gj[gv],gt=gw.marker;if(gw.from<=gi&&(gw.to==null||gw.to>gi)){if(gw.to!=null&&gB>gw.to){gB=gw.to;gA=""}if(gt.className){ge+=" "+gt.className}if(gt.css){go=gt.css}if(gt.startStyle&&gw.from==gi){gr+=" "+gt.startStyle}if(gt.endStyle&&gw.to==gB){gA+=" "+gt.endStyle}if(gt.title&&!gC){gC=gt.title}if(gt.collapsed&&(!gg||dO(gg.marker,gt)<0)){gg=gw}}else{if(gw.from>gi&&gB>gw.from){gB=gw.from}}if(gt.type=="bookmark"&&gw.from==gi&&gt.widgetNode){gk.push(gt)}}if(gg&&(gg.from||0)==gi){ac(gu,(gg.to==null?gy+1:gg.to)-gi,gg.marker,gg.from==null);if(gg.to==null){return}}if(!gg&&gk.length){for(var gv=0;gv<gk.length;++gv){ac(gu,0,gk[gv])}}}if(gi>=gy){break}var gp=Math.min(gy,gB);while(true){if(gq){var gf=gi+gq.length;if(!gg){var gh=gf>gp?gq.slice(0,gp-gi):gq;gu.addToken(gu,gh,gz?gz+ge:ge,gr,gi+gh.length==gB?gA:"",gC,go)}if(gf>=gp){gq=gq.slice(gp-gi);gi=gp;break}gi=gf;gr=""}gq=gl.slice(gs,gs=gm[gx++]);gz=eU(gm[gx++],gu.cm.options)}}}function dQ(ge,gf){return gf.from.ch==0&&gf.to.ch==0&&fF(gf.text)==""&&(!ge.cm||ge.cm.options.wholeLineUpdateBefore)}function fw(gr,gm,gf,gi){function gs(gu){return gf?gf[gu]:null}function gg(gu,gw,gv){ek(gu,gw,gv,gi);ae(gu,"change",gu,gm)}function ge(gx,gv){for(var gw=gx,gu=[];gw<gv;++gw){gu.push(new f3(gt[gw],gs(gw),gi))}return gu}var gq=gm.from,gp=gm.to,gt=gm.text;var gn=fd(gr,gq.line),go=fd(gr,gp.line);var gl=fF(gt),gh=gs(gt.length-1),gk=gp.line-gq.line;if(gm.full){gr.insert(0,ge(0,gt.length));gr.remove(gt.length,gr.size-gt.length)}else{if(dQ(gr,gm)){var gj=ge(0,gt.length-1);gg(go,go.text,gh);if(gk){gr.remove(gq.line,gk)}if(gj.length){gr.insert(gq.line,gj)}}else{if(gn==go){if(gt.length==1){gg(gn,gn.text.slice(0,gq.ch)+gl+gn.text.slice(gp.ch),gh)}else{var gj=ge(1,gt.length-1);gj.push(new f3(gl+gn.text.slice(gp.ch),gh,gi));gg(gn,gn.text.slice(0,gq.ch)+gt[0],gs(0));gr.insert(gq.line+1,gj)}}else{if(gt.length==1){gg(gn,gn.text.slice(0,gq.ch)+gt[0]+go.text.slice(gp.ch),gs(0));gr.remove(gq.line+1,gk)}else{gg(gn,gn.text.slice(0,gq.ch)+gt[0],gs(0));gg(go,gl+go.text.slice(gp.ch),gh);var gj=ge(1,gt.length-1);if(gk>1){gr.remove(gq.line+1,gk-1)}gr.insert(gq.line+1,gj)}}}}ae(gr,"change",gr,gm)}function eX(gf){this.lines=gf;this.parent=null;for(var gg=0,ge=0;gg<gf.length;++gg){gf[gg].parent=this;ge+=gf[gg].height}this.height=ge}eX.prototype={chunkSize:function(){return this.lines.length},removeInner:function(ge,gi){for(var gg=ge,gh=ge+gi;gg<gh;++gg){var gf=this.lines[gg];this.height-=gf.height;bA(gf);ae(gf,"delete")}this.lines.splice(ge,gi)},collapse:function(ge){ge.push.apply(ge,this.lines)},insertInner:function(gf,gg,ge){this.height+=ge;this.lines=this.lines.slice(0,gf).concat(gg).concat(this.lines.slice(gf));for(var gh=0;gh<gg.length;++gh){gg[gh].parent=this}},iterN:function(ge,gh,gg){for(var gf=ge+gh;ge<gf;++ge){if(gg(this.lines[ge])){return true}}}};function fv(gh){this.children=gh;var gg=0,ge=0;for(var gf=0;gf<gh.length;++gf){var gi=gh[gf];gg+=gi.chunkSize();ge+=gi.height;gi.parent=this}this.size=gg;this.height=ge;this.parent=null}fv.prototype={chunkSize:function(){return this.size},removeInner:function(ge,gl){this.size-=gl;for(var gg=0;gg<this.children.length;++gg){var gk=this.children[gg],gi=gk.chunkSize();if(ge<gi){var gh=Math.min(gl,gi-ge),gj=gk.height;gk.removeInner(ge,gh);this.height-=gj-gk.height;if(gi==gh){this.children.splice(gg--,1);gk.parent=null}if((gl-=gh)==0){break}ge=0}else{ge-=gi}}if(this.size-gl<25&&(this.children.length>1||!(this.children[0] instanceof eX))){var gf=[];this.collapse(gf);this.children=[new eX(gf)];this.children[0].parent=this}},collapse:function(ge){for(var gf=0;gf<this.children.length;++gf){this.children[gf].collapse(ge)}},insertInner:function(gf,gg,ge){this.size+=gg.length;this.height+=ge;for(var gj=0;gj<this.children.length;++gj){var gl=this.children[gj],gk=gl.chunkSize();if(gf<=gk){gl.insertInner(gf,gg,ge);if(gl.lines&&gl.lines.length>50){while(gl.lines.length>50){var gi=gl.lines.splice(gl.lines.length-25,25);var gh=new eX(gi);gl.height-=gh.height;this.children.splice(gj+1,0,gh);gh.parent=this}this.maybeSpill()}break}gf-=gk}},maybeSpill:function(){if(this.children.length<=10){return}var gh=this;do{var gf=gh.children.splice(gh.children.length-5,5);var gg=new fv(gf);if(!gh.parent){var gi=new fv(gh.children);gi.parent=gh;gh.children=[gi,gg];gh=gi}else{gh.size-=gg.size;gh.height-=gg.height;var ge=df(gh.parent.children,gh);gh.parent.children.splice(ge+1,0,gg)}gg.parent=gh.parent}while(gh.children.length>10);gh.parent.maybeSpill()},iterN:function(ge,gk,gj){for(var gf=0;gf<this.children.length;++gf){var gi=this.children[gf],gh=gi.chunkSize();if(ge<gh){var gg=Math.min(gk,gh-ge);if(gi.iterN(ge,gg,gj)){return true}if((gk-=gg)==0){break}ge=0}else{ge-=gh}}}};var cq=0;var ar=H.Doc=function(gg,gf,ge){if(!(this instanceof ar)){return new ar(gg,gf,ge)}if(ge==null){ge=0}fv.call(this,[new eX([new f3("",null)])]);this.first=ge;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=ge;var gh=W(ge,0);this.sel=eQ(gh);this.history=new fS(null);this.id=++cq;this.modeOption=gf;if(typeof gg=="string"){gg=a0(gg)}fw(this,{from:gh,to:gh,text:gg});bT(this,eQ(gh),Z)};ar.prototype=cj(fv.prototype,{constructor:ar,iter:function(gg,gf,ge){if(ge){this.iterN(gg-this.first,gf-gg,ge)}else{this.iterN(this.first,this.first+this.size,gg)}},insert:function(gf,gg){var ge=0;for(var gh=0;gh<gg.length;++gh){ge+=gg[gh].height}this.insertInner(gf-this.first,gg,ge)},remove:function(ge,gf){this.removeInner(ge-this.first,gf)},getValue:function(gf){var ge=a2(this,this.first,this.first+this.size);if(gf===false){return ge}return ge.join(gf||"\n")},setValue:cC(function(gf){var gg=W(this.first,0),ge=this.first+this.size-1;bf(this,{from:gg,to:W(ge,fd(this,ge).text.length),text:a0(gf),origin:"setValue",full:true},true);bT(this,eQ(gg))}),replaceRange:function(gf,gh,gg,ge){gh=fI(this,gh);gg=gg?fI(this,gg):gh;a1(this,gf,gh,gg,ge)},getRange:function(gh,gg,gf){var ge=f1(this,fI(this,gh),fI(this,gg));if(gf===false){return ge}return ge.join(gf||"\n")},getLine:function(gf){var ge=this.getLineHandle(gf);return ge&&ge.text},getLineHandle:function(ge){if(b8(this,ge)){return fd(this,ge)}},getLineNumber:function(ge){return bM(ge)},getLineHandleVisualStart:function(ge){if(typeof ge=="number"){ge=fd(this,ge)}return y(ge)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(ge){return fI(this,ge)},getCursor:function(gg){var ge=this.sel.primary(),gf;if(gg==null||gg=="head"){gf=ge.head}else{if(gg=="anchor"){gf=ge.anchor}else{if(gg=="end"||gg=="to"||gg===false){gf=ge.to()}else{gf=ge.from()}}}return gf},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cC(function(ge,gg,gf){F(this,fI(this,typeof ge=="number"?W(ge,gg||0):ge),null,gf)}),setSelection:cC(function(gf,gg,ge){F(this,fI(this,gf),fI(this,gg||gf),ge)}),extendSelection:cC(function(gg,ge,gf){fU(this,fI(this,gg),ge&&fI(this,ge),gf)}),extendSelections:cC(function(gf,ge){av(this,dY(this,gf,ge))}),extendSelectionsBy:cC(function(gf,ge){av(this,bR(this.sel.ranges,gf),ge)}),setSelections:cC(function(ge,gi,gg){if(!ge.length){return}for(var gh=0,gf=[];gh<ge.length;gh++){gf[gh]=new dW(fI(this,ge[gh].anchor),fI(this,ge[gh].head))}if(gi==null){gi=Math.min(ge.length-1,this.sel.primIndex)}bT(this,cv(gf,gi),gg)}),addSelection:cC(function(gg,gh,gf){var ge=this.sel.ranges.slice(0);ge.push(new dW(fI(this,gg),fI(this,gh||gg)));bT(this,cv(ge,ge.length-1),gf)}),getSelection:function(gi){var gf=this.sel.ranges,ge;for(var gg=0;gg<gf.length;gg++){var gh=f1(this,gf[gg].from(),gf[gg].to());ge=ge?ge.concat(gh):gh}if(gi===false){return ge}else{return ge.join(gi||"\n")}},getSelections:function(gi){var gh=[],ge=this.sel.ranges;for(var gf=0;gf<ge.length;gf++){var gg=f1(this,ge[gf].from(),ge[gf].to());if(gi!==false){gg=gg.join(gi||"\n")}gh[gf]=gg}return gh},replaceSelection:function(gg,gi,ge){var gh=[];for(var gf=0;gf<this.sel.ranges.length;gf++){gh[gf]=gg}this.replaceSelections(gh,gi,ge||"+input")},replaceSelections:cC(function(gj,gl,gg){var gi=[],gk=this.sel;for(var gh=0;gh<gk.ranges.length;gh++){var gf=gk.ranges[gh];gi[gh]={from:gf.from(),to:gf.to(),text:a0(gj[gh]),origin:gg}}var ge=gl&&gl!="end"&&af(this,gi,gl);for(var gh=gi.length-1;gh>=0;gh--){bf(this,gi[gh])}if(ge){e5(this,ge)}else{if(this.cm){fE(this.cm)}}}),undo:cC(function(){b7(this,"undo")}),redo:cC(function(){b7(this,"redo")}),undoSelection:cC(function(){b7(this,"undo",true)}),redoSelection:cC(function(){b7(this,"redo",true)}),setExtending:function(ge){this.extend=ge},getExtending:function(){return this.extend},historySize:function(){var gh=this.history,ge=0,gg=0;for(var gf=0;gf<gh.done.length;gf++){if(!gh.done[gf].ranges){++ge}}for(var gf=0;gf<gh.undone.length;gf++){if(!gh.undone[gf].ranges){++gg}}return{undo:ge,redo:gg}},clearHistory:function(){this.history=new fS(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(ge){if(ge){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(ge){return this.history.generation==(ge||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(gf){var ge=this.history=new fS(this.history.maxGeneration);ge.done=bO(gf.done.slice(0),null,true);ge.undone=bO(gf.undone.slice(0),null,true)},addLineClass:cC(function(gg,gf,ge){return ex(this,gg,gf=="gutter"?"gutter":"class",function(gh){var gi=gf=="text"?"textClass":gf=="background"?"bgClass":gf=="gutter"?"gutterClass":"wrapClass";if(!gh[gi]){gh[gi]=ge}else{if(S(ge).test(gh[gi])){return false}else{gh[gi]+=" "+ge}}return true})}),removeLineClass:cC(function(gg,gf,ge){return ex(this,gg,gf=="gutter"?"gutter":"class",function(gi){var gl=gf=="text"?"textClass":gf=="background"?"bgClass":gf=="gutter"?"gutterClass":"wrapClass";var gk=gi[gl];if(!gk){return false}else{if(ge==null){gi[gl]=null}else{var gj=gk.match(S(ge));if(!gj){return false}var gh=gj.index+gj[0].length;gi[gl]=gk.slice(0,gj.index)+(!gj.index||gh==gk.length?"":" ")+gk.slice(gh)||null}}return true})}),markText:function(gg,gf,ge){return eD(this,fI(this,gg),fI(this,gf),ge,"range")},setBookmark:function(gg,ge){var gf={replacedWith:ge&&(ge.nodeType==null?ge.widget:ge),insertLeft:ge&&ge.insertLeft,clearWhenEmpty:false,shared:ge&&ge.shared};gg=fI(this,gg);return eD(this,gg,gg,gf,"bookmark")},findMarksAt:function(gi){gi=fI(this,gi);var gh=[],gf=fd(this,gi.line).markedSpans;if(gf){for(var ge=0;ge<gf.length;++ge){var gg=gf[ge];if((gg.from==null||gg.from<=gi.ch)&&(gg.to==null||gg.to>=gi.ch)){gh.push(gg.marker.parent||gg.marker)}}}return gh},findMarks:function(gi,gh,ge){gi=fI(this,gi);gh=fI(this,gh);var gf=[],gg=gi.line;this.iter(gi.line,gh.line+1,function(gj){var gl=gj.markedSpans;if(gl){for(var gk=0;gk<gl.length;gk++){var gm=gl[gk];if(!(gg==gi.line&&gi.ch>gm.to||gm.from==null&&gg!=gi.line||gg==gh.line&&gm.from>gh.ch)&&(!ge||ge(gm.marker))){gf.push(gm.marker.parent||gm.marker)}}}++gg});return gf},getAllMarks:function(){var ge=[];this.iter(function(gg){var gf=gg.markedSpans;if(gf){for(var gh=0;gh<gf.length;++gh){if(gf[gh].from!=null){ge.push(gf[gh].marker)}}}});return ge},posFromIndex:function(gf){var ge,gg=this.first;this.iter(function(gh){var gi=gh.text.length+1;if(gi>gf){ge=gf;return true}gf-=gi;++gg});return fI(this,W(gg,ge))},indexFromPos:function(gf){gf=fI(this,gf);var ge=gf.ch;if(gf.line<this.first||gf.ch<0){return 0}this.iter(this.first,gf.line,function(gg){ge+=gg.text.length+1});return ge},copy:function(ge){var gf=new ar(a2(this,this.first,this.first+this.size),this.modeOption,this.first);gf.scrollTop=this.scrollTop;gf.scrollLeft=this.scrollLeft;gf.sel=this.sel;gf.extend=false;if(ge){gf.history.undoDepth=this.history.undoDepth;gf.setHistory(this.getHistory())}return gf},linkedDoc:function(ge){if(!ge){ge={}}var gh=this.first,gg=this.first+this.size;if(ge.from!=null&&ge.from>gh){gh=ge.from}if(ge.to!=null&&ge.to<gg){gg=ge.to}var gf=new ar(a2(this,gh,gg),ge.mode||this.modeOption,gh);if(ge.sharedHist){gf.history=this.history}(this.linked||(this.linked=[])).push({doc:gf,sharedHist:ge.sharedHist});gf.linked=[{doc:this,isParent:true,sharedHist:ge.sharedHist}];dD(gf,eN(this));return gf},unlinkDoc:function(gf){if(gf instanceof H){gf=gf.doc}if(this.linked){for(var gg=0;gg<this.linked.length;++gg){var gh=this.linked[gg];if(gh.doc!=gf){continue}this.linked.splice(gg,1);gf.unlinkDoc(this);em(eN(this));break}}if(gf.history==this.history){var ge=[gf.id];d5(gf,function(gi){ge.push(gi.id)},true);gf.history=new fS(null);gf.history.done=bO(this.history.done,ge);gf.history.undone=bO(this.history.undone,ge)}},iterLinkedDocs:function(ge){d5(this,ge)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});ar.prototype.eachLine=ar.prototype.iter;var d="iter insert remove copy getEditor".split(" ");for(var bJ in ar.prototype){if(ar.prototype.hasOwnProperty(bJ)&&df(d,bJ)<0){H.prototype[bJ]=(function(ge){return function(){return ge.apply(this.doc,arguments)}})(ar.prototype[bJ])}}bx(ar);function d5(gh,gg,gf){function ge(gn,gl,gj){if(gn.linked){for(var gk=0;gk<gn.linked.length;++gk){var gi=gn.linked[gk];if(gi.doc==gl){continue}var gm=gj&&gi.sharedHist;if(gf&&!gm){continue}gg(gi.doc,gm);ge(gi.doc,gn,gm)}}}ge(gh,null,true)}function d9(ge,gf){if(gf.cm){throw new Error("This document is already in use.")}ge.doc=gf;gf.cm=ge;X(ge);bq(ge);if(!ge.options.lineWrapping){g(ge)}ge.options.mode=gf.modeOption;ah(ge)}function fd(gh,gj){gj-=gh.first;if(gj<0||gj>=gh.size){throw new Error("There is no line "+(gj+gh.first)+" in the document.")}for(var ge=gh;!ge.lines;){for(var gf=0;;++gf){var gi=ge.children[gf],gg=gi.chunkSize();if(gj<gg){ge=gi;break}gj-=gg}}return ge.lines[gj]}function f1(gg,gi,ge){var gf=[],gh=gi.line;gg.iter(gi.line,ge.line+1,function(gj){var gk=gj.text;if(gh==ge.line){gk=gk.slice(0,ge.ch)}if(gh==gi.line){gk=gk.slice(gi.ch)}gf.push(gk);++gh});return gf}function a2(gf,gh,gg){var ge=[];gf.iter(gh,gg,function(gi){ge.push(gi.text)});return ge}function f2(gf,ge){var gg=ge-gf.height;if(gg){for(var gh=gf;gh;gh=gh.parent){gh.height+=gg}}}function bM(ge){if(ge.parent==null){return null}var gi=ge.parent,gh=df(gi.lines,ge);for(var gf=gi.parent;gf;gi=gf,gf=gf.parent){for(var gg=0;;++gg){if(gf.children[gg]==gi){break}gh+=gf.children[gg].chunkSize()}}return gh+gi.first}function bF(gg,gj){var gl=gg.first;outer:do{for(var gh=0;gh<gg.children.length;++gh){var gk=gg.children[gh],gi=gk.height;if(gj<gi){gg=gk;continue outer}gj-=gi;gl+=gk.chunkSize()}return gl}while(!gg.lines);for(var gh=0;gh<gg.lines.length;++gh){var gf=gg.lines[gh],ge=gf.height;if(gj<ge){break}gj-=ge}return gl+gh}function bL(gg){gg=y(gg);var gi=0,gf=gg.parent;for(var gh=0;gh<gf.lines.length;++gh){var ge=gf.lines[gh];if(ge==gg){break}else{gi+=ge.height}}for(var gj=gf.parent;gj;gf=gj,gj=gf.parent){for(var gh=0;gh<gj.children.length;++gh){var gk=gj.children[gh];if(gk==gf){break}else{gi+=gk.height}}}return gi}function a(gf){var ge=gf.order;if(ge==null){ge=gf.order=bg(gf.text)}return ge}function fS(ge){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=ge||1}function ds(ge,gg){var gf={from:ch(gg.from),to:cV(gg),text:f1(ge,gg.from,gg.to)};bX(ge,gf,gg.from.line,gg.to.line+1);d5(ge,function(gh){bX(gh,gf,gg.from.line,gg.to.line+1)},true);return gf}function fz(gf){while(gf.length){var ge=fF(gf);if(ge.ranges){gf.pop()}else{break}}}function eK(gf,ge){if(ge){fz(gf.done);return fF(gf.done)}else{if(gf.done.length&&!fF(gf.done).ranges){return fF(gf.done)}else{if(gf.done.length>1&&!gf.done[gf.done.length-2].ranges){gf.done.pop();return fF(gf.done)}}}}function fL(gk,gi,ge,gh){var gg=gk.history;gg.undone.length=0;var gf=+new Date,gl;if((gg.lastOp==gh||gg.lastOrigin==gi.origin&&gi.origin&&((gi.origin.charAt(0)=="+"&&gk.cm&&gg.lastModTime>gf-gk.cm.options.historyEventDelay)||gi.origin.charAt(0)=="*"))&&(gl=eK(gg,gg.lastOp==gh))){var gm=fF(gl.changes);if(ce(gi.from,gi.to)==0&&ce(gi.from,gm.to)==0){gm.to=cV(gi)}else{gl.changes.push(ds(gk,gi))}}else{var gj=fF(gg.done);if(!gj||!gj.ranges){cL(gk.sel,gg.done)}gl={changes:[ds(gk,gi)],generation:gg.generation};gg.done.push(gl);while(gg.done.length>gg.undoDepth){gg.done.shift();if(!gg.done[0].ranges){gg.done.shift()}}}gg.done.push(ge);gg.generation=++gg.maxGeneration;gg.lastModTime=gg.lastSelTime=gf;gg.lastOp=gg.lastSelOp=gh;gg.lastOrigin=gg.lastSelOrigin=gi.origin;if(!gm){aD(gk,"historyAdded")}}function bz(gi,ge,gg,gh){var gf=ge.charAt(0);return gf=="*"||gf=="+"&&gg.ranges.length==gh.ranges.length&&gg.somethingSelected()==gh.somethingSelected()&&new Date-gi.history.lastSelTime<=(gi.cm?gi.cm.options.historyEventDelay:500)}function f8(gj,gh,ge,gg){var gi=gj.history,gf=gg&&gg.origin;if(ge==gi.lastSelOp||(gf&&gi.lastSelOrigin==gf&&(gi.lastModTime==gi.lastSelTime&&gi.lastOrigin==gf||bz(gj,gf,fF(gi.done),gh)))){gi.done[gi.done.length-1]=gh}else{cL(gh,gi.done)}gi.lastSelTime=+new Date;gi.lastSelOrigin=gf;gi.lastSelOp=ge;if(gg&&gg.clearRedo!==false){fz(gi.undone)}}function cL(gf,ge){var gg=fF(ge);if(!(gg&&gg.ranges&&gg.equals(gf))){ge.push(gf)}}function bX(gf,gj,gi,gh){var ge=gj["spans_"+gf.id],gg=0;gf.iter(Math.max(gf.first,gi),Math.min(gf.first+gf.size,gh),function(gk){if(gk.markedSpans){(ge||(ge=gj["spans_"+gf.id]={}))[gg]=gk.markedSpans}++gg})}function bk(gg){if(!gg){return null}for(var gf=0,ge;gf<gg.length;++gf){if(gg[gf].marker.explicitlyCleared){if(!ge){ge=gg.slice(0,gf)}}else{if(ge){ge.push(gg[gf])}}}return !ge?gg:ge.length?ge:null}function b3(gh,gi){var gg=gi["spans_"+gh.id];if(!gg){return null}for(var gf=0,ge=[];gf<gi.text.length;++gf){ge.push(bk(gg[gf]))}return ge}function bO(gp,gh,go){for(var gk=0,gf=[];gk<gp.length;++gk){var gg=gp[gk];if(gg.ranges){gf.push(go?f0.prototype.deepCopy.call(gg):gg);continue}var gm=gg.changes,gn=[];gf.push({changes:gn});for(var gj=0;gj<gm.length;++gj){var gl=gm[gj],gi;gn.push({from:gl.from,to:gl.to,text:gl.text});if(gh){for(var ge in gl){if(gi=ge.match(/^spans_(\d+)$/)){if(df(gh,Number(gi[1]))>-1){fF(gn)[ge]=gl[ge];delete gl[ge]}}}}}}return gf}function I(gh,gg,gf,ge){if(gf<gh.line){gh.line+=ge}else{if(gg<gh.line){gh.line=gg;gh.ch=0}}}function ff(gh,gj,gk,gl){for(var gg=0;gg<gh.length;++gg){var ge=gh[gg],gi=true;if(ge.ranges){if(!ge.copied){ge=gh[gg]=ge.deepCopy();ge.copied=true}for(var gf=0;gf<ge.ranges.length;gf++){I(ge.ranges[gf].anchor,gj,gk,gl);I(ge.ranges[gf].head,gj,gk,gl)}continue}for(var gf=0;gf<ge.changes.length;++gf){var gm=ge.changes[gf];if(gk<gm.from.line){gm.from=W(gm.from.line+gl,gm.from.ch);gm.to=W(gm.to.line+gl,gm.to.ch)}else{if(gj<=gm.to.line){gi=false;break}}}if(!gi){gh.splice(0,gg+1);gg=0}}}function dC(gf,gi){var gh=gi.from.line,gg=gi.to.line,ge=gi.text.length-(gg-gh)-1;ff(gf.done,gh,gg,ge);ff(gf.undone,gh,gg,ge)}var cE=H.e_preventDefault=function(ge){if(ge.preventDefault){ge.preventDefault()}else{ge.returnValue=false}};var dn=H.e_stopPropagation=function(ge){if(ge.stopPropagation){ge.stopPropagation()}else{ge.cancelBubble=true}};function bK(ge){return ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue==false}var ep=H.e_stop=function(ge){cE(ge);dn(ge)};function L(ge){return ge.target||ge.srcElement}function fM(gf){var ge=gf.which;if(ge==null){if(gf.button&1){ge=1}else{if(gf.button&2){ge=3}else{if(gf.button&4){ge=2}}}}if(b6&&gf.ctrlKey&&ge==1){ge=3}return ge}var bW=H.on=function(gh,gf,gg){if(gh.addEventListener){gh.addEventListener(gf,gg,false)}else{if(gh.attachEvent){gh.attachEvent("on"+gf,gg)}else{var gi=gh._handlers||(gh._handlers={});var ge=gi[gf]||(gi[gf]=[]);ge.push(gg)}}};var eb=H.off=function(gi,gg,gh){if(gi.removeEventListener){gi.removeEventListener(gg,gh,false)}else{if(gi.detachEvent){gi.detachEvent("on"+gg,gh)}else{var ge=gi._handlers&&gi._handlers[gg];if(!ge){return}for(var gf=0;gf<ge.length;++gf){if(ge[gf]==gh){ge.splice(gf,1);break}}}}};var aD=H.signal=function(gi,gh){var ge=gi._handlers&&gi._handlers[gh];if(!ge){return}var gf=Array.prototype.slice.call(arguments,2);for(var gg=0;gg<ge.length;++gg){ge[gg].apply(null,gf)}};var by=null;function ae(gk,gi){var ge=gk._handlers&&gk._handlers[gi];if(!ge){return}var gg=Array.prototype.slice.call(arguments,2),gj;if(bo){gj=bo.delayedCallbacks}else{if(by){gj=by}else{gj=by=[];setTimeout(aL,0)}}function gf(gl){return function(){gl.apply(null,gg)}}for(var gh=0;gh<ge.length;++gh){gj.push(gf(ge[gh]))}}function aL(){var ge=by;by=null;for(var gf=0;gf<ge.length;++gf){ge[gf]()}}function aQ(ge,gg,gf){if(typeof gg=="string"){gg={type:gg,preventDefault:function(){this.defaultPrevented=true}}}aD(ge,gf||gg.type,ge,gg);return bK(gg)||gg.codemirrorIgnore}function V(gf){var ge=gf._handlers&&gf._handlers.cursorActivity;if(!ge){return}var gh=gf.curOp.cursorActivityHandlers||(gf.curOp.cursorActivityHandlers=[]);for(var gg=0;gg<ge.length;++gg){if(df(gh,ge[gg])==-1){gh.push(ge[gg])}}}function fg(gg,gf){var ge=gg._handlers&&gg._handlers[gf];return ge&&ge.length>0}function bx(ge){ge.prototype.on=function(gf,gg){bW(this,gf,gg)};ge.prototype.off=function(gf,gg){eb(this,gf,gg)}}var dH=30;var b9=H.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},M={origin:"*mouse"},cU={origin:"+move"};function gd(){this.id=null}gd.prototype.set=function(ge,gf){clearTimeout(this.id);this.id=setTimeout(gf,ge)};var bS=H.countColumn=function(gh,gf,gj,gk,gg){if(gf==null){gf=gh.search(/[^\s\u00a0]/);if(gf==-1){gf=gh.length}}for(var gi=gk||0,gl=gg||0;;){var ge=gh.indexOf("\t",gi);if(ge<0||ge>=gf){return gl+(gf-gi)}gl+=ge-gi;gl+=gj-(gl%gj);gi=ge+1}};function eo(gi,gh,gj){for(var gk=0,gg=0;;){var gf=gi.indexOf("\t",gk);if(gf==-1){gf=gi.length}var ge=gf-gk;if(gf==gi.length||gg+ge>=gh){return gk+Math.min(ge,gh-gg)}gg+=gf-gk;gg+=gj-(gg%gj);gk=gf+1;if(gg>=gh){return gk}}}var aZ=[""];function co(ge){while(aZ.length<=ge){aZ.push(fF(aZ)+" ")}return aZ[ge]}function fF(ge){return ge[ge.length-1]}var dJ=function(ge){ge.select()};if(eZ){dJ=function(ge){ge.selectionStart=0;ge.selectionEnd=ge.value.length}}else{if(dI){dJ=function(gf){try{gf.select()}catch(ge){}}}}function df(gg,ge){for(var gf=0;gf<gg.length;++gf){if(gg[gf]==ge){return gf}}return -1}function bR(gh,gg){var ge=[];for(var gf=0;gf<gh.length;gf++){ge[gf]=gg(gh[gf],gf)}return ge}function fT(){}function cj(gg,ge){var gf;if(Object.create){gf=Object.create(gg)}else{fT.prototype=gg;gf=new fT()}if(ge){aM(ge,gf)}return gf}function aM(gg,gf,ge){if(!gf){gf={}}for(var gh in gg){if(gg.hasOwnProperty(gh)&&(ge!==false||!gf.hasOwnProperty(gh))){gf[gh]=gg[gh]}}return gf}function cu(gf){var ge=Array.prototype.slice.call(arguments,1);return function(){return gf.apply(null,ge)}}var bb=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fB=H.isWordChar=function(ge){return/\w/.test(ge)||ge>"\x80"&&(ge.toUpperCase()!=ge.toLowerCase()||bb.test(ge))};function cz(ge,gf){if(!gf){return fB(ge)}if(gf.source.indexOf("\\w")>-1&&fB(ge)){return true}return gf.test(ge)}function eS(ge){for(var gf in ge){if(ge.hasOwnProperty(gf)&&ge[gf]){return false}}return true}var eH=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fn(ge){return ge.charCodeAt(0)>=768&&eH.test(ge)}function fZ(ge,gi,gh,gg){var gj=document.createElement(ge);if(gh){gj.className=gh}if(gg){gj.style.cssText=gg}if(typeof gi=="string"){gj.appendChild(document.createTextNode(gi))}else{if(gi){for(var gf=0;gf<gi.length;++gf){gj.appendChild(gi[gf])}}}return gj}var ck;if(document.createRange){ck=function(gh,gi,gf,ge){var gg=document.createRange();gg.setEnd(ge||gh,gf);gg.setStart(gh,gi);return gg}}else{ck=function(gg,gi,ge){var gf=document.body.createTextRange();try{gf.moveToElementText(gg.parentNode)}catch(gh){return gf}gf.collapse(true);gf.moveEnd("character",ge);gf.moveStart("character",gi);return gf}}function dZ(gf){for(var ge=gf.childNodes.length;ge>0;--ge){gf.removeChild(gf.firstChild)}return gf}function bQ(ge,gf){return dZ(ge).appendChild(gf)}var f7=H.contains=function(ge,gf){if(gf.nodeType==3){gf=gf.parentNode}if(ge.contains){return ge.contains(gf)}do{if(gf.nodeType==11){gf=gf.host}if(gf==ge){return true}}while(gf=gf.parentNode)};function dM(){return document.activeElement}if(dI&&k<11){dM=function(){try{return document.activeElement}catch(ge){return document.body}}}function S(ge){return new RegExp("(^|\\s)"+ge+"(?:$|\\s)\\s*")}var f=H.rmClass=function(gg,ge){var gh=gg.className;var gf=S(ge).exec(gh);if(gf){var gi=gh.slice(gf.index+gf[0].length);gg.className=gh.slice(0,gf.index)+(gi?gf[1]+gi:"")}};var fy=H.addClass=function(gf,ge){var gg=gf.className;if(!S(ge).test(gg)){gf.className+=(gg?" ":"")+ge}};function fR(gg,ge){var gf=gg.split(" ");for(var gh=0;gh<gf.length;gh++){if(gf[gh]&&!S(gf[gh]).test(ge)){ge+=" "+gf[gh]}}return ge}function az(gh){if(!document.body.getElementsByClassName){return}var gg=document.body.getElementsByClassName("CodeMirror");for(var gf=0;gf<gg.length;gf++){var ge=gg[gf].CodeMirror;if(ge){gh(ge)}}}var cB=false;function bi(){if(cB){return}fC();cB=true}function fC(){var ge;bW(window,"resize",function(){if(ge==null){ge=setTimeout(function(){ge=null;az(aS)},100)}});bW(window,"blur",function(){az(aU)})}var eJ=function(){if(dI&&k<9){return false}var ge=fZ("div");return"draggable" in ge||"dragDrop" in ge}();var fK;function bm(ge){if(fK==null){var gg=fZ("span","\u200b");bQ(ge,fZ("span",[gg,document.createTextNode("x")]));if(ge.firstChild.offsetHeight!=0){fK=gg.offsetWidth<=1&&gg.offsetHeight>2&&!(dI&&k<8)}}var gf=fK?fZ("span","\u200b"):fZ("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gf.setAttribute("cm-text","");return gf}var fJ;function bN(gh){if(fJ!=null){return fJ}var ge=bQ(gh,document.createTextNode("A\u062eA"));var gg=ck(ge,0,1).getBoundingClientRect();if(!gg||gg.left==gg.right){return false}var gf=ck(ge,1,2).getBoundingClientRect();return fJ=(gf.right-gg.right<3)}var a0=H.splitLines="\n\nb".split(/\n/).length!=3?function(gj){var gk=0,ge=[],gi=gj.length;while(gk<=gi){var gh=gj.indexOf("\n",gk);if(gh==-1){gh=gj.length}var gg=gj.slice(gk,gj.charAt(gh-1)=="\r"?gh-1:gh);var gf=gg.indexOf("\r");if(gf!=-1){ge.push(gg.slice(0,gf));gk+=gf+1}else{ge.push(gg);gk=gh+1}}return ge}:function(ge){return ge.split(/\r\n?|\n/)};var br=window.getSelection?function(gf){try{return gf.selectionStart!=gf.selectionEnd}catch(ge){return false}}:function(gg){try{var ge=gg.ownerDocument.selection.createRange()}catch(gf){}if(!ge||ge.parentElement()!=gg){return false}return ge.compareEndPoints("StartToEnd",ge)!=0};var c8=(function(){var ge=fZ("div");if("oncopy" in ge){return true}ge.setAttribute("oncopy","return;");return typeof ge.oncopy=="function"})();var e4=null;function aJ(gf){if(e4!=null){return e4}var gg=bQ(gf,fZ("span","x"));var gh=gg.getBoundingClientRect();var ge=ck(gg,0,1).getBoundingClientRect();return e4=Math.abs(gh.left-ge.left)>1}var fe={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};H.keyNames=fe;(function(){for(var ge=0;ge<10;ge++){fe[ge+48]=fe[ge+96]=String(ge)}for(var ge=65;ge<=90;ge++){fe[ge]=String.fromCharCode(ge)}for(var ge=1;ge<=12;ge++){fe[ge+111]=fe[ge+63235]="F"+ge}})();function d2(ge,gk,gj,gi){if(!ge){return gi(gk,gj,"ltr")}var gh=false;for(var gg=0;gg<ge.length;++gg){var gf=ge[gg];if(gf.from<gj&&gf.to>gk||gk==gj&&gf.to==gk){gi(Math.max(gf.from,gk),Math.min(gf.to,gj),gf.level==1?"rtl":"ltr");gh=true}}if(!gh){gi(gk,gj,"ltr")}}function dw(ge){return ge.level%2?ge.to:ge.from}function ga(ge){return ge.level%2?ge.from:ge.to}function cD(gf){var ge=a(gf);return ge?dw(ge[0]):0}function cQ(gf){var ge=a(gf);if(!ge){return gf.text.length}return ga(fF(ge))}function bs(gf,gi){var gg=fd(gf.doc,gi);var gj=y(gg);if(gj!=gg){gi=bM(gj)}var ge=a(gj);var gh=!ge?0:ge[0].level%2?cQ(gj):cD(gj);return W(gi,gh)}function dN(gg,gj){var gf,gh=fd(gg.doc,gj);while(gf=eu(gh)){gh=gf.find(1,true).line;gj=null}var ge=a(gh);var gi=!ge?gh.text.length:ge[0].level%2?cD(gh):cQ(gh);return W(gj==null?bM(gh):gj,gi)}function dG(gf,gk){var gj=bs(gf,gk.line);var gg=fd(gf.doc,gj.line);var ge=a(gg);if(!ge||ge[0].level==0){var gi=Math.max(0,gg.text.search(/\S/));var gh=gk.line==gj.line&&gk.ch<=gi&&gk.ch;return W(gj.line,gh?0:gi)}return gj}function am(gf,gg,ge){var gh=gf[0].level;if(gg==gh){return true}if(ge==gh){return false}return gg<ge}var e0;function aF(ge,gi){e0=null;for(var gf=0,gg;gf<ge.length;++gf){var gh=ge[gf];if(gh.from<gi&&gh.to>gi){return gf}if((gh.from==gi||gh.to==gi)){if(gg==null){gg=gf}else{if(am(ge,gh.level,ge[gg].level)){if(gh.from!=gh.to){e0=gg}return gf}else{if(gh.from!=gh.to){e0=gf}return gg}}}}return gg}function fc(ge,gh,gf,gg){if(!gg){return gh+gf}do{gh+=gf}while(gh>0&&fn(ge.text.charAt(gh)));return gh}function u(ge,gl,gg,gh){var gi=a(ge);if(!gi){return ai(ge,gl,gg,gh)}var gk=aF(gi,gl),gf=gi[gk];var gj=fc(ge,gl,gf.level%2?-gg:gg,gh);for(;;){if(gj>gf.from&&gj<gf.to){return gj}if(gj==gf.from||gj==gf.to){if(aF(gi,gj)==gk){return gj}gf=gi[gk+=gg];return(gg>0)==gf.level%2?gf.to:gf.from}else{gf=gi[gk+=gg];if(!gf){return null}if((gg>0)==gf.level%2){gj=fc(ge,gf.to,-1,gh)}else{gj=fc(ge,gf.from,1,gh)}}}}function ai(ge,gi,gf,gg){var gh=gi+gf;if(gg){while(gh>0&&fn(ge.text.charAt(gh))){gh+=gf}}return gh<0||gh>ge.text.length?null:gh}var bg=(function(){var gk="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gi="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gh(go){if(go<=247){return gk.charAt(go)}else{if(1424<=go&&go<=1524){return"R"}else{if(1536<=go&&go<=1773){return gi.charAt(go-1536)}else{if(1774<=go&&go<=2220){return"r"}else{if(8192<=go&&go<=8203){return"w"}else{if(go==8204){return"b"}else{return"L"}}}}}}}var ge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gn=/[stwN]/,gg=/[LRr]/,gf=/[Lb1n]/,gj=/[1n]/;var gm="L";function gl(gq,gp,go){this.level=gq;this.from=gp;this.to=go}return function(gy){if(!ge.test(gy)){return false}var gE=gy.length,gu=[];for(var gD=0,gq;gD<gE;++gD){gu.push(gq=gh(gy.charCodeAt(gD)))}for(var gD=0,gx=gm;gD<gE;++gD){var gq=gu[gD];if(gq=="m"){gu[gD]=gx}else{gx=gq}}for(var gD=0,go=gm;gD<gE;++gD){var gq=gu[gD];if(gq=="1"&&go=="r"){gu[gD]="n"}else{if(gg.test(gq)){go=gq;if(gq=="r"){gu[gD]="R"}}}}for(var gD=1,gx=gu[0];gD<gE-1;++gD){var gq=gu[gD];if(gq=="+"&&gx=="1"&&gu[gD+1]=="1"){gu[gD]="1"}else{if(gq==","&&gx==gu[gD+1]&&(gx=="1"||gx=="n")){gu[gD]=gx}}gx=gq}for(var gD=0;gD<gE;++gD){var gq=gu[gD];if(gq==","){gu[gD]="N"}else{if(gq=="%"){for(var gr=gD+1;gr<gE&&gu[gr]=="%";++gr){}var gF=(gD&&gu[gD-1]=="!")||(gr<gE&&gu[gr]=="1")?"1":"N";for(var gB=gD;gB<gr;++gB){gu[gB]=gF}gD=gr-1}}}for(var gD=0,go=gm;gD<gE;++gD){var gq=gu[gD];if(go=="L"&&gq=="1"){gu[gD]="L"}else{if(gg.test(gq)){go=gq}}}for(var gD=0;gD<gE;++gD){if(gn.test(gu[gD])){for(var gr=gD+1;gr<gE&&gn.test(gu[gr]);++gr){}var gv=(gD?gu[gD-1]:gm)=="L";var gp=(gr<gE?gu[gr]:gm)=="L";var gF=gv||gp?"L":"R";for(var gB=gD;gB<gr;++gB){gu[gB]=gF}gD=gr-1}}var gC=[],gz;for(var gD=0;gD<gE;){if(gf.test(gu[gD])){var gs=gD;for(++gD;gD<gE&&gf.test(gu[gD]);++gD){}gC.push(new gl(0,gs,gD))}else{var gt=gD,gw=gC.length;for(++gD;gD<gE&&gu[gD]!="L";++gD){}for(var gB=gt;gB<gD;){if(gj.test(gu[gB])){if(gt<gB){gC.splice(gw,0,new gl(1,gt,gB))}var gA=gB;for(++gB;gB<gD&&gj.test(gu[gB]);++gB){}gC.splice(gw,0,new gl(2,gA,gB));gt=gB}else{++gB}}if(gt<gD){gC.splice(gw,0,new gl(1,gt,gD))}}}if(gC[0].level==1&&(gz=gy.match(/^\s+/))){gC[0].from=gz[0].length;gC.unshift(new gl(0,0,gz[0].length))}if(fF(gC).level==1&&(gz=gy.match(/\s+$/))){fF(gC).to-=gz[0].length;gC.push(new gl(0,gE-gz[0].length,gE))}if(gC[0].level!=fF(gC).level){gC.push(new gl(gC[0].level,gE,gE))}return gC}})();H.version="5.0.0";return H});